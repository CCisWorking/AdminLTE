import{r as lv,g as dv,R as L,a as y0,b as O,c as lr}from"./index.DjVpr4yX.js";/* empty css                      */var ln={exports:{}},Lt={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jc;function m0(){if(jc)return Lt;jc=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:e,type:n,key:o,ref:i!==void 0?i:null,props:a}}return Lt.Fragment=t,Lt.jsx=r,Lt.jsxs=r,Lt}var Kc;function _0(){return Kc||(Kc=1,ln.exports=m0()),ln.exports}var Ee=_0();function he(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=he(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var dn={exports:{}},hn={},pn={exports:{}},gn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yc;function b0(){if(Yc)return gn;Yc=1;var e=lv();function t(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function s(l,d){var h=d(),_=n({inst:{value:h,getSnapshot:d}}),p=_[0].inst,g=_[1];return a(function(){p.value=h,p.getSnapshot=d,u(p)&&g({inst:p})},[l,h,d]),i(function(){return u(p)&&g({inst:p}),l(function(){u(p)&&g({inst:p})})},[l]),o(h),h}function u(l){var d=l.getSnapshot;l=l.value;try{var h=d();return!r(l,h)}catch{return!0}}function f(l,d){return d()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:s;return gn.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:c,gn}var Wc;function w0(){return Wc||(Wc=1,pn.exports=b0()),pn.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc;function x0(){if(Xc)return hn;Xc=1;var e=lv(),t=w0();function r(f,c){return f===c&&(f!==0||1/f===1/c)||f!==f&&c!==c}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,a=e.useRef,o=e.useEffect,s=e.useMemo,u=e.useDebugValue;return hn.useSyncExternalStoreWithSelector=function(f,c,l,d,h){var _=a(null);if(_.current===null){var p={hasValue:!1,value:null};_.current=p}else p=_.current;_=s(function(){function v(x){if(!y){if(y=!0,b=x,x=d(x),h!==void 0&&p.hasValue){var S=p.value;if(h(S,x))return m=S}return m=x}if(S=m,n(b,x))return S;var N=d(x);return h!==void 0&&h(S,N)?(b=x,S):(b=x,m=N)}var y=!1,b,m,E=l===void 0?null:l;return[function(){return v(c())},E===null?void 0:function(){return v(E())}]},[c,l,d,h]);var g=i(f,_[0],_[1]);return o(function(){p.hasValue=!0,p.value=g},[g]),u(g),g},hn}var Zc;function E0(){return Zc||(Zc=1,dn.exports=x0()),dn.exports}var S0=E0();const q0=dv(S0),Jc=e=>{let t;const r=new Set,n=(c,l)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=l??(typeof d!="object"||d===null)?d:Object.assign({},t,d),r.forEach(_=>_(t,h))}},i=()=>t,u={setState:n,getState:i,getInitialState:()=>f,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{r.clear()}},f=t=e(n,i,u);return u},R0=e=>e?Jc(e):Jc,{useDebugValue:C0}=L,{useSyncExternalStoreWithSelector:N0}=q0,A0=e=>e;function hv(e,t=A0,r){const n=N0(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return C0(n),n}const Qc=(e,t)=>{const r=R0(e),n=(i,a=t)=>hv(r,i,a);return Object.assign(n,r),n},I0=(e,t)=>e?Qc(e,t):Qc;function be(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var T0={value:()=>{}};function Pr(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new wr(r)}function wr(e){this._=e}function M0(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}wr.prototype=Pr.prototype={constructor:wr,on:function(e,t){var r=this._,n=M0(e+"",r),i,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((i=(e=n[a]).type)&&(i=k0(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=n[a]).type)r[i]=ef(r[i],e.name,t);else if(t==null)for(i in r)r[i]=ef(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new wr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,a;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],n=0,i=a.length;n<i;++n)a[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,a=n.length;i<a;++i)n[i].value.apply(t,r)}};function k0(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function ef(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=T0,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var Uu="http://www.w3.org/1999/xhtml";const tf={svg:"http://www.w3.org/2000/svg",xhtml:Uu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dr(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),tf.hasOwnProperty(t)?{space:tf[t],local:e}:e}function O0(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Uu&&t.documentElement.namespaceURI===Uu?t.createElement(e):t.createElementNS(r,e)}}function P0(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pv(e){var t=Dr(e);return(t.local?P0:O0)(t)}function D0(){}function sc(e){return e==null?D0:function(){return this.querySelector(e)}}function L0(e){typeof e!="function"&&(e=sc(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],o=a.length,s=n[i]=new Array(o),u,f,c=0;c<o;++c)(u=a[c])&&(f=e.call(u,u.__data__,c,a))&&("__data__"in u&&(f.__data__=u.__data__),s[c]=f);return new Se(n,this._parents)}function $0(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function F0(){return[]}function gv(e){return e==null?F0:function(){return this.querySelectorAll(e)}}function z0(e){return function(){return $0(e.apply(this,arguments))}}function H0(e){typeof e=="function"?e=z0(e):e=gv(e);for(var t=this._groups,r=t.length,n=[],i=[],a=0;a<r;++a)for(var o=t[a],s=o.length,u,f=0;f<s;++f)(u=o[f])&&(n.push(e.call(u,u.__data__,f,o)),i.push(u));return new Se(n,i)}function vv(e){return function(){return this.matches(e)}}function yv(e){return function(t){return t.matches(e)}}var B0=Array.prototype.find;function G0(e){return function(){return B0.call(this.children,e)}}function V0(){return this.firstElementChild}function U0(e){return this.select(e==null?V0:G0(typeof e=="function"?e:yv(e)))}var j0=Array.prototype.filter;function K0(){return Array.from(this.children)}function Y0(e){return function(){return j0.call(this.children,e)}}function W0(e){return this.selectAll(e==null?K0:Y0(typeof e=="function"?e:yv(e)))}function X0(e){typeof e!="function"&&(e=vv(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],o=a.length,s=n[i]=[],u,f=0;f<o;++f)(u=a[f])&&e.call(u,u.__data__,f,a)&&s.push(u);return new Se(n,this._parents)}function mv(e){return new Array(e.length)}function Z0(){return new Se(this._enter||this._groups.map(mv),this._parents)}function qr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qr.prototype={constructor:qr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function J0(e){return function(){return e}}function Q0(e,t,r,n,i,a){for(var o=0,s,u=t.length,f=a.length;o<f;++o)(s=t[o])?(s.__data__=a[o],n[o]=s):r[o]=new qr(e,a[o]);for(;o<u;++o)(s=t[o])&&(i[o]=s)}function e_(e,t,r,n,i,a,o){var s,u,f=new Map,c=t.length,l=a.length,d=new Array(c),h;for(s=0;s<c;++s)(u=t[s])&&(d[s]=h=o.call(u,u.__data__,s,t)+"",f.has(h)?i[s]=u:f.set(h,u));for(s=0;s<l;++s)h=o.call(e,a[s],s,a)+"",(u=f.get(h))?(n[s]=u,u.__data__=a[s],f.delete(h)):r[s]=new qr(e,a[s]);for(s=0;s<c;++s)(u=t[s])&&f.get(d[s])===u&&(i[s]=u)}function t_(e){return e.__data__}function r_(e,t){if(!arguments.length)return Array.from(this,t_);var r=t?e_:Q0,n=this._parents,i=this._groups;typeof e!="function"&&(e=J0(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),f=0;f<a;++f){var c=n[f],l=i[f],d=l.length,h=n_(e.call(c,c&&c.__data__,f,n)),_=h.length,p=s[f]=new Array(_),g=o[f]=new Array(_),v=u[f]=new Array(d);r(c,l,p,g,v,h,t);for(var y=0,b=0,m,E;y<_;++y)if(m=p[y]){for(y>=b&&(b=y+1);!(E=g[b])&&++b<_;);m._next=E||null}}return o=new Se(o,n),o._enter=s,o._exit=u,o}function n_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function i_(){return new Se(this._exit||this._groups.map(mv),this._parents)}function a_(e,t,r){var n=this.enter(),i=this,a=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?a.remove():r(a),n&&i?n.merge(i).order():i}function o_(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,a=n.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var f=r[u],c=n[u],l=f.length,d=s[u]=new Array(l),h,_=0;_<l;++_)(h=f[_]||c[_])&&(d[_]=h);for(;u<i;++u)s[u]=r[u];return new Se(s,this._parents)}function s_(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,a=n[i],o;--i>=0;)(o=n[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function u_(e){e||(e=c_);function t(l,d){return l&&d?e(l.__data__,d.__data__):!l-!d}for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var o=r[a],s=o.length,u=i[a]=new Array(s),f,c=0;c<s;++c)(f=o[c])&&(u[c]=f);u.sort(t)}return new Se(i,this._parents).order()}function c_(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function f_(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function l_(){return Array.from(this)}function d_(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length;i<a;++i){var o=n[i];if(o)return o}return null}function h_(){let e=0;for(const t of this)++e;return e}function p_(){return!this.node()}function g_(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function v_(e){return function(){this.removeAttribute(e)}}function y_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function m_(e,t){return function(){this.setAttribute(e,t)}}function __(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function b_(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function w_(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function x_(e,t){var r=Dr(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?y_:v_:typeof t=="function"?r.local?w_:b_:r.local?__:m_)(r,t))}function _v(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function E_(e){return function(){this.style.removeProperty(e)}}function S_(e,t,r){return function(){this.style.setProperty(e,t,r)}}function q_(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function R_(e,t,r){return arguments.length>1?this.each((t==null?E_:typeof t=="function"?q_:S_)(e,t,r??"")):Ct(this.node(),e)}function Ct(e,t){return e.style.getPropertyValue(t)||_v(e).getComputedStyle(e,null).getPropertyValue(t)}function C_(e){return function(){delete this[e]}}function N_(e,t){return function(){this[e]=t}}function A_(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function I_(e,t){return arguments.length>1?this.each((t==null?C_:typeof t=="function"?A_:N_)(e,t)):this.node()[e]}function bv(e){return e.trim().split(/^|\s+/)}function uc(e){return e.classList||new wv(e)}function wv(e){this._node=e,this._names=bv(e.getAttribute("class")||"")}wv.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function xv(e,t){for(var r=uc(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function Ev(e,t){for(var r=uc(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function T_(e){return function(){xv(this,e)}}function M_(e){return function(){Ev(this,e)}}function k_(e,t){return function(){(t.apply(this,arguments)?xv:Ev)(this,e)}}function O_(e,t){var r=bv(e+"");if(arguments.length<2){for(var n=uc(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?k_:t?T_:M_)(r,t))}function P_(){this.textContent=""}function D_(e){return function(){this.textContent=e}}function L_(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $_(e){return arguments.length?this.each(e==null?P_:(typeof e=="function"?L_:D_)(e)):this.node().textContent}function F_(){this.innerHTML=""}function z_(e){return function(){this.innerHTML=e}}function H_(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function B_(e){return arguments.length?this.each(e==null?F_:(typeof e=="function"?H_:z_)(e)):this.node().innerHTML}function G_(){this.nextSibling&&this.parentNode.appendChild(this)}function V_(){return this.each(G_)}function U_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function j_(){return this.each(U_)}function K_(e){var t=typeof e=="function"?e:pv(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Y_(){return null}function W_(e,t){var r=typeof e=="function"?e:pv(e),n=t==null?Y_:typeof t=="function"?t:sc(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function X_(){var e=this.parentNode;e&&e.removeChild(this)}function Z_(){return this.each(X_)}function J_(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Q_(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eb(e){return this.select(e?Q_:J_)}function tb(e){return arguments.length?this.property("__data__",e):this.node().__data__}function rb(e){return function(t){e.call(this,t,this.__data__)}}function nb(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function ib(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,a;r<i;++r)a=t[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++n]=a;++n?t.length=n:delete this.__on}}}function ab(e,t,r){return function(){var n=this.__on,i,a=rb(t);if(n){for(var o=0,s=n.length;o<s;++o)if((i=n[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=r),i.value=t;return}}this.addEventListener(e.type,a,r),i={type:e.type,name:e.name,value:t,listener:a,options:r},n?n.push(i):this.__on=[i]}}function ob(e,t,r){var n=nb(e+""),i,a=n.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,f=s.length,c;u<f;++u)for(i=0,c=s[u];i<a;++i)if((o=n[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=t?ab:ib,i=0;i<a;++i)this.each(s(n[i],t,r));return this}function Sv(e,t,r){var n=_v(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function sb(e,t){return function(){return Sv(this,e,t)}}function ub(e,t){return function(){return Sv(this,e,t.apply(this,arguments))}}function cb(e,t){return this.each((typeof t=="function"?ub:sb)(e,t))}function*fb(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length,o;i<a;++i)(o=n[i])&&(yield o)}var qv=[null];function Se(e,t){this._groups=e,this._parents=t}function nr(){return new Se([[document.documentElement]],qv)}function lb(){return this}Se.prototype=nr.prototype={constructor:Se,select:L0,selectAll:H0,selectChild:U0,selectChildren:W0,filter:X0,data:r_,enter:Z0,exit:i_,join:a_,merge:o_,selection:lb,order:s_,sort:u_,call:f_,nodes:l_,node:d_,size:h_,empty:p_,each:g_,attr:x_,style:R_,property:I_,classed:O_,text:$_,html:B_,raise:V_,lower:j_,append:K_,insert:W_,remove:Z_,clone:eb,datum:tb,on:ob,dispatch:cb,[Symbol.iterator]:fb};function qe(e){return typeof e=="string"?new Se([[document.querySelector(e)]],[document.documentElement]):new Se([[e]],qv)}function db(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Te(e,t){if(e=db(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const hb={passive:!1},Wt={capture:!0,passive:!1};function vn(e){e.stopImmediatePropagation()}function St(e){e.preventDefault(),e.stopImmediatePropagation()}function Rv(e){var t=e.document.documentElement,r=qe(e).on("dragstart.drag",St,Wt);"onselectstart"in t?r.on("selectstart.drag",St,Wt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Cv(e,t){var r=e.document.documentElement,n=qe(e).on("dragstart.drag",null);t&&(n.on("click.drag",St,Wt),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const dr=e=>()=>e;function ju(e,{sourceEvent:t,subject:r,target:n,identifier:i,active:a,x:o,y:s,dx:u,dy:f,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:c}})}ju.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function pb(e){return!e.ctrlKey&&!e.button}function gb(){return this.parentNode}function vb(e,t){return t??{x:e.x,y:e.y}}function yb(){return navigator.maxTouchPoints||"ontouchstart"in this}function mb(){var e=pb,t=gb,r=vb,n=yb,i={},a=Pr("start","drag","end"),o=0,s,u,f,c,l=0;function d(m){m.on("mousedown.drag",h).filter(n).on("touchstart.drag",g).on("touchmove.drag",v,hb).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(m,E){if(!(c||!e.call(this,m,E))){var x=b(this,t.call(this,m,E),m,E,"mouse");x&&(qe(m.view).on("mousemove.drag",_,Wt).on("mouseup.drag",p,Wt),Rv(m.view),vn(m),f=!1,s=m.clientX,u=m.clientY,x("start",m))}}function _(m){if(St(m),!f){var E=m.clientX-s,x=m.clientY-u;f=E*E+x*x>l}i.mouse("drag",m)}function p(m){qe(m.view).on("mousemove.drag mouseup.drag",null),Cv(m.view,f),St(m),i.mouse("end",m)}function g(m,E){if(e.call(this,m,E)){var x=m.changedTouches,S=t.call(this,m,E),N=x.length,q,A;for(q=0;q<N;++q)(A=b(this,S,m,E,x[q].identifier,x[q]))&&(vn(m),A("start",m,x[q]))}}function v(m){var E=m.changedTouches,x=E.length,S,N;for(S=0;S<x;++S)(N=i[E[S].identifier])&&(St(m),N("drag",m,E[S]))}function y(m){var E=m.changedTouches,x=E.length,S,N;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),S=0;S<x;++S)(N=i[E[S].identifier])&&(vn(m),N("end",m,E[S]))}function b(m,E,x,S,N,q){var A=a.copy(),I=Te(q||x,E),D,P,w;if((w=r.call(m,new ju("beforestart",{sourceEvent:x,target:d,identifier:N,active:o,x:I[0],y:I[1],dx:0,dy:0,dispatch:A}),S))!=null)return D=w.x-I[0]||0,P=w.y-I[1]||0,function T(C,F,H){var M=I,z;switch(C){case"start":i[N]=T,z=o++;break;case"end":delete i[N],--o;case"drag":I=Te(H||F,E),z=o;break}A.call(C,m,new ju(C,{sourceEvent:F,subject:w,target:d,identifier:N,active:z,x:I[0]+D,y:I[1]+P,dx:I[0]-M[0],dy:I[1]-M[1],dispatch:A}),S)}}return d.filter=function(m){return arguments.length?(e=typeof m=="function"?m:dr(!!m),d):e},d.container=function(m){return arguments.length?(t=typeof m=="function"?m:dr(m),d):t},d.subject=function(m){return arguments.length?(r=typeof m=="function"?m:dr(m),d):r},d.touchable=function(m){return arguments.length?(n=typeof m=="function"?m:dr(!!m),d):n},d.on=function(){var m=a.on.apply(a,arguments);return m===a?d:m},d.clickDistance=function(m){return arguments.length?(l=(m=+m)*m,d):Math.sqrt(l)},d}function cc(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Nv(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ir(){}var Xt=.7,Rr=1/Xt,qt="\\s*([+-]?\\d+)\\s*",Zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_b=/^#([0-9a-f]{3,8})$/,bb=new RegExp(`^rgb\\(${qt},${qt},${qt}\\)$`),wb=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),xb=new RegExp(`^rgba\\(${qt},${qt},${qt},${Zt}\\)$`),Eb=new RegExp(`^rgba\\(${ze},${ze},${ze},${Zt}\\)$`),Sb=new RegExp(`^hsl\\(${Zt},${ze},${ze}\\)$`),qb=new RegExp(`^hsla\\(${Zt},${ze},${ze},${Zt}\\)$`),rf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cc(ir,Jt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nf,formatHex:nf,formatHex8:Rb,formatHsl:Cb,formatRgb:af,toString:af});function nf(){return this.rgb().formatHex()}function Rb(){return this.rgb().formatHex8()}function Cb(){return Av(this).formatHsl()}function af(){return this.rgb().formatRgb()}function Jt(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=_b.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?of(t):r===3?new me(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?hr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?hr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bb.exec(e))?new me(t[1],t[2],t[3],1):(t=wb.exec(e))?new me(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xb.exec(e))?hr(t[1],t[2],t[3],t[4]):(t=Eb.exec(e))?hr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Sb.exec(e))?cf(t[1],t[2]/100,t[3]/100,1):(t=qb.exec(e))?cf(t[1],t[2]/100,t[3]/100,t[4]):rf.hasOwnProperty(e)?of(rf[e]):e==="transparent"?new me(NaN,NaN,NaN,0):null}function of(e){return new me(e>>16&255,e>>8&255,e&255,1)}function hr(e,t,r,n){return n<=0&&(e=t=r=NaN),new me(e,t,r,n)}function Nb(e){return e instanceof ir||(e=Jt(e)),e?(e=e.rgb(),new me(e.r,e.g,e.b,e.opacity)):new me}function Ku(e,t,r,n){return arguments.length===1?Nb(e):new me(e,t,r,n??1)}function me(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}cc(me,Ku,Nv(ir,{brighter(e){return e=e==null?Rr:Math.pow(Rr,e),new me(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xt:Math.pow(Xt,e),new me(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new me(ft(this.r),ft(this.g),ft(this.b),Cr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sf,formatHex:sf,formatHex8:Ab,formatRgb:uf,toString:uf}));function sf(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}`}function Ab(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}${ut((isNaN(this.opacity)?1:this.opacity)*255)}`}function uf(){const e=Cr(this.opacity);return`${e===1?"rgb(":"rgba("}${ft(this.r)}, ${ft(this.g)}, ${ft(this.b)}${e===1?")":`, ${e})`}`}function Cr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ft(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ut(e){return e=ft(e),(e<16?"0":"")+e.toString(16)}function cf(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Me(e,t,r,n)}function Av(e){if(e instanceof Me)return new Me(e.h,e.s,e.l,e.opacity);if(e instanceof ir||(e=Jt(e)),!e)return new Me;if(e instanceof Me)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,s=a-i,u=(a+i)/2;return s?(t===a?o=(r-n)/s+(r<n)*6:r===a?o=(n-t)/s+2:o=(t-r)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Me(o,s,u,e.opacity)}function Ib(e,t,r,n){return arguments.length===1?Av(e):new Me(e,t,r,n??1)}function Me(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}cc(Me,Ib,Nv(ir,{brighter(e){return e=e==null?Rr:Math.pow(Rr,e),new Me(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xt:Math.pow(Xt,e),new Me(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new me(yn(e>=240?e-240:e+120,i,n),yn(e,i,n),yn(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Me(ff(this.h),pr(this.s),pr(this.l),Cr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cr(this.opacity);return`${e===1?"hsl(":"hsla("}${ff(this.h)}, ${pr(this.s)*100}%, ${pr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ff(e){return e=(e||0)%360,e<0?e+360:e}function pr(e){return Math.max(0,Math.min(1,e||0))}function yn(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Iv=e=>()=>e;function Tb(e,t){return function(r){return e+r*t}}function Mb(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function kb(e){return(e=+e)==1?Tv:function(t,r){return r-t?Mb(t,r,e):Iv(isNaN(t)?r:t)}}function Tv(e,t){var r=t-e;return r?Tb(e,r):Iv(isNaN(e)?t:e)}const lf=function e(t){var r=kb(t);function n(i,a){var o=r((i=Ku(i)).r,(a=Ku(a)).r),s=r(i.g,a.g),u=r(i.b,a.b),f=Tv(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=u(c),i.opacity=f(c),i+""}}return n.gamma=e,n}(1);function et(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Yu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mn=new RegExp(Yu.source,"g");function Ob(e){return function(){return e}}function Pb(e){return function(t){return e(t)+""}}function Db(e,t){var r=Yu.lastIndex=mn.lastIndex=0,n,i,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(n=Yu.exec(e))&&(i=mn.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:et(n,i)})),r=mn.lastIndex;return r<t.length&&(a=t.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Pb(u[0].x):Ob(t):(t=u.length,function(f){for(var c=0,l;c<t;++c)s[(l=u[c]).i]=l.x(f);return s.join("")})}var df=180/Math.PI,Wu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Mv(e,t,r,n,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*r+t*n)&&(r-=e*u,n-=t*u),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,u/=s),e*n<t*r&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*df,skewX:Math.atan(u)*df,scaleX:o,scaleY:s}}var gr;function Lb(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Wu:Mv(t.a,t.b,t.c,t.d,t.e,t.f)}function $b(e){return e==null||(gr||(gr=document.createElementNS("http://www.w3.org/2000/svg","g")),gr.setAttribute("transform",e),!(e=gr.transform.baseVal.consolidate()))?Wu:(e=e.matrix,Mv(e.a,e.b,e.c,e.d,e.e,e.f))}function kv(e,t,r,n){function i(f){return f.length?f.pop()+" ":""}function a(f,c,l,d,h,_){if(f!==l||c!==d){var p=h.push("translate(",null,t,null,r);_.push({i:p-4,x:et(f,l)},{i:p-2,x:et(c,d)})}else(l||d)&&h.push("translate("+l+t+d+r)}function o(f,c,l,d){f!==c?(f-c>180?c+=360:c-f>180&&(f+=360),d.push({i:l.push(i(l)+"rotate(",null,n)-2,x:et(f,c)})):c&&l.push(i(l)+"rotate("+c+n)}function s(f,c,l,d){f!==c?d.push({i:l.push(i(l)+"skewX(",null,n)-2,x:et(f,c)}):c&&l.push(i(l)+"skewX("+c+n)}function u(f,c,l,d,h,_){if(f!==l||c!==d){var p=h.push(i(h)+"scale(",null,",",null,")");_.push({i:p-4,x:et(f,l)},{i:p-2,x:et(c,d)})}else(l!==1||d!==1)&&h.push(i(h)+"scale("+l+","+d+")")}return function(f,c){var l=[],d=[];return f=e(f),c=e(c),a(f.translateX,f.translateY,c.translateX,c.translateY,l,d),o(f.rotate,c.rotate,l,d),s(f.skewX,c.skewX,l,d),u(f.scaleX,f.scaleY,c.scaleX,c.scaleY,l,d),f=c=null,function(h){for(var _=-1,p=d.length,g;++_<p;)l[(g=d[_]).i]=g.x(h);return l.join("")}}}var Fb=kv(Lb,"px, ","px)","deg)"),zb=kv($b,", ",")",")"),Hb=1e-12;function hf(e){return((e=Math.exp(e))+1/e)/2}function Bb(e){return((e=Math.exp(e))-1/e)/2}function Gb(e){return((e=Math.exp(2*e))-1)/(e+1)}const Vb=function e(t,r,n){function i(a,o){var s=a[0],u=a[1],f=a[2],c=o[0],l=o[1],d=o[2],h=c-s,_=l-u,p=h*h+_*_,g,v;if(p<Hb)v=Math.log(d/f)/t,g=function(S){return[s+S*h,u+S*_,f*Math.exp(t*S*v)]};else{var y=Math.sqrt(p),b=(d*d-f*f+n*p)/(2*f*r*y),m=(d*d-f*f-n*p)/(2*d*r*y),E=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(m*m+1)-m);v=(x-E)/t,g=function(S){var N=S*v,q=hf(E),A=f/(r*y)*(q*Gb(t*N+E)-Bb(E));return[s+A*h,u+A*_,f*q/hf(t*N+E)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(a){var o=Math.max(.001,+a),s=o*o,u=s*s;return e(o,s,u)},i}(Math.SQRT2,2,4);var Nt=0,Gt=0,$t=0,Ov=1e3,Nr,Vt,Ar=0,dt=0,Lr=0,Qt=typeof performance=="object"&&performance.now?performance:Date,Pv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fc(){return dt||(Pv(Ub),dt=Qt.now()+Lr)}function Ub(){dt=0}function Ir(){this._call=this._time=this._next=null}Ir.prototype=Dv.prototype={constructor:Ir,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?fc():+r)+(t==null?0:+t),!this._next&&Vt!==this&&(Vt?Vt._next=this:Nr=this,Vt=this),this._call=e,this._time=r,Xu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xu())}};function Dv(e,t,r){var n=new Ir;return n.restart(e,t,r),n}function jb(){fc(),++Nt;for(var e=Nr,t;e;)(t=dt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nt}function pf(){dt=(Ar=Qt.now())+Lr,Nt=Gt=0;try{jb()}finally{Nt=0,Yb(),dt=0}}function Kb(){var e=Qt.now(),t=e-Ar;t>Ov&&(Lr-=t,Ar=e)}function Yb(){for(var e,t=Nr,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Nr=r);Vt=e,Xu(n)}function Xu(e){if(!Nt){Gt&&(Gt=clearTimeout(Gt));var t=e-dt;t>24?(e<1/0&&(Gt=setTimeout(pf,e-Qt.now()-Lr)),$t&&($t=clearInterval($t))):($t||(Ar=Qt.now(),$t=setInterval(Kb,Ov)),Nt=1,Pv(pf))}}function gf(e,t,r){var n=new Ir;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var Wb=Pr("start","end","cancel","interrupt"),Xb=[],Lv=0,vf=1,Zu=2,xr=3,yf=4,Ju=5,Er=6;function $r(e,t,r,n,i,a){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;Zb(e,r,{name:t,index:n,group:i,on:Wb,tween:Xb,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Lv})}function lc(e,t){var r=Pe(e,t);if(r.state>Lv)throw new Error("too late; already scheduled");return r}function He(e,t){var r=Pe(e,t);if(r.state>xr)throw new Error("too late; already running");return r}function Pe(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Zb(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=Dv(a,0,r.time);function a(f){r.state=vf,r.timer.restart(o,r.delay,r.time),r.delay<=f&&o(f-r.delay)}function o(f){var c,l,d,h;if(r.state!==vf)return u();for(c in n)if(h=n[c],h.name===r.name){if(h.state===xr)return gf(o);h.state===yf?(h.state=Er,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete n[c]):+c<t&&(h.state=Er,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete n[c])}if(gf(function(){r.state===xr&&(r.state=yf,r.timer.restart(s,r.delay,r.time),s(f))}),r.state=Zu,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Zu){for(r.state=xr,i=new Array(d=r.tween.length),c=0,l=-1;c<d;++c)(h=r.tween[c].value.call(e,e.__data__,r.index,r.group))&&(i[++l]=h);i.length=l+1}}function s(f){for(var c=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(u),r.state=Ju,1),l=-1,d=i.length;++l<d;)i[l].call(e,c);r.state===Ju&&(r.on.call("end",e,e.__data__,r.index,r.group),u())}function u(){r.state=Er,r.timer.stop(),delete n[t];for(var f in n)return;delete e.__transition}}function Sr(e,t){var r=e.__transition,n,i,a=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){a=!1;continue}i=n.state>Zu&&n.state<Ju,n.state=Er,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}a&&delete e.__transition}}function Jb(e){return this.each(function(){Sr(this,e)})}function Qb(e,t){var r,n;return function(){var i=He(this,e),a=i.tween;if(a!==r){n=r=a;for(var o=0,s=n.length;o<s;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function ew(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var a=He(this,e),o=a.tween;if(o!==n){i=(n=o).slice();for(var s={name:t,value:r},u=0,f=i.length;u<f;++u)if(i[u].name===t){i[u]=s;break}u===f&&i.push(s)}a.tween=i}}function tw(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Pe(this.node(),r).tween,i=0,a=n.length,o;i<a;++i)if((o=n[i]).name===e)return o.value;return null}return this.each((t==null?Qb:ew)(r,e,t))}function dc(e,t,r){var n=e._id;return e.each(function(){var i=He(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return Pe(i,n).value[t]}}function $v(e,t){var r;return(typeof t=="number"?et:t instanceof Jt?lf:(r=Jt(t))?(t=r,lf):Db)(e,t)}function rw(e){return function(){this.removeAttribute(e)}}function nw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iw(e,t,r){var n,i=r+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===n?a:a=t(n=o,r)}}function aw(e,t,r){var n,i=r+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===n?a:a=t(n=o,r)}}function ow(e,t,r){var n,i,a;return function(){var o,s=r(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===n&&u===i?a:(i=u,a=t(n=o,s)))}}function sw(e,t,r){var n,i,a;return function(){var o,s=r(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===n&&u===i?a:(i=u,a=t(n=o,s)))}}function uw(e,t){var r=Dr(e),n=r==="transform"?zb:$v;return this.attrTween(e,typeof t=="function"?(r.local?sw:ow)(r,n,dc(this,"attr."+e,t)):t==null?(r.local?nw:rw)(r):(r.local?aw:iw)(r,n,t))}function cw(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function fw(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function lw(e,t){var r,n;function i(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&fw(e,a)),r}return i._value=t,i}function dw(e,t){var r,n;function i(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&cw(e,a)),r}return i._value=t,i}function hw(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Dr(e);return this.tween(r,(n.local?lw:dw)(n,t))}function pw(e,t){return function(){lc(this,e).delay=+t.apply(this,arguments)}}function gw(e,t){return t=+t,function(){lc(this,e).delay=t}}function vw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pw:gw)(t,e)):Pe(this.node(),t).delay}function yw(e,t){return function(){He(this,e).duration=+t.apply(this,arguments)}}function mw(e,t){return t=+t,function(){He(this,e).duration=t}}function _w(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yw:mw)(t,e)):Pe(this.node(),t).duration}function bw(e,t){if(typeof t!="function")throw new Error;return function(){He(this,e).ease=t}}function ww(e){var t=this._id;return arguments.length?this.each(bw(t,e)):Pe(this.node(),t).ease}function xw(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;He(this,e).ease=r}}function Ew(e){if(typeof e!="function")throw new Error;return this.each(xw(this._id,e))}function Sw(e){typeof e!="function"&&(e=vv(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a=t[i],o=a.length,s=n[i]=[],u,f=0;f<o;++f)(u=a[f])&&e.call(u,u.__data__,f,a)&&s.push(u);return new Ye(n,this._parents,this._name,this._id)}function qw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s)for(var u=t[s],f=r[s],c=u.length,l=o[s]=new Array(c),d,h=0;h<c;++h)(d=u[h]||f[h])&&(l[h]=d);for(;s<n;++s)o[s]=t[s];return new Ye(o,this._parents,this._name,this._id)}function Rw(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Cw(e,t,r){var n,i,a=Rw(t)?lc:He;return function(){var o=a(this,e),s=o.on;s!==n&&(i=(n=s).copy()).on(t,r),o.on=i}}function Nw(e,t){var r=this._id;return arguments.length<2?Pe(this.node(),r).on.on(e):this.each(Cw(r,e,t))}function Aw(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Iw(){return this.on("end.remove",Aw(this._id))}function Tw(e){var t=this._name,r=this._id;typeof e!="function"&&(e=sc(e));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var s=n[o],u=s.length,f=a[o]=new Array(u),c,l,d=0;d<u;++d)(c=s[d])&&(l=e.call(c,c.__data__,d,s))&&("__data__"in c&&(l.__data__=c.__data__),f[d]=l,$r(f[d],t,r,d,f,Pe(c,r)));return new Ye(a,this._parents,t,r)}function Mw(e){var t=this._name,r=this._id;typeof e!="function"&&(e=gv(e));for(var n=this._groups,i=n.length,a=[],o=[],s=0;s<i;++s)for(var u=n[s],f=u.length,c,l=0;l<f;++l)if(c=u[l]){for(var d=e.call(c,c.__data__,l,u),h,_=Pe(c,r),p=0,g=d.length;p<g;++p)(h=d[p])&&$r(h,t,r,p,d,_);a.push(d),o.push(c)}return new Ye(a,o,t,r)}var kw=nr.prototype.constructor;function Ow(){return new kw(this._groups,this._parents)}function Pw(e,t){var r,n,i;return function(){var a=Ct(this,e),o=(this.style.removeProperty(e),Ct(this,e));return a===o?null:a===r&&o===n?i:i=t(r=a,n=o)}}function Fv(e){return function(){this.style.removeProperty(e)}}function Dw(e,t,r){var n,i=r+"",a;return function(){var o=Ct(this,e);return o===i?null:o===n?a:a=t(n=o,r)}}function Lw(e,t,r){var n,i,a;return function(){var o=Ct(this,e),s=r(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Ct(this,e))),o===u?null:o===n&&u===i?a:(i=u,a=t(n=o,s))}}function $w(e,t){var r,n,i,a="style."+t,o="end."+a,s;return function(){var u=He(this,e),f=u.on,c=u.value[a]==null?s||(s=Fv(t)):void 0;(f!==r||i!==c)&&(n=(r=f).copy()).on(o,i=c),u.on=n}}function Fw(e,t,r){var n=(e+="")=="transform"?Fb:$v;return t==null?this.styleTween(e,Pw(e,n)).on("end.style."+e,Fv(e)):typeof t=="function"?this.styleTween(e,Lw(e,n,dc(this,"style."+e,t))).each($w(this._id,e)):this.styleTween(e,Dw(e,n,t),r).on("end.style."+e,null)}function zw(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Hw(e,t,r){var n,i;function a(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&zw(e,o,r)),n}return a._value=t,a}function Bw(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Hw(e,t,r??""))}function Gw(e){return function(){this.textContent=e}}function Vw(e){return function(){var t=e(this);this.textContent=t??""}}function Uw(e){return this.tween("text",typeof e=="function"?Vw(dc(this,"text",e)):Gw(e==null?"":e+""))}function jw(e){return function(t){this.textContent=e.call(this,t)}}function Kw(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&jw(i)),t}return n._value=e,n}function Yw(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Kw(e))}function Ww(){for(var e=this._name,t=this._id,r=zv(),n=this._groups,i=n.length,a=0;a<i;++a)for(var o=n[a],s=o.length,u,f=0;f<s;++f)if(u=o[f]){var c=Pe(u,t);$r(u,e,r,f,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ye(n,this._parents,e,r)}function Xw(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};r.each(function(){var f=He(this,n),c=f.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),f.on=t}),i===0&&a()})}var Zw=0;function Ye(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function zv(){return++Zw}var Ue=nr.prototype;Ye.prototype={constructor:Ye,select:Tw,selectAll:Mw,selectChild:Ue.selectChild,selectChildren:Ue.selectChildren,filter:Sw,merge:qw,selection:Ow,transition:Ww,call:Ue.call,nodes:Ue.nodes,node:Ue.node,size:Ue.size,empty:Ue.empty,each:Ue.each,on:Nw,attr:uw,attrTween:hw,style:Fw,styleTween:Bw,text:Uw,textTween:Yw,remove:Iw,tween:tw,delay:vw,duration:_w,ease:ww,easeVarying:Ew,end:Xw,[Symbol.iterator]:Ue[Symbol.iterator]};function Jw(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Qw={time:null,delay:0,duration:250,ease:Jw};function e1(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function t1(e){var t,r;e instanceof Ye?(t=e._id,e=e._name):(t=zv(),(r=Qw).time=fc(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var o=n[a],s=o.length,u,f=0;f<s;++f)(u=o[f])&&$r(u,e,t,f,o,r||e1(u,t));return new Ye(n,this._parents,e,t)}nr.prototype.interrupt=Jb;nr.prototype.transition=t1;const vr=e=>()=>e;function r1(e,{sourceEvent:t,target:r,transform:n,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:i}})}function je(e,t,r){this.k=e,this.x=t,this.y=r}je.prototype={constructor:je,scale:function(e){return e===1?this:new je(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new je(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ke=new je(1,0,0);je.prototype;function _n(e){e.stopImmediatePropagation()}function Ft(e){e.preventDefault(),e.stopImmediatePropagation()}function n1(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function i1(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function mf(){return this.__zoom||Ke}function a1(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function o1(){return navigator.maxTouchPoints||"ontouchstart"in this}function s1(e,t,r){var n=e.invertX(t[0][0])-r[0][0],i=e.invertX(t[1][0])-r[1][0],a=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Hv(){var e=n1,t=i1,r=s1,n=a1,i=o1,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Vb,f=Pr("start","zoom","end"),c,l,d,h=500,_=150,p=0,g=10;function v(w){w.property("__zoom",mf).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",A).filter(i).on("touchstart.zoom",I).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(w,T,C,F){var H=w.selection?w.selection():w;H.property("__zoom",mf),w!==H?E(w,T,C,F):H.interrupt().each(function(){x(this,arguments).event(F).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},v.scaleBy=function(w,T,C,F){v.scaleTo(w,function(){var H=this.__zoom.k,M=typeof T=="function"?T.apply(this,arguments):T;return H*M},C,F)},v.scaleTo=function(w,T,C,F){v.transform(w,function(){var H=t.apply(this,arguments),M=this.__zoom,z=C==null?m(H):typeof C=="function"?C.apply(this,arguments):C,G=M.invert(z),V=typeof T=="function"?T.apply(this,arguments):T;return r(b(y(M,V),z,G),H,o)},C,F)},v.translateBy=function(w,T,C,F){v.transform(w,function(){return r(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),o)},null,F)},v.translateTo=function(w,T,C,F,H){v.transform(w,function(){var M=t.apply(this,arguments),z=this.__zoom,G=F==null?m(M):typeof F=="function"?F.apply(this,arguments):F;return r(Ke.translate(G[0],G[1]).scale(z.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof C=="function"?-C.apply(this,arguments):-C),M,o)},F,H)};function y(w,T){return T=Math.max(a[0],Math.min(a[1],T)),T===w.k?w:new je(T,w.x,w.y)}function b(w,T,C){var F=T[0]-C[0]*w.k,H=T[1]-C[1]*w.k;return F===w.x&&H===w.y?w:new je(w.k,F,H)}function m(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function E(w,T,C,F){w.on("start.zoom",function(){x(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(F).end()}).tween("zoom",function(){var H=this,M=arguments,z=x(H,M).event(F),G=t.apply(H,M),V=C==null?m(G):typeof C=="function"?C.apply(H,M):C,U=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),R=H.__zoom,k=typeof T=="function"?T.apply(H,M):T,$=u(R.invert(V).concat(U/R.k),k.invert(V).concat(U/k.k));return function(B){if(B===1)B=k;else{var j=$(B),W=U/j[2];B=new je(W,V[0]-j[0]*W,V[1]-j[1]*W)}z.zoom(null,B)}})}function x(w,T,C){return!C&&w.__zooming||new S(w,T)}function S(w,T){this.that=w,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,T),this.taps=0}S.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,T){return this.mouse&&w!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var T=qe(this.that).datum();f.call(w,this.that,new r1(w,{sourceEvent:this.sourceEvent,target:v,type:w,transform:this.that.__zoom,dispatch:f}),T)}};function N(w,...T){if(!e.apply(this,arguments))return;var C=x(this,T).event(w),F=this.__zoom,H=Math.max(a[0],Math.min(a[1],F.k*Math.pow(2,n.apply(this,arguments)))),M=Te(w);if(C.wheel)(C.mouse[0][0]!==M[0]||C.mouse[0][1]!==M[1])&&(C.mouse[1]=F.invert(C.mouse[0]=M)),clearTimeout(C.wheel);else{if(F.k===H)return;C.mouse=[M,F.invert(M)],Sr(this),C.start()}Ft(w),C.wheel=setTimeout(z,_),C.zoom("mouse",r(b(y(F,H),C.mouse[0],C.mouse[1]),C.extent,o));function z(){C.wheel=null,C.end()}}function q(w,...T){if(d||!e.apply(this,arguments))return;var C=w.currentTarget,F=x(this,T,!0).event(w),H=qe(w.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",U,!0),M=Te(w,C),z=w.clientX,G=w.clientY;Rv(w.view),_n(w),F.mouse=[M,this.__zoom.invert(M)],Sr(this),F.start();function V(R){if(Ft(R),!F.moved){var k=R.clientX-z,$=R.clientY-G;F.moved=k*k+$*$>p}F.event(R).zoom("mouse",r(b(F.that.__zoom,F.mouse[0]=Te(R,C),F.mouse[1]),F.extent,o))}function U(R){H.on("mousemove.zoom mouseup.zoom",null),Cv(R.view,F.moved),Ft(R),F.event(R).end()}}function A(w,...T){if(e.apply(this,arguments)){var C=this.__zoom,F=Te(w.changedTouches?w.changedTouches[0]:w,this),H=C.invert(F),M=C.k*(w.shiftKey?.5:2),z=r(b(y(C,M),F,H),t.apply(this,T),o);Ft(w),s>0?qe(this).transition().duration(s).call(E,z,F,w):qe(this).call(v.transform,z,F,w)}}function I(w,...T){if(e.apply(this,arguments)){var C=w.touches,F=C.length,H=x(this,T,w.changedTouches.length===F).event(w),M,z,G,V;for(_n(w),z=0;z<F;++z)G=C[z],V=Te(G,this),V=[V,this.__zoom.invert(V),G.identifier],H.touch0?!H.touch1&&H.touch0[2]!==V[2]&&(H.touch1=V,H.taps=0):(H.touch0=V,M=!0,H.taps=1+!!c);c&&(c=clearTimeout(c)),M&&(H.taps<2&&(l=V[0],c=setTimeout(function(){c=null},h)),Sr(this),H.start())}}function D(w,...T){if(this.__zooming){var C=x(this,T).event(w),F=w.changedTouches,H=F.length,M,z,G,V;for(Ft(w),M=0;M<H;++M)z=F[M],G=Te(z,this),C.touch0&&C.touch0[2]===z.identifier?C.touch0[0]=G:C.touch1&&C.touch1[2]===z.identifier&&(C.touch1[0]=G);if(z=C.that.__zoom,C.touch1){var U=C.touch0[0],R=C.touch0[1],k=C.touch1[0],$=C.touch1[1],B=(B=k[0]-U[0])*B+(B=k[1]-U[1])*B,j=(j=$[0]-R[0])*j+(j=$[1]-R[1])*j;z=y(z,Math.sqrt(B/j)),G=[(U[0]+k[0])/2,(U[1]+k[1])/2],V=[(R[0]+$[0])/2,(R[1]+$[1])/2]}else if(C.touch0)G=C.touch0[0],V=C.touch0[1];else return;C.zoom("touch",r(b(z,G,V),C.extent,o))}}function P(w,...T){if(this.__zooming){var C=x(this,T).event(w),F=w.changedTouches,H=F.length,M,z;for(_n(w),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),M=0;M<H;++M)z=F[M],C.touch0&&C.touch0[2]===z.identifier?delete C.touch0:C.touch1&&C.touch1[2]===z.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(z=Te(z,this),Math.hypot(l[0]-z[0],l[1]-z[1])<g)){var G=qe(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return v.wheelDelta=function(w){return arguments.length?(n=typeof w=="function"?w:vr(+w),v):n},v.filter=function(w){return arguments.length?(e=typeof w=="function"?w:vr(!!w),v):e},v.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:vr(!!w),v):i},v.extent=function(w){return arguments.length?(t=typeof w=="function"?w:vr([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),v):t},v.scaleExtent=function(w){return arguments.length?(a[0]=+w[0],a[1]=+w[1],v):[a[0],a[1]]},v.translateExtent=function(w){return arguments.length?(o[0][0]=+w[0][0],o[1][0]=+w[1][0],o[0][1]=+w[0][1],o[1][1]=+w[1][1],v):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},v.constrain=function(w){return arguments.length?(r=w,v):r},v.duration=function(w){return arguments.length?(s=+w,v):s},v.interpolate=function(w){return arguments.length?(u=w,v):u},v.on=function(){var w=f.on.apply(f,arguments);return w===f?v:w},v.clickDistance=function(w){return arguments.length?(p=(w=+w)*w,v):Math.sqrt(p)},v.tapDistance=function(w){return arguments.length?(g=+w,v):g},v}y0();const Fr=O.createContext(null),u1=Fr.Provider,We={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Bv=We.error001();function ne(e,t){const r=O.useContext(Fr);if(r===null)throw new Error(Bv);return hv(r,e,t)}const le=()=>{const e=O.useContext(Fr);if(e===null)throw new Error(Bv);return O.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},c1=e=>e.userSelectionActive?"none":"all";function hc({position:e,children:t,className:r,style:n,...i}){const a=ne(c1),o=`${e}`.split("-");return L.createElement("div",{className:he(["react-flow__panel",r,...o]),style:{...n,pointerEvents:a},...i},t)}function f1({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:L.createElement(hc,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},L.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const l1=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:o=[2,4],labelBgBorderRadius:s=2,children:u,className:f,...c})=>{const l=O.useRef(null),[d,h]=O.useState({x:0,y:0,width:0,height:0}),_=he(["react-flow__edge-textwrapper",f]);return O.useEffect(()=>{if(l.current){const p=l.current.getBBox();h({x:p.x,y:p.y,width:p.width,height:p.height})}},[r]),typeof r>"u"||!r?null:L.createElement("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:_,visibility:d.width?"visible":"hidden",...c},i&&L.createElement("rect",{width:d.width+2*o[0],x:-o[0],y:-o[1],height:d.height+2*o[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),L.createElement("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:l,style:n},r),u)};var d1=O.memo(l1);const pc=e=>({width:e.offsetWidth,height:e.offsetHeight}),At=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),gc=(e={x:0,y:0},t)=>({x:At(e.x,t[0][0],t[1][0]),y:At(e.y,t[0][1],t[1][1])}),_f=(e,t,r)=>e<t?At(Math.abs(e-t),1,50)/50:e>r?-At(Math.abs(e-r),1,50)/50:0,Gv=(e,t)=>{const r=_f(e.x,35,t.width-35)*20,n=_f(e.y,35,t.height-35)*20;return[r,n]},Vv=e=>e.getRootNode?.()||window?.document,Uv=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),er=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),jv=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),bf=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),h1=(e,t)=>jv(Uv(er(e),er(t))),Qu=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},p1=e=>Re(e.width)&&Re(e.height)&&Re(e.x)&&Re(e.y),Re=e=>!isNaN(e)&&isFinite(e),se=Symbol.for("internals"),Kv=["Enter"," ","Escape"],g1=(e,t)=>{},v1=e=>"nativeEvent"in e;function ec(e){const r=(v1(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r?.nodeName)||r?.hasAttribute("contenteditable")||!!r?.closest(".nokey")}const Yv=e=>"clientX"in e,nt=(e,t)=>{const r=Yv(e),n=r?e.clientX:e.touches?.[0].clientX,i=r?e.clientY:e.touches?.[0].clientY;return{x:n-(t?.left??0),y:i-(t?.top??0)}},Tr=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,ar=({id:e,path:t,labelX:r,labelY:n,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,style:c,markerEnd:l,markerStart:d,interactionWidth:h=20})=>L.createElement(L.Fragment,null,L.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:l,markerStart:d}),h&&L.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),i&&Re(r)&&Re(n)?L.createElement(d1,{x:r,y:n,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f}):null);ar.displayName="BaseEdge";function zt(e,t,r){return r===void 0?r:n=>{const i=t().edges.find(a=>a.id===e);i&&r(n,{...i})}}function Wv({sourceX:e,sourceY:t,targetX:r,targetY:n}){const i=Math.abs(r-e)/2,a=r<e?r+i:r-i,o=Math.abs(n-t)/2,s=n<t?n+o:n-o;return[a,s,i,o]}function Xv({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:i,sourceControlY:a,targetControlX:o,targetControlY:s}){const u=e*.125+i*.375+o*.375+r*.125,f=t*.125+a*.375+s*.375+n*.125,c=Math.abs(u-e),l=Math.abs(f-t);return[u,f,c,l]}var ht;(function(e){e.Strict="strict",e.Loose="loose"})(ht||(ht={}));var ct;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ct||(ct={}));var tr;(function(e){e.Partial="partial",e.Full="full"})(tr||(tr={}));var rt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(rt||(rt={}));var Mr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Mr||(Mr={}));var X;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(X||(X={}));function wf({pos:e,x1:t,y1:r,x2:n,y2:i}){return e===X.Left||e===X.Right?[.5*(t+n),r]:[t,.5*(r+i)]}function Zv({sourceX:e,sourceY:t,sourcePosition:r=X.Bottom,targetX:n,targetY:i,targetPosition:a=X.Top}){const[o,s]=wf({pos:r,x1:e,y1:t,x2:n,y2:i}),[u,f]=wf({pos:a,x1:n,y1:i,x2:e,y2:t}),[c,l,d,h]=Xv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:u,targetControlY:f});return[`M${e},${t} C${o},${s} ${u},${f} ${n},${i}`,c,l,d,h]}const vc=O.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:i=X.Bottom,targetPosition:a=X.Top,label:o,labelStyle:s,labelShowBg:u,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:l,style:d,markerEnd:h,markerStart:_,interactionWidth:p})=>{const[g,v,y]=Zv({sourceX:e,sourceY:t,sourcePosition:i,targetX:r,targetY:n,targetPosition:a});return L.createElement(ar,{path:g,labelX:v,labelY:y,label:o,labelStyle:s,labelShowBg:u,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:l,style:d,markerEnd:h,markerStart:_,interactionWidth:p})});vc.displayName="SimpleBezierEdge";const xf={[X.Left]:{x:-1,y:0},[X.Right]:{x:1,y:0},[X.Top]:{x:0,y:-1},[X.Bottom]:{x:0,y:1}},y1=({source:e,sourcePosition:t=X.Bottom,target:r})=>t===X.Left||t===X.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Ef=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function m1({source:e,sourcePosition:t=X.Bottom,target:r,targetPosition:n=X.Top,center:i,offset:a}){const o=xf[t],s=xf[n],u={x:e.x+o.x*a,y:e.y+o.y*a},f={x:r.x+s.x*a,y:r.y+s.y*a},c=y1({source:u,sourcePosition:t,target:f}),l=c.x!==0?"x":"y",d=c[l];let h=[],_,p;const g={x:0,y:0},v={x:0,y:0},[y,b,m,E]=Wv({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[l]*s[l]===-1){_=i.x??y,p=i.y??b;const S=[{x:_,y:u.y},{x:_,y:f.y}],N=[{x:u.x,y:p},{x:f.x,y:p}];o[l]===d?h=l==="x"?S:N:h=l==="x"?N:S}else{const S=[{x:u.x,y:f.y}],N=[{x:f.x,y:u.y}];if(l==="x"?h=o.x===d?N:S:h=o.y===d?S:N,t===n){const P=Math.abs(e[l]-r[l]);if(P<=a){const w=Math.min(a-1,a-P);o[l]===d?g[l]=(u[l]>e[l]?-1:1)*w:v[l]=(f[l]>r[l]?-1:1)*w}}if(t!==n){const P=l==="x"?"y":"x",w=o[l]===s[P],T=u[P]>f[P],C=u[P]<f[P];(o[l]===1&&(!w&&T||w&&C)||o[l]!==1&&(!w&&C||w&&T))&&(h=l==="x"?S:N)}const q={x:u.x+g.x,y:u.y+g.y},A={x:f.x+v.x,y:f.y+v.y},I=Math.max(Math.abs(q.x-h[0].x),Math.abs(A.x-h[0].x)),D=Math.max(Math.abs(q.y-h[0].y),Math.abs(A.y-h[0].y));I>=D?(_=(q.x+A.x)/2,p=h[0].y):(_=h[0].x,p=(q.y+A.y)/2)}return[[e,{x:u.x+g.x,y:u.y+g.y},...h,{x:f.x+v.x,y:f.y+v.y},r],_,p,m,E]}function _1(e,t,r,n){const i=Math.min(Ef(e,t)/2,Ef(t,r)/2,n),{x:a,y:o}=t;if(e.x===a&&a===r.x||e.y===o&&o===r.y)return`L${a} ${o}`;if(e.y===o){const f=e.x<r.x?-1:1,c=e.y<r.y?1:-1;return`L ${a+i*f},${o}Q ${a},${o} ${a},${o+i*c}`}const s=e.x<r.x?1:-1,u=e.y<r.y?-1:1;return`L ${a},${o+i*u}Q ${a},${o} ${a+i*s},${o}`}function tc({sourceX:e,sourceY:t,sourcePosition:r=X.Bottom,targetX:n,targetY:i,targetPosition:a=X.Top,borderRadius:o=5,centerX:s,centerY:u,offset:f=20}){const[c,l,d,h,_]=m1({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:i},targetPosition:a,center:{x:s,y:u},offset:f});return[c.reduce((g,v,y)=>{let b="";return y>0&&y<c.length-1?b=_1(c[y-1],v,c[y+1],o):b=`${y===0?"M":"L"}${v.x} ${v.y}`,g+=b,g},""),l,d,h,_]}const zr=O.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,style:c,sourcePosition:l=X.Bottom,targetPosition:d=X.Top,markerEnd:h,markerStart:_,pathOptions:p,interactionWidth:g})=>{const[v,y,b]=tc({sourceX:e,sourceY:t,sourcePosition:l,targetX:r,targetY:n,targetPosition:d,borderRadius:p?.borderRadius,offset:p?.offset});return L.createElement(ar,{path:v,labelX:y,labelY:b,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,style:c,markerEnd:h,markerStart:_,interactionWidth:g})});zr.displayName="SmoothStepEdge";const yc=O.memo(e=>L.createElement(zr,{...e,pathOptions:O.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));yc.displayName="StepEdge";function b1({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[i,a,o,s]=Wv({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,i,a,o,s]}const mc=O.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,style:c,markerEnd:l,markerStart:d,interactionWidth:h})=>{const[_,p,g]=b1({sourceX:e,sourceY:t,targetX:r,targetY:n});return L.createElement(ar,{path:_,labelX:p,labelY:g,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,style:c,markerEnd:l,markerStart:d,interactionWidth:h})});mc.displayName="StraightEdge";function yr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Sf({pos:e,x1:t,y1:r,x2:n,y2:i,c:a}){switch(e){case X.Left:return[t-yr(t-n,a),r];case X.Right:return[t+yr(n-t,a),r];case X.Top:return[t,r-yr(r-i,a)];case X.Bottom:return[t,r+yr(i-r,a)]}}function Jv({sourceX:e,sourceY:t,sourcePosition:r=X.Bottom,targetX:n,targetY:i,targetPosition:a=X.Top,curvature:o=.25}){const[s,u]=Sf({pos:r,x1:e,y1:t,x2:n,y2:i,c:o}),[f,c]=Sf({pos:a,x1:n,y1:i,x2:e,y2:t,c:o}),[l,d,h,_]=Xv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:f,targetControlY:c});return[`M${e},${t} C${s},${u} ${f},${c} ${n},${i}`,l,d,h,_]}const kr=O.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:i=X.Bottom,targetPosition:a=X.Top,label:o,labelStyle:s,labelShowBg:u,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:l,style:d,markerEnd:h,markerStart:_,pathOptions:p,interactionWidth:g})=>{const[v,y,b]=Jv({sourceX:e,sourceY:t,sourcePosition:i,targetX:r,targetY:n,targetPosition:a,curvature:p?.curvature});return L.createElement(ar,{path:v,labelX:y,labelY:b,label:o,labelStyle:s,labelShowBg:u,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:l,style:d,markerEnd:h,markerStart:_,interactionWidth:g})});kr.displayName="BezierEdge";const _c=O.createContext(null),w1=_c.Provider;_c.Consumer;const x1=()=>O.useContext(_c),E1=e=>"id"in e&&"source"in e&&"target"in e,S1=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,rc=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,q1=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),R1=(e,t)=>{if(!e.source||!e.target)return t;let r;return E1(e)?r={...e}:r={...e,id:S1(e)},q1(r,t)?t:t.concat(r)},nc=({x:e,y:t},[r,n,i],a,[o,s])=>{const u={x:(e-r)/i,y:(t-n)/i};return a?{x:o*Math.round(u.x/o),y:s*Math.round(u.y/s)}:u},Qv=({x:e,y:t},[r,n,i])=>({x:e*i+r,y:t*i+n}),lt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],i={x:e.position.x-r,y:e.position.y-n};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:i}},Hr=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,i)=>{const{x:a,y:o}=lt(i,t).positionAbsolute;return Uv(n,er({x:a,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return jv(r)},ey=(e,t,[r,n,i]=[0,0,1],a=!1,o=!1,s=[0,0])=>{const u={x:(t.x-r)/i,y:(t.y-n)/i,width:t.width/i,height:t.height/i},f=[];return e.forEach(c=>{const{width:l,height:d,selectable:h=!0,hidden:_=!1}=c;if(o&&!h||_)return!1;const{positionAbsolute:p}=lt(c,s),g={x:p.x,y:p.y,width:l||0,height:d||0},v=Qu(u,g),y=typeof l>"u"||typeof d>"u"||l===null||d===null,b=a&&v>0,m=(l||0)*(d||0);(y||b||v>=m||c.dragging)&&f.push(c)}),f},ty=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},ry=(e,t,r,n,i,a=.1)=>{const o=t/(e.width*(1+a)),s=r/(e.height*(1+a)),u=Math.min(o,s),f=At(u,n,i),c=e.x+e.width/2,l=e.y+e.height/2,d=t/2-c*f,h=r/2-l*f;return{x:d,y:h,zoom:f}},st=(e,t=0)=>e.transition().duration(t);function qf(e,t,r,n){return(t[r]||[]).reduce((i,a)=>(`${e.id}-${a.id}-${r}`!==n&&i.push({id:a.id||null,type:r,nodeId:e.id,x:(e.positionAbsolute?.x??0)+a.x+a.width/2,y:(e.positionAbsolute?.y??0)+a.y+a.height/2}),i),[])}function C1(e,t,r,n,i,a){const{x:o,y:s}=nt(e),f=t.elementsFromPoint(o,s).find(_=>_.classList.contains("react-flow__handle"));if(f){const _=f.getAttribute("data-nodeid");if(_){const p=bc(void 0,f),g=f.getAttribute("data-handleid"),v=a({nodeId:_,id:g,type:p});if(v){const y=i.find(b=>b.nodeId===_&&b.type===p&&b.id===g);return{handle:{id:g,type:p,nodeId:_,x:y?.x||r.x,y:y?.y||r.y},validHandleResult:v}}}}let c=[],l=1/0;if(i.forEach(_=>{const p=Math.sqrt((_.x-r.x)**2+(_.y-r.y)**2);if(p<=n){const g=a(_);p<=l&&(p<l?c=[{handle:_,validHandleResult:g}]:p===l&&c.push({handle:_,validHandleResult:g}),l=p)}}),!c.length)return{handle:null,validHandleResult:ny()};if(c.length===1)return c[0];const d=c.some(({validHandleResult:_})=>_.isValid),h=c.some(({handle:_})=>_.type==="target");return c.find(({handle:_,validHandleResult:p})=>h?_.type==="target":d?p.isValid:!0)||c[0]}const N1={source:null,target:null,sourceHandle:null,targetHandle:null},ny=()=>({handleDomNode:null,isValid:!1,connection:N1,endHandle:null});function iy(e,t,r,n,i,a,o){const s=i==="target",u=o.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),f={...ny(),handleDomNode:u};if(u){const c=bc(void 0,u),l=u.getAttribute("data-nodeid"),d=u.getAttribute("data-handleid"),h=u.classList.contains("connectable"),_=u.classList.contains("connectableend"),p={source:s?l:r,sourceHandle:s?d:n,target:s?r:l,targetHandle:s?n:d};f.connection=p,h&&_&&(t===ht.Strict?s&&c==="source"||!s&&c==="target":l!==r||d!==n)&&(f.endHandle={nodeId:l,handleId:d,type:c},f.isValid=a(p))}return f}function A1({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((i,a)=>{if(a[se]){const{handleBounds:o}=a[se];let s=[],u=[];o&&(s=qf(a,o,"source",`${t}-${r}-${n}`),u=qf(a,o,"target",`${t}-${r}-${n}`)),i.push(...s,...u)}return i},[])}function bc(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function bn(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function I1(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function ay({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:i,getState:a,setState:o,isValidConnection:s,edgeUpdaterType:u,onReconnectEnd:f}){const c=Vv(e.target),{connectionMode:l,domNode:d,autoPanOnConnect:h,connectionRadius:_,onConnectStart:p,panBy:g,getNodes:v,cancelConnection:y}=a();let b=0,m;const{x:E,y:x}=nt(e),S=c?.elementFromPoint(E,x),N=bc(u,S),q=d?.getBoundingClientRect();if(!q||!N)return;let A,I=nt(e,q),D=!1,P=null,w=!1,T=null;const C=A1({nodes:v(),nodeId:r,handleId:t,handleType:N}),F=()=>{if(!h)return;const[z,G]=Gv(I,q);g({x:z,y:G}),b=requestAnimationFrame(F)};o({connectionPosition:I,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:N,connectionStartHandle:{nodeId:r,handleId:t,type:N},connectionEndHandle:null}),p?.(e,{nodeId:r,handleId:t,handleType:N});function H(z){const{transform:G}=a();I=nt(z,q);const{handle:V,validHandleResult:U}=C1(z,c,nc(I,G,!1,[1,1]),_,C,R=>iy(R,l,r,t,i?"target":"source",s,c));if(m=V,D||(F(),D=!0),T=U.handleDomNode,P=U.connection,w=U.isValid,o({connectionPosition:m&&w?Qv({x:m.x,y:m.y},G):I,connectionStatus:I1(!!m,w),connectionEndHandle:U.endHandle}),!m&&!w&&!T)return bn(A);P.source!==P.target&&T&&(bn(A),A=T,T.classList.add("connecting","react-flow__handle-connecting"),T.classList.toggle("valid",w),T.classList.toggle("react-flow__handle-valid",w))}function M(z){(m||T)&&P&&w&&n?.(P),a().onConnectEnd?.(z),u&&f?.(z),bn(A),y(),cancelAnimationFrame(b),D=!1,w=!1,P=null,T=null,c.removeEventListener("mousemove",H),c.removeEventListener("mouseup",M),c.removeEventListener("touchmove",H),c.removeEventListener("touchend",M)}c.addEventListener("mousemove",H),c.addEventListener("mouseup",M),c.addEventListener("touchmove",H),c.addEventListener("touchend",M)}const Rf=()=>!0,T1=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),M1=(e,t,r)=>n=>{const{connectionStartHandle:i,connectionEndHandle:a,connectionClickStartHandle:o}=n;return{connecting:i?.nodeId===e&&i?.handleId===t&&i?.type===r||a?.nodeId===e&&a?.handleId===t&&a?.type===r,clickConnecting:o?.nodeId===e&&o?.handleId===t&&o?.type===r}},oy=O.forwardRef(({type:e="source",position:t=X.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:o,onConnect:s,children:u,className:f,onMouseDown:c,onTouchStart:l,...d},h)=>{const _=o||null,p=e==="target",g=le(),v=x1(),{connectOnClick:y,noPanClassName:b}=ne(T1,be),{connecting:m,clickConnecting:E}=ne(M1(v,_,e),be);v||g.getState().onError?.("010",We.error010());const x=q=>{const{defaultEdgeOptions:A,onConnect:I,hasDefaultEdges:D}=g.getState(),P={...A,...q};if(D){const{edges:w,setEdges:T}=g.getState();T(R1(P,w))}I?.(P),s?.(P)},S=q=>{if(!v)return;const A=Yv(q);i&&(A&&q.button===0||!A)&&ay({event:q,handleId:_,nodeId:v,onConnect:x,isTarget:p,getState:g.getState,setState:g.setState,isValidConnection:r||g.getState().isValidConnection||Rf}),A?c?.(q):l?.(q)},N=q=>{const{onClickConnectStart:A,onClickConnectEnd:I,connectionClickStartHandle:D,connectionMode:P,isValidConnection:w}=g.getState();if(!v||!D&&!i)return;if(!D){A?.(q,{nodeId:v,handleId:_,handleType:e}),g.setState({connectionClickStartHandle:{nodeId:v,type:e,handleId:_}});return}const T=Vv(q.target),C=r||w||Rf,{connection:F,isValid:H}=iy({nodeId:v,id:_,type:e},P,D.nodeId,D.handleId||null,D.type,C,T);H&&x(F),I?.(q),g.setState({connectionClickStartHandle:null})};return L.createElement("div",{"data-handleid":_,"data-nodeid":v,"data-handlepos":t,"data-id":`${v}-${_}-${e}`,className:he(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,f,{source:!p,target:p,connectable:n,connectablestart:i,connectableend:a,connecting:E,connectionindicator:n&&(i&&!m||a&&m)}]),onMouseDown:S,onTouchStart:S,onClick:y?N:void 0,ref:h,...d},u)});oy.displayName="Handle";var It=O.memo(oy);const sy=({data:e,isConnectable:t,targetPosition:r=X.Top,sourcePosition:n=X.Bottom})=>L.createElement(L.Fragment,null,L.createElement(It,{type:"target",position:r,isConnectable:t}),e?.label,L.createElement(It,{type:"source",position:n,isConnectable:t}));sy.displayName="DefaultNode";var ic=O.memo(sy);const uy=({data:e,isConnectable:t,sourcePosition:r=X.Bottom})=>L.createElement(L.Fragment,null,e?.label,L.createElement(It,{type:"source",position:r,isConnectable:t}));uy.displayName="InputNode";var cy=O.memo(uy);const fy=({data:e,isConnectable:t,targetPosition:r=X.Top})=>L.createElement(L.Fragment,null,L.createElement(It,{type:"target",position:r,isConnectable:t}),e?.label);fy.displayName="OutputNode";var ly=O.memo(fy);const wc=()=>null;wc.displayName="GroupNode";const k1=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),mr=e=>e.id;function O1(e,t){return be(e.selectedNodes.map(mr),t.selectedNodes.map(mr))&&be(e.selectedEdges.map(mr),t.selectedEdges.map(mr))}const dy=O.memo(({onSelectionChange:e})=>{const t=le(),{selectedNodes:r,selectedEdges:n}=ne(k1,O1);return O.useEffect(()=>{const i={nodes:r,edges:n};e?.(i),t.getState().onSelectionChange.forEach(a=>a(i))},[r,n,e]),null});dy.displayName="SelectionListener";const P1=e=>!!e.onSelectionChange;function D1({onSelectionChange:e}){const t=ne(P1);return e||t?L.createElement(dy,{onSelectionChange:e}):null}const L1=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function _t(e,t){O.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Q(e,t,r){O.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const $1=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:i,onConnectStart:a,onConnectEnd:o,onClickConnectStart:s,onClickConnectEnd:u,nodesDraggable:f,nodesConnectable:c,nodesFocusable:l,edgesFocusable:d,edgesUpdatable:h,elevateNodesOnSelect:_,minZoom:p,maxZoom:g,nodeExtent:v,onNodesChange:y,onEdgesChange:b,elementsSelectable:m,connectionMode:E,snapGrid:x,snapToGrid:S,translateExtent:N,connectOnClick:q,defaultEdgeOptions:A,fitView:I,fitViewOptions:D,onNodesDelete:P,onEdgesDelete:w,onNodeDrag:T,onNodeDragStart:C,onNodeDragStop:F,onSelectionDrag:H,onSelectionDragStart:M,onSelectionDragStop:z,noPanClassName:G,nodeOrigin:V,rfId:U,autoPanOnConnect:R,autoPanOnNodeDrag:k,onError:$,connectionRadius:B,isValidConnection:j,nodeDragThreshold:W})=>{const{setNodes:Z,setEdges:te,setDefaultNodesAndEdges:ie,setMinZoom:re,setMaxZoom:ee,setTranslateExtent:J,setNodeExtent:ue,reset:K}=ne(L1,be),Y=le();return O.useEffect(()=>{const oe=n?.map(Ae=>({...Ae,...A}));return ie(r,oe),()=>{K()}},[]),Q("defaultEdgeOptions",A,Y.setState),Q("connectionMode",E,Y.setState),Q("onConnect",i,Y.setState),Q("onConnectStart",a,Y.setState),Q("onConnectEnd",o,Y.setState),Q("onClickConnectStart",s,Y.setState),Q("onClickConnectEnd",u,Y.setState),Q("nodesDraggable",f,Y.setState),Q("nodesConnectable",c,Y.setState),Q("nodesFocusable",l,Y.setState),Q("edgesFocusable",d,Y.setState),Q("edgesUpdatable",h,Y.setState),Q("elementsSelectable",m,Y.setState),Q("elevateNodesOnSelect",_,Y.setState),Q("snapToGrid",S,Y.setState),Q("snapGrid",x,Y.setState),Q("onNodesChange",y,Y.setState),Q("onEdgesChange",b,Y.setState),Q("connectOnClick",q,Y.setState),Q("fitViewOnInit",I,Y.setState),Q("fitViewOnInitOptions",D,Y.setState),Q("onNodesDelete",P,Y.setState),Q("onEdgesDelete",w,Y.setState),Q("onNodeDrag",T,Y.setState),Q("onNodeDragStart",C,Y.setState),Q("onNodeDragStop",F,Y.setState),Q("onSelectionDrag",H,Y.setState),Q("onSelectionDragStart",M,Y.setState),Q("onSelectionDragStop",z,Y.setState),Q("noPanClassName",G,Y.setState),Q("nodeOrigin",V,Y.setState),Q("rfId",U,Y.setState),Q("autoPanOnConnect",R,Y.setState),Q("autoPanOnNodeDrag",k,Y.setState),Q("onError",$,Y.setState),Q("connectionRadius",B,Y.setState),Q("isValidConnection",j,Y.setState),Q("nodeDragThreshold",W,Y.setState),_t(e,Z),_t(t,te),_t(p,re),_t(g,ee),_t(N,J),_t(v,ue),null},Cf={display:"none"},F1={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},hy="react-flow__node-desc",py="react-flow__edge-desc",z1="react-flow__aria-live",H1=e=>e.ariaLiveMessage;function B1({rfId:e}){const t=ne(H1);return L.createElement("div",{id:`${z1}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:F1},t)}function G1({rfId:e,disableKeyboardA11y:t}){return L.createElement(L.Fragment,null,L.createElement("div",{id:`${hy}-${e}`,style:Cf},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),L.createElement("div",{id:`${py}-${e}`,style:Cf},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&L.createElement(B1,{rfId:e}))}var rr=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=O.useState(!1),i=O.useRef(!1),a=O.useRef(new Set([])),[o,s]=O.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(l=>typeof l=="string").map(l=>l.split("+")),c=f.reduce((l,d)=>l.concat(...d),[]);return[f,c]}return[[],[]]},[e]);return O.useEffect(()=>{const u=typeof document<"u"?document:null,f=t?.target||u;if(e!==null){const c=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&ec(h))return!1;const p=Af(h.code,s);a.current.add(h[p]),Nf(o,a.current,!1)&&(h.preventDefault(),n(!0))},l=h=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&ec(h))return!1;const p=Af(h.code,s);Nf(o,a.current,!0)?(n(!1),a.current.clear()):a.current.delete(h[p]),h.key==="Meta"&&a.current.clear(),i.current=!1},d=()=>{a.current.clear(),n(!1)};return f?.addEventListener("keydown",c),f?.addEventListener("keyup",l),window.addEventListener("blur",d),()=>{f?.removeEventListener("keydown",c),f?.removeEventListener("keyup",l),window.removeEventListener("blur",d)}}},[e,n]),r};function Nf(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(i=>t.has(i)))}function Af(e,t){return t.includes(e)?"code":"key"}function gy(e,t,r,n){const i=e.parentNode||e.parentId;if(!i)return r;const a=t.get(i),o=lt(a,n);return gy(a,t,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(a[se]?.z??0)>(r.z??0)?a[se]?.z??0:r.z??0},n)}function vy(e,t,r){e.forEach(n=>{const i=n.parentNode||n.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||r?.[n.id]){const{x:a,y:o,z:s}=gy(n,e,{...n.position,z:n[se]?.z??0},t);n.positionAbsolute={x:a,y:o},n[se].z=s,r?.[n.id]&&(n[se].isParent=!0)}})}function wn(e,t,r,n){const i=new Map,a={},o=n?1e3:0;return e.forEach(s=>{const u=(Re(s.zIndex)?s.zIndex:0)+(s.selected?o:0),f=t.get(s.id),c={...s,positionAbsolute:{x:s.position.x,y:s.position.y}},l=s.parentNode||s.parentId;l&&(a[l]=!0);const d=f?.type&&f?.type!==s.type;Object.defineProperty(c,se,{enumerable:!1,value:{handleBounds:d?void 0:f?.[se]?.handleBounds,z:u}}),i.set(s.id,c)}),vy(i,r,a),i}function yy(e,t={}){const{getNodes:r,width:n,height:i,minZoom:a,maxZoom:o,d3Zoom:s,d3Selection:u,fitViewOnInitDone:f,fitViewOnInit:c,nodeOrigin:l}=e(),d=t.initial&&!f&&c;if(s&&u&&(d||!t.initial)){const _=r().filter(g=>{const v=t.includeHiddenNodes?g.width&&g.height:!g.hidden;return t.nodes?.length?v&&t.nodes.some(y=>y.id===g.id):v}),p=_.every(g=>g.width&&g.height);if(_.length>0&&p){const g=Hr(_,l),{x:v,y,zoom:b}=ry(g,n,i,t.minZoom??a,t.maxZoom??o,t.padding??.1),m=Ke.translate(v,y).scale(b);return typeof t.duration=="number"&&t.duration>0?s.transform(st(u,t.duration),m):s.transform(u,m),!0}}return!1}function V1(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[se]:n[se],selected:r.selected})}),new Map(t)}function U1(e,t){return t.map(r=>{const n=e.find(i=>i.id===r.id);return n&&(r.selected=n.selected),r})}function _r({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:i,edges:a,onNodesChange:o,onEdgesChange:s,hasDefaultNodes:u,hasDefaultEdges:f}=r();e?.length&&(u&&n({nodeInternals:V1(e,i)}),o?.(e)),t?.length&&(f&&n({edges:U1(t,a)}),s?.(t))}const bt=()=>{},j1={zoomIn:bt,zoomOut:bt,zoomTo:bt,getZoom:()=>1,setViewport:bt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:bt,fitBounds:bt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},K1=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Y1=()=>{const e=le(),{d3Zoom:t,d3Selection:r}=ne(K1,be);return O.useMemo(()=>r&&t?{zoomIn:i=>t.scaleBy(st(r,i?.duration),1.2),zoomOut:i=>t.scaleBy(st(r,i?.duration),1/1.2),zoomTo:(i,a)=>t.scaleTo(st(r,a?.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,a)=>{const[o,s,u]=e.getState().transform,f=Ke.translate(i.x??o,i.y??s).scale(i.zoom??u);t.transform(st(r,a?.duration),f)},getViewport:()=>{const[i,a,o]=e.getState().transform;return{x:i,y:a,zoom:o}},fitView:i=>yy(e.getState,i),setCenter:(i,a,o)=>{const{width:s,height:u,maxZoom:f}=e.getState(),c=typeof o?.zoom<"u"?o.zoom:f,l=s/2-i*c,d=u/2-a*c,h=Ke.translate(l,d).scale(c);t.transform(st(r,o?.duration),h)},fitBounds:(i,a)=>{const{width:o,height:s,minZoom:u,maxZoom:f}=e.getState(),{x:c,y:l,zoom:d}=ry(i,o,s,u,f,a?.padding??.1),h=Ke.translate(c,l).scale(d);t.transform(st(r,a?.duration),h)},project:i=>{const{transform:a,snapToGrid:o,snapGrid:s}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),nc(i,a,o,s)},screenToFlowPosition:i=>{const{transform:a,snapToGrid:o,snapGrid:s,domNode:u}=e.getState();if(!u)return i;const{x:f,y:c}=u.getBoundingClientRect(),l={x:i.x-f,y:i.y-c};return nc(l,a,o,s)},flowToScreenPosition:i=>{const{transform:a,domNode:o}=e.getState();if(!o)return i;const{x:s,y:u}=o.getBoundingClientRect(),f=Qv(i,a);return{x:f.x+s,y:f.y+u}},viewportInitialized:!0}:j1,[t,r])};function Br(){const e=Y1(),t=le(),r=O.useCallback(()=>t.getState().getNodes().map(p=>({...p})),[]),n=O.useCallback(p=>t.getState().nodeInternals.get(p),[]),i=O.useCallback(()=>{const{edges:p=[]}=t.getState();return p.map(g=>({...g}))},[]),a=O.useCallback(p=>{const{edges:g=[]}=t.getState();return g.find(v=>v.id===p)},[]),o=O.useCallback(p=>{const{getNodes:g,setNodes:v,hasDefaultNodes:y,onNodesChange:b}=t.getState(),m=g(),E=typeof p=="function"?p(m):p;if(y)v(E);else if(b){const x=E.length===0?m.map(S=>({type:"remove",id:S.id})):E.map(S=>({item:S,type:"reset"}));b(x)}},[]),s=O.useCallback(p=>{const{edges:g=[],setEdges:v,hasDefaultEdges:y,onEdgesChange:b}=t.getState(),m=typeof p=="function"?p(g):p;if(y)v(m);else if(b){const E=m.length===0?g.map(x=>({type:"remove",id:x.id})):m.map(x=>({item:x,type:"reset"}));b(E)}},[]),u=O.useCallback(p=>{const g=Array.isArray(p)?p:[p],{getNodes:v,setNodes:y,hasDefaultNodes:b,onNodesChange:m}=t.getState();if(b){const x=[...v(),...g];y(x)}else if(m){const E=g.map(x=>({item:x,type:"add"}));m(E)}},[]),f=O.useCallback(p=>{const g=Array.isArray(p)?p:[p],{edges:v=[],setEdges:y,hasDefaultEdges:b,onEdgesChange:m}=t.getState();if(b)y([...v,...g]);else if(m){const E=g.map(x=>({item:x,type:"add"}));m(E)}},[]),c=O.useCallback(()=>{const{getNodes:p,edges:g=[],transform:v}=t.getState(),[y,b,m]=v;return{nodes:p().map(E=>({...E})),edges:g.map(E=>({...E})),viewport:{x:y,y:b,zoom:m}}},[]),l=O.useCallback(({nodes:p,edges:g})=>{const{nodeInternals:v,getNodes:y,edges:b,hasDefaultNodes:m,hasDefaultEdges:E,onNodesDelete:x,onEdgesDelete:S,onNodesChange:N,onEdgesChange:q}=t.getState(),A=(p||[]).map(T=>T.id),I=(g||[]).map(T=>T.id),D=y().reduce((T,C)=>{const F=C.parentNode||C.parentId,H=!A.includes(C.id)&&F&&T.find(z=>z.id===F);return(typeof C.deletable=="boolean"?C.deletable:!0)&&(A.includes(C.id)||H)&&T.push(C),T},[]),P=b.filter(T=>typeof T.deletable=="boolean"?T.deletable:!0),w=P.filter(T=>I.includes(T.id));if(D||w){const T=ty(D,P),C=[...w,...T],F=C.reduce((H,M)=>(H.includes(M.id)||H.push(M.id),H),[]);if((E||m)&&(E&&t.setState({edges:b.filter(H=>!F.includes(H.id))}),m&&(D.forEach(H=>{v.delete(H.id)}),t.setState({nodeInternals:new Map(v)}))),F.length>0&&(S?.(C),q&&q(F.map(H=>({id:H,type:"remove"})))),D.length>0&&(x?.(D),N)){const H=D.map(M=>({id:M.id,type:"remove"}));N(H)}}},[]),d=O.useCallback(p=>{const g=p1(p),v=g?null:t.getState().nodeInternals.get(p.id);return!g&&!v?[null,null,g]:[g?p:bf(v),v,g]},[]),h=O.useCallback((p,g=!0,v)=>{const[y,b,m]=d(p);return y?(v||t.getState().getNodes()).filter(E=>{if(!m&&(E.id===b.id||!E.positionAbsolute))return!1;const x=bf(E),S=Qu(x,y);return g&&S>0||S>=y.width*y.height}):[]},[]),_=O.useCallback((p,g,v=!0)=>{const[y]=d(p);if(!y)return!1;const b=Qu(y,g);return v&&b>0||b>=y.width*y.height},[]);return O.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:i,getEdge:a,setNodes:o,setEdges:s,addNodes:u,addEdges:f,toObject:c,deleteElements:l,getIntersectingNodes:h,isNodeIntersecting:_}),[e,r,n,i,a,o,s,u,f,c,l,h,_])}const W1={actInsideInputWithModifier:!1};var X1=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=le(),{deleteElements:n}=Br(),i=rr(e,W1),a=rr(t);O.useEffect(()=>{if(i){const{edges:o,getNodes:s}=r.getState(),u=s().filter(c=>c.selected),f=o.filter(c=>c.selected);n({nodes:u,edges:f}),r.setState({nodesSelectionActive:!1})}},[i]),O.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])};function Z1(e){const t=le();O.useEffect(()=>{let r;const n=()=>{if(!e.current)return;const i=pc(e.current);(i.height===0||i.width===0)&&t.getState().onError?.("004",We.error004()),t.setState({width:i.width||500,height:i.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const xc={position:"absolute",width:"100%",height:"100%",top:0,left:0},J1=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,br=e=>({x:e.x,y:e.y,zoom:e.k}),wt=(e,t)=>e.target.closest(`.${t}`),If=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Tf=e=>{const t=e.ctrlKey&&Tr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Q1=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),ex=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:i=!0,zoomOnPinch:a=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:u=ct.Free,zoomOnDoubleClick:f=!0,elementsSelectable:c,panOnDrag:l=!0,defaultViewport:d,translateExtent:h,minZoom:_,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:v=!0,children:y,noWheelClassName:b,noPanClassName:m})=>{const E=O.useRef(),x=le(),S=O.useRef(!1),N=O.useRef(!1),q=O.useRef(null),A=O.useRef({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:D,d3ZoomHandler:P,userSelectionActive:w}=ne(Q1,be),T=rr(g),C=O.useRef(0),F=O.useRef(!1),H=O.useRef();return Z1(q),O.useEffect(()=>{if(q.current){const M=q.current.getBoundingClientRect(),z=Hv().scaleExtent([_,p]).translateExtent(h),G=qe(q.current).call(z),V=Ke.translate(d.x,d.y).scale(At(d.zoom,_,p)),U=[[0,0],[M.width,M.height]],R=z.constrain()(V,U,h);z.transform(G,R),z.wheelDelta(Tf),x.setState({d3Zoom:z,d3Selection:G,d3ZoomHandler:G.on("wheel.zoom"),transform:[R.x,R.y,R.k],domNode:q.current.closest(".react-flow")})}},[]),O.useEffect(()=>{D&&I&&(o&&!T&&!w?D.on("wheel.zoom",M=>{if(wt(M,b))return!1;M.preventDefault(),M.stopImmediatePropagation();const z=D.property("__zoom").k||1;if(M.ctrlKey&&a){const j=Te(M),W=Tf(M),Z=z*Math.pow(2,W);I.scaleTo(D,Z,j,M);return}const G=M.deltaMode===1?20:1;let V=u===ct.Vertical?0:M.deltaX*G,U=u===ct.Horizontal?0:M.deltaY*G;!Tr()&&M.shiftKey&&u!==ct.Vertical&&(V=M.deltaY*G,U=0),I.translateBy(D,-(V/z)*s,-(U/z)*s,{internal:!0});const R=br(D.property("__zoom")),{onViewportChangeStart:k,onViewportChange:$,onViewportChangeEnd:B}=x.getState();clearTimeout(H.current),F.current||(F.current=!0,t?.(M,R),k?.(R)),F.current&&(e?.(M,R),$?.(R),H.current=setTimeout(()=>{r?.(M,R),B?.(R),F.current=!1},150))},{passive:!1}):typeof P<"u"&&D.on("wheel.zoom",function(M,z){if(!v&&M.type==="wheel"&&!M.ctrlKey||wt(M,b))return null;M.preventDefault(),P.call(this,M,z)},{passive:!1}))},[w,o,u,D,I,P,T,a,v,b,t,e,r]),O.useEffect(()=>{I&&I.on("start",M=>{if(!M.sourceEvent||M.sourceEvent.internal)return null;C.current=M.sourceEvent?.button;const{onViewportChangeStart:z}=x.getState(),G=br(M.transform);S.current=!0,A.current=G,M.sourceEvent?.type==="mousedown"&&x.setState({paneDragging:!0}),z?.(G),t?.(M.sourceEvent,G)})},[I,t]),O.useEffect(()=>{I&&(w&&!S.current?I.on("zoom",null):w||I.on("zoom",M=>{const{onViewportChange:z}=x.getState();if(x.setState({transform:[M.transform.x,M.transform.y,M.transform.k]}),N.current=!!(n&&If(l,C.current??0)),(e||z)&&!M.sourceEvent?.internal){const G=br(M.transform);z?.(G),e?.(M.sourceEvent,G)}}))},[w,I,e,l,n]),O.useEffect(()=>{I&&I.on("end",M=>{if(!M.sourceEvent||M.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=x.getState();if(S.current=!1,x.setState({paneDragging:!1}),n&&If(l,C.current??0)&&!N.current&&n(M.sourceEvent),N.current=!1,(r||z)&&J1(A.current,M.transform)){const G=br(M.transform);A.current=G,clearTimeout(E.current),E.current=setTimeout(()=>{z?.(G),r?.(M.sourceEvent,G)},o?150:0)}})},[I,o,l,r,n]),O.useEffect(()=>{I&&I.filter(M=>{const z=T||i,G=a&&M.ctrlKey;if((l===!0||Array.isArray(l)&&l.includes(1))&&M.button===1&&M.type==="mousedown"&&(wt(M,"react-flow__node")||wt(M,"react-flow__edge")))return!0;if(!l&&!z&&!o&&!f&&!a||w||!f&&M.type==="dblclick"||wt(M,b)&&M.type==="wheel"||wt(M,m)&&(M.type!=="wheel"||o&&M.type==="wheel"&&!T)||!a&&M.ctrlKey&&M.type==="wheel"||!z&&!o&&!G&&M.type==="wheel"||!l&&(M.type==="mousedown"||M.type==="touchstart")||Array.isArray(l)&&!l.includes(M.button)&&M.type==="mousedown")return!1;const V=Array.isArray(l)&&l.includes(M.button)||!M.button||M.button<=1;return(!M.ctrlKey||M.type==="wheel")&&V})},[w,I,i,a,o,f,l,c,T]),L.createElement("div",{className:"react-flow__renderer",ref:q,style:xc},y)},tx=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function rx(){const{userSelectionActive:e,userSelectionRect:t}=ne(tx,be);return e&&t?L.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Mf(e,t){const r=t.parentNode||t.parentId,n=e.find(i=>i.id===r);if(n){const i=t.position.x+t.width-n.width,a=t.position.y+t.height-n.height;if(i>0||a>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,i>0&&(n.style.width+=i),a>0&&(n.style.height+=a),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function my(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,i)=>{const a=e.filter(s=>s.id===i.id);if(a.length===0)return n.push(i),n;const o={...i};for(const s of a)if(s)switch(s.type){case"select":{o.selected=s.selected;break}case"position":{typeof s.position<"u"&&(o.position=s.position),typeof s.positionAbsolute<"u"&&(o.positionAbsolute=s.positionAbsolute),typeof s.dragging<"u"&&(o.dragging=s.dragging),o.expandParent&&Mf(n,o);break}case"dimensions":{typeof s.dimensions<"u"&&(o.width=s.dimensions.width,o.height=s.dimensions.height),typeof s.updateStyle<"u"&&(o.style={...o.style||{},...s.dimensions}),typeof s.resizing=="boolean"&&(o.resizing=s.resizing),o.expandParent&&Mf(n,o);break}case"remove":return n}return n.push(o),n},r)}function _y(e,t){return my(e,t)}function nx(e,t){return my(e,t)}const tt=(e,t)=>({id:e,type:"select",selected:t});function Et(e,t){return e.reduce((r,n)=>{const i=t.includes(n.id);return!n.selected&&i?(n.selected=!0,r.push(tt(n.id,!0))):n.selected&&!i&&(n.selected=!1,r.push(tt(n.id,!1))),r},[])}const xn=(e,t)=>r=>{r.target===t.current&&e?.(r)},ix=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),by=O.memo(({isSelecting:e,selectionMode:t=tr.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:i,onPaneClick:a,onPaneContextMenu:o,onPaneScroll:s,onPaneMouseEnter:u,onPaneMouseMove:f,onPaneMouseLeave:c,children:l})=>{const d=O.useRef(null),h=le(),_=O.useRef(0),p=O.useRef(0),g=O.useRef(),{userSelectionActive:v,elementsSelectable:y,dragging:b}=ne(ix,be),m=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),_.current=0,p.current=0},E=P=>{a?.(P),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},x=P=>{if(Array.isArray(r)&&r?.includes(2)){P.preventDefault();return}o?.(P)},S=s?P=>s(P):void 0,N=P=>{const{resetSelectedElements:w,domNode:T}=h.getState();if(g.current=T?.getBoundingClientRect(),!y||!e||P.button!==0||P.target!==d.current||!g.current)return;const{x:C,y:F}=nt(P,g.current);w(),h.setState({userSelectionRect:{width:0,height:0,startX:C,startY:F,x:C,y:F}}),n?.(P)},q=P=>{const{userSelectionRect:w,nodeInternals:T,edges:C,transform:F,onNodesChange:H,onEdgesChange:M,nodeOrigin:z,getNodes:G}=h.getState();if(!e||!g.current||!w)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const V=nt(P,g.current),U=w.startX??0,R=w.startY??0,k={...w,x:V.x<U?V.x:U,y:V.y<R?V.y:R,width:Math.abs(V.x-U),height:Math.abs(V.y-R)},$=G(),B=ey(T,k,F,t===tr.Partial,!0,z),j=ty(B,C).map(Z=>Z.id),W=B.map(Z=>Z.id);if(_.current!==W.length){_.current=W.length;const Z=Et($,W);Z.length&&H?.(Z)}if(p.current!==j.length){p.current=j.length;const Z=Et(C,j);Z.length&&M?.(Z)}h.setState({userSelectionRect:k})},A=P=>{if(P.button!==0)return;const{userSelectionRect:w}=h.getState();!v&&w&&P.target===d.current&&E?.(P),h.setState({nodesSelectionActive:_.current>0}),m(),i?.(P)},I=P=>{v&&(h.setState({nodesSelectionActive:_.current>0}),i?.(P)),m()},D=y&&(e||v);return L.createElement("div",{className:he(["react-flow__pane",{dragging:b,selection:e}]),onClick:D?void 0:xn(E,d),onContextMenu:xn(x,d),onWheel:xn(S,d),onMouseEnter:D?void 0:u,onMouseDown:D?N:void 0,onMouseMove:D?q:f,onMouseUp:D?A:void 0,onMouseLeave:D?I:c,ref:d,style:xc},l,L.createElement(rx,null))});by.displayName="Pane";function wy(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:wy(n,t):!1}function kf(e,t,r){let n=e;do{if(n?.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function ax(e,t,r,n){return Array.from(e.values()).filter(i=>(i.selected||i.id===n)&&(!i.parentNode||i.parentId||!wy(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>({id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:r.x-(i.positionAbsolute?.x??0),y:r.y-(i.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}))}function ox(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function xy(e,t,r,n,i=[0,0],a){const o=ox(e,e.extent||n);let s=o;const u=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(u&&e.width&&e.height){const l=r.get(u),{x:d,y:h}=lt(l,i).positionAbsolute;s=l&&Re(d)&&Re(h)&&Re(l.width)&&Re(l.height)?[[d+e.width*i[0],h+e.height*i[1]],[d+l.width-e.width+e.width*i[0],h+l.height-e.height+e.height*i[1]]]:s}else a?.("005",We.error005()),s=o;else if(e.extent&&u&&e.extent!=="parent"){const l=r.get(u),{x:d,y:h}=lt(l,i).positionAbsolute;s=[[e.extent[0][0]+d,e.extent[0][1]+h],[e.extent[1][0]+d,e.extent[1][1]+h]]}let f={x:0,y:0};if(u){const l=r.get(u);f=lt(l,i).positionAbsolute}const c=s&&s!=="parent"?gc(t,s):t;return{position:{x:c.x-f.x,y:c.y-f.y},positionAbsolute:c}}function En({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(i=>({...r.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?n.find(i=>i.id===e):n[0],n]}const Of=(e,t,r,n)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const a=Array.from(i),o=t.getBoundingClientRect(),s={x:o.width*n[0],y:o.height*n[1]};return a.map(u=>{const f=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(f.left-o.left-s.x)/r,y:(f.top-o.top-s.y)/r,...pc(u)}})};function Ht(e,t,r){return r===void 0?r:n=>{const i=t().nodeInternals.get(e);i&&r(n,{...i})}}function ac({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:o,nodeInternals:s,onError:u}=t.getState(),f=s.get(e);if(!f){u?.("012",We.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(r||f.selected&&o)&&(a({nodes:[f],edges:[]}),requestAnimationFrame(()=>n?.current?.blur())):i([e])}function sx(){const e=le();return O.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:i,snapToGrid:a}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,s=r.touches?r.touches[0].clientY:r.clientY,u={x:(o-n[0])/n[2],y:(s-n[1])/n[2]};return{xSnapped:a?i[0]*Math.round(u.x/i[0]):u.x,ySnapped:a?i[1]*Math.round(u.y/i[1]):u.y,...u}},[])}function Sn(e){return(t,r,n)=>e?.(t,n)}function Ey({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:i,isSelectable:a,selectNodesOnDrag:o}){const s=le(),[u,f]=O.useState(!1),c=O.useRef([]),l=O.useRef({x:null,y:null}),d=O.useRef(0),h=O.useRef(null),_=O.useRef({x:0,y:0}),p=O.useRef(null),g=O.useRef(!1),v=O.useRef(!1),y=O.useRef(!1),b=sx();return O.useEffect(()=>{if(e?.current){const m=qe(e.current),E=({x:N,y:q})=>{const{nodeInternals:A,onNodeDrag:I,onSelectionDrag:D,updateNodePositions:P,nodeExtent:w,snapGrid:T,snapToGrid:C,nodeOrigin:F,onError:H}=s.getState();l.current={x:N,y:q};let M=!1,z={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&w){const V=Hr(c.current,F);z=er(V)}if(c.current=c.current.map(V=>{const U={x:N-V.distance.x,y:q-V.distance.y};C&&(U.x=T[0]*Math.round(U.x/T[0]),U.y=T[1]*Math.round(U.y/T[1]));const R=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];c.current.length>1&&w&&!V.extent&&(R[0][0]=V.positionAbsolute.x-z.x+w[0][0],R[1][0]=V.positionAbsolute.x+(V.width??0)-z.x2+w[1][0],R[0][1]=V.positionAbsolute.y-z.y+w[0][1],R[1][1]=V.positionAbsolute.y+(V.height??0)-z.y2+w[1][1]);const k=xy(V,U,A,R,F,H);return M=M||V.position.x!==k.position.x||V.position.y!==k.position.y,V.position=k.position,V.positionAbsolute=k.positionAbsolute,V}),!M)return;P(c.current,!0,!0),f(!0);const G=i?I:Sn(D);if(G&&p.current){const[V,U]=En({nodeId:i,dragItems:c.current,nodeInternals:A});G(p.current,V,U)}},x=()=>{if(!h.current)return;const[N,q]=Gv(_.current,h.current);if(N!==0||q!==0){const{transform:A,panBy:I}=s.getState();l.current.x=(l.current.x??0)-N/A[2],l.current.y=(l.current.y??0)-q/A[2],I({x:N,y:q})&&E(l.current)}d.current=requestAnimationFrame(x)},S=N=>{const{nodeInternals:q,multiSelectionActive:A,nodesDraggable:I,unselectNodesAndEdges:D,onNodeDragStart:P,onSelectionDragStart:w}=s.getState();v.current=!0;const T=i?P:Sn(w);(!o||!a)&&!A&&i&&(q.get(i)?.selected||D()),i&&a&&o&&ac({id:i,store:s,nodeRef:e});const C=b(N);if(l.current=C,c.current=ax(q,I,C,i),T&&c.current){const[F,H]=En({nodeId:i,dragItems:c.current,nodeInternals:q});T(N.sourceEvent,F,H)}};if(t)m.on(".drag",null);else{const N=mb().on("start",q=>{const{domNode:A,nodeDragThreshold:I}=s.getState();I===0&&S(q),y.current=!1;const D=b(q);l.current=D,h.current=A?.getBoundingClientRect()||null,_.current=nt(q.sourceEvent,h.current)}).on("drag",q=>{const A=b(q),{autoPanOnNodeDrag:I,nodeDragThreshold:D}=s.getState();if(q.sourceEvent.type==="touchmove"&&q.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!g.current&&v.current&&I&&(g.current=!0,x()),!v.current){const P=A.xSnapped-(l?.current?.x??0),w=A.ySnapped-(l?.current?.y??0);Math.sqrt(P*P+w*w)>D&&S(q)}(l.current.x!==A.xSnapped||l.current.y!==A.ySnapped)&&c.current&&v.current&&(p.current=q.sourceEvent,_.current=nt(q.sourceEvent,h.current),E(A))}}).on("end",q=>{if(!(!v.current||y.current)&&(f(!1),g.current=!1,v.current=!1,cancelAnimationFrame(d.current),c.current)){const{updateNodePositions:A,nodeInternals:I,onNodeDragStop:D,onSelectionDragStop:P}=s.getState(),w=i?D:Sn(P);if(A(c.current,!1,!1),w){const[T,C]=En({nodeId:i,dragItems:c.current,nodeInternals:I});w(q.sourceEvent,T,C)}}}).filter(q=>{const A=q.target;return!q.button&&(!r||!kf(A,`.${r}`,e))&&(!n||kf(A,n,e))});return m.call(N),()=>{m.on(".drag",null)}}}},[e,t,r,n,a,s,i,o,b]),u}function Sy(){const e=le();return O.useCallback(r=>{const{nodeInternals:n,nodeExtent:i,updateNodePositions:a,getNodes:o,snapToGrid:s,snapGrid:u,onError:f,nodesDraggable:c}=e.getState(),l=o().filter(y=>y.selected&&(y.draggable||c&&typeof y.draggable>"u")),d=s?u[0]:5,h=s?u[1]:5,_=r.isShiftPressed?4:1,p=r.x*d*_,g=r.y*h*_,v=l.map(y=>{if(y.positionAbsolute){const b={x:y.positionAbsolute.x+p,y:y.positionAbsolute.y+g};s&&(b.x=u[0]*Math.round(b.x/u[0]),b.y=u[1]*Math.round(b.y/u[1]));const{positionAbsolute:m,position:E}=xy(y,b,n,i,void 0,f);y.position=E,y.positionAbsolute=m}return y});a(v,!0,!1)},[])}const Rt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Bt=e=>{const t=({id:r,type:n,data:i,xPos:a,yPos:o,xPosOrigin:s,yPosOrigin:u,selected:f,onClick:c,onMouseEnter:l,onMouseMove:d,onMouseLeave:h,onContextMenu:_,onDoubleClick:p,style:g,className:v,isDraggable:y,isSelectable:b,isConnectable:m,isFocusable:E,selectNodesOnDrag:x,sourcePosition:S,targetPosition:N,hidden:q,resizeObserver:A,dragHandle:I,zIndex:D,isParent:P,noDragClassName:w,noPanClassName:T,initialized:C,disableKeyboardA11y:F,ariaLabel:H,rfId:M,hasHandleBounds:z})=>{const G=le(),V=O.useRef(null),U=O.useRef(null),R=O.useRef(S),k=O.useRef(N),$=O.useRef(n),B=b||y||c||l||d||h,j=Sy(),W=Ht(r,G.getState,l),Z=Ht(r,G.getState,d),te=Ht(r,G.getState,h),ie=Ht(r,G.getState,_),re=Ht(r,G.getState,p),ee=K=>{const{nodeDragThreshold:Y}=G.getState();if(b&&(!x||!y||Y>0)&&ac({id:r,store:G,nodeRef:V}),c){const oe=G.getState().nodeInternals.get(r);oe&&c(K,{...oe})}},J=K=>{if(!ec(K)&&!F)if(Kv.includes(K.key)&&b){const Y=K.key==="Escape";ac({id:r,store:G,unselect:Y,nodeRef:V})}else y&&f&&Object.prototype.hasOwnProperty.call(Rt,K.key)&&(G.setState({ariaLiveMessage:`Moved selected node ${K.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~o}`}),j({x:Rt[K.key].x,y:Rt[K.key].y,isShiftPressed:K.shiftKey}))};O.useEffect(()=>()=>{U.current&&(A?.unobserve(U.current),U.current=null)},[]),O.useEffect(()=>{if(V.current&&!q){const K=V.current;(!C||!z||U.current!==K)&&(U.current&&A?.unobserve(U.current),A?.observe(K),U.current=K)}},[q,C,z]),O.useEffect(()=>{const K=$.current!==n,Y=R.current!==S,oe=k.current!==N;V.current&&(K||Y||oe)&&(K&&($.current=n),Y&&(R.current=S),oe&&(k.current=N),G.getState().updateNodeDimensions([{id:r,nodeElement:V.current,forceUpdate:!0}]))},[r,n,S,N]);const ue=Ey({nodeRef:V,disabled:q||!y,noDragClassName:w,handleSelector:I,nodeId:r,isSelectable:b,selectNodesOnDrag:x});return q?null:L.createElement("div",{className:he(["react-flow__node",`react-flow__node-${n}`,{[T]:y},v,{selected:f,selectable:b,parent:P,dragging:ue}]),ref:V,style:{zIndex:D,transform:`translate(${s}px,${u}px)`,pointerEvents:B?"all":"none",visibility:C?"visible":"hidden",...g},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:W,onMouseMove:Z,onMouseLeave:te,onContextMenu:ie,onClick:ee,onDoubleClick:re,onKeyDown:E?J:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":F?void 0:`${hy}-${M}`,"aria-label":H},L.createElement(w1,{value:r},L.createElement(e,{id:r,data:i,type:n,xPos:a,yPos:o,selected:f,isConnectable:m,sourcePosition:S,targetPosition:N,dragging:ue,dragHandle:I,zIndex:D})))};return t.displayName="NodeWrapper",O.memo(t)};const ux=e=>{const t=e.getNodes().filter(r=>r.selected);return{...Hr(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function cx({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=le(),{width:i,height:a,x:o,y:s,transformString:u,userSelectionActive:f}=ne(ux,be),c=Sy(),l=O.useRef(null);if(O.useEffect(()=>{r||l.current?.focus({preventScroll:!0})},[r]),Ey({nodeRef:l}),f||!i||!a)return null;const d=e?_=>{const p=n.getState().getNodes().filter(g=>g.selected);e(_,p)}:void 0,h=_=>{Object.prototype.hasOwnProperty.call(Rt,_.key)&&c({x:Rt[_.key].x,y:Rt[_.key].y,isShiftPressed:_.shiftKey})};return L.createElement("div",{className:he(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},L.createElement("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:r?void 0:-1,onKeyDown:r?void 0:h,style:{width:i,height:a,top:s,left:o}}))}var fx=O.memo(cx);const lx=e=>e.nodesSelectionActive,qy=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:o,deleteKeyCode:s,onMove:u,onMoveStart:f,onMoveEnd:c,selectionKeyCode:l,selectionOnDrag:d,selectionMode:h,onSelectionStart:_,onSelectionEnd:p,multiSelectionKeyCode:g,panActivationKeyCode:v,zoomActivationKeyCode:y,elementsSelectable:b,zoomOnScroll:m,zoomOnPinch:E,panOnScroll:x,panOnScrollSpeed:S,panOnScrollMode:N,zoomOnDoubleClick:q,panOnDrag:A,defaultViewport:I,translateExtent:D,minZoom:P,maxZoom:w,preventScrolling:T,onSelectionContextMenu:C,noWheelClassName:F,noPanClassName:H,disableKeyboardA11y:M})=>{const z=ne(lx),G=rr(l),V=rr(v),U=V||A,R=V||x,k=G||d&&U!==!0;return X1({deleteKeyCode:s,multiSelectionKeyCode:g}),L.createElement(ex,{onMove:u,onMoveStart:f,onMoveEnd:c,onPaneContextMenu:a,elementsSelectable:b,zoomOnScroll:m,zoomOnPinch:E,panOnScroll:R,panOnScrollSpeed:S,panOnScrollMode:N,zoomOnDoubleClick:q,panOnDrag:!G&&U,defaultViewport:I,translateExtent:D,minZoom:P,maxZoom:w,zoomActivationKeyCode:y,preventScrolling:T,noWheelClassName:F,noPanClassName:H},L.createElement(by,{onSelectionStart:_,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:o,panOnDrag:U,isSelecting:!!k,selectionMode:h},e,z&&L.createElement(fx,{onSelectionContextMenu:C,noPanClassName:H,disableKeyboardA11y:M})))};qy.displayName="FlowRenderer";var dx=O.memo(qy);function hx(e){return ne(O.useCallback(r=>e?ey(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function px(e){const t={input:Bt(e.input||cy),default:Bt(e.default||ic),output:Bt(e.output||ly),group:Bt(e.group||wc)},r={},n=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,a)=>(i[a]=Bt(e[a]||ic),i),r);return{...t,...n}}const gx=({x:e,y:t,width:r,height:n,origin:i})=>!r||!n?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-r*i[0],y:t-n*i[1]},vx=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Ry=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:i,updateNodeDimensions:a,onError:o}=ne(vx,be),s=hx(e.onlyRenderVisibleElements),u=O.useRef(),f=O.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(l=>{const d=l.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));a(d)});return u.current=c,c},[]);return O.useEffect(()=>()=>{u?.current?.disconnect()},[]),L.createElement("div",{className:"react-flow__nodes",style:xc},s.map(c=>{let l=c.type||"default";e.nodeTypes[l]||(o?.("003",We.error003(l)),l="default");const d=e.nodeTypes[l]||e.nodeTypes.default,h=!!(c.draggable||t&&typeof c.draggable>"u"),_=!!(c.selectable||i&&typeof c.selectable>"u"),p=!!(c.connectable||r&&typeof c.connectable>"u"),g=!!(c.focusable||n&&typeof c.focusable>"u"),v=e.nodeExtent?gc(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,y=v?.x??0,b=v?.y??0,m=gx({x:y,y:b,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return L.createElement(d,{key:c.id,id:c.id,className:c.className,style:c.style,type:l,data:c.data,sourcePosition:c.sourcePosition||X.Bottom,targetPosition:c.targetPosition||X.Top,hidden:c.hidden,xPos:y,yPos:b,xPosOrigin:m.x,yPosOrigin:m.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:h,isSelectable:_,isConnectable:p,isFocusable:g,resizeObserver:f,dragHandle:c.dragHandle,zIndex:c[se]?.z??0,isParent:!!c[se]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel,hasHandleBounds:!!c[se]?.handleBounds})}))};Ry.displayName="NodeRenderer";var yx=O.memo(Ry);const mx=(e,t,r)=>r===X.Left?e-t:r===X.Right?e+t:e,_x=(e,t,r)=>r===X.Top?e-t:r===X.Bottom?e+t:e,Pf="react-flow__edgeupdater",Df=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:i,onMouseEnter:a,onMouseOut:o,type:s})=>L.createElement("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:o,className:he([Pf,`${Pf}-${s}`]),cx:mx(t,n,e),cy:_x(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),bx=()=>!0;var xt=e=>{const t=({id:r,className:n,type:i,data:a,onClick:o,onEdgeDoubleClick:s,selected:u,animated:f,label:c,labelStyle:l,labelShowBg:d,labelBgStyle:h,labelBgPadding:_,labelBgBorderRadius:p,style:g,source:v,target:y,sourceX:b,sourceY:m,targetX:E,targetY:x,sourcePosition:S,targetPosition:N,elementsSelectable:q,hidden:A,sourceHandleId:I,targetHandleId:D,onContextMenu:P,onMouseEnter:w,onMouseMove:T,onMouseLeave:C,reconnectRadius:F,onReconnect:H,onReconnectStart:M,onReconnectEnd:z,markerEnd:G,markerStart:V,rfId:U,ariaLabel:R,isFocusable:k,isReconnectable:$,pathOptions:B,interactionWidth:j,disableKeyboardA11y:W})=>{const Z=O.useRef(null),[te,ie]=O.useState(!1),[re,ee]=O.useState(!1),J=le(),ue=O.useMemo(()=>`url('#${rc(V,U)}')`,[V,U]),K=O.useMemo(()=>`url('#${rc(G,U)}')`,[G,U]);if(A)return null;const Y=de=>{const{edges:xe,addSelectedEdges:pe,unselectNodesAndEdges:ve,multiSelectionActive:mt}=J.getState(),Fe=xe.find(at=>at.id===r);Fe&&(q&&(J.setState({nodesSelectionActive:!1}),Fe.selected&&mt?(ve({nodes:[],edges:[Fe]}),Z.current?.blur()):pe([r])),o&&o(de,Fe))},oe=zt(r,J.getState,s),Ae=zt(r,J.getState,P),Le=zt(r,J.getState,w),ge=zt(r,J.getState,T),ce=zt(r,J.getState,C),ye=(de,xe)=>{if(de.button!==0)return;const{edges:pe,isValidConnection:ve}=J.getState(),mt=xe?y:v,Fe=(xe?D:I)||null,at=xe?"target":"source",sn=ve||bx,un=xe,Dt=pe.find(ot=>ot.id===r);ee(!0),M?.(de,Dt,at);const cn=ot=>{ee(!1),z?.(ot,Dt,at)};ay({event:de,handleId:Fe,nodeId:mt,onConnect:ot=>H?.(Dt,ot),isTarget:un,getState:J.getState,setState:J.setState,isValidConnection:sn,edgeUpdaterType:at,onReconnectEnd:cn})},Ie=de=>ye(de,!0),Ge=de=>ye(de,!1),$e=()=>ie(!0),we=()=>ie(!1),Ve=!q&&!o,Je=de=>{if(!W&&Kv.includes(de.key)&&q){const{unselectNodesAndEdges:xe,addSelectedEdges:pe,edges:ve}=J.getState();de.key==="Escape"?(Z.current?.blur(),xe({edges:[ve.find(Fe=>Fe.id===r)]})):pe([r])}};return L.createElement("g",{className:he(["react-flow__edge",`react-flow__edge-${i}`,n,{selected:u,animated:f,inactive:Ve,updating:te}]),onClick:Y,onDoubleClick:oe,onContextMenu:Ae,onMouseEnter:Le,onMouseMove:ge,onMouseLeave:ce,onKeyDown:k?Je:void 0,tabIndex:k?0:void 0,role:k?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":R===null?void 0:R||`Edge from ${v} to ${y}`,"aria-describedby":k?`${py}-${U}`:void 0,ref:Z},!re&&L.createElement(e,{id:r,source:v,target:y,selected:u,animated:f,label:c,labelStyle:l,labelShowBg:d,labelBgStyle:h,labelBgPadding:_,labelBgBorderRadius:p,data:a,style:g,sourceX:b,sourceY:m,targetX:E,targetY:x,sourcePosition:S,targetPosition:N,sourceHandleId:I,targetHandleId:D,markerStart:ue,markerEnd:K,pathOptions:B,interactionWidth:j}),$&&L.createElement(L.Fragment,null,($==="source"||$===!0)&&L.createElement(Df,{position:S,centerX:b,centerY:m,radius:F,onMouseDown:Ie,onMouseEnter:$e,onMouseOut:we,type:"source"}),($==="target"||$===!0)&&L.createElement(Df,{position:N,centerX:E,centerY:x,radius:F,onMouseDown:Ge,onMouseEnter:$e,onMouseOut:we,type:"target"})))};return t.displayName="EdgeWrapper",O.memo(t)};function wx(e){const t={default:xt(e.default||kr),straight:xt(e.bezier||mc),step:xt(e.step||yc),smoothstep:xt(e.step||zr),simplebezier:xt(e.simplebezier||vc)},r={},n=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,a)=>(i[a]=xt(e[a]||kr),i),r);return{...t,...n}}function Lf(e,t,r=null){const n=(r?.x||0)+t.x,i=(r?.y||0)+t.y,a=r?.width||t.width,o=r?.height||t.height;switch(e){case X.Top:return{x:n+a/2,y:i};case X.Right:return{x:n+a,y:i+o/2};case X.Bottom:return{x:n+a/2,y:i+o};case X.Left:return{x:n,y:i+o/2}}}function $f(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const xx=(e,t,r,n,i,a)=>{const o=Lf(r,e,t),s=Lf(a,n,i);return{sourceX:o.x,sourceY:o.y,targetX:s.x,targetY:s.y}};function Ex({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:i,targetHeight:a,width:o,height:s,transform:u}){const f={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+i),y2:Math.max(e.y+n,t.y+a)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const c=er({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:o/u[2],height:s/u[2]}),l=Math.max(0,Math.min(c.x2,f.x2)-Math.max(c.x,f.x)),d=Math.max(0,Math.min(c.y2,f.y2)-Math.max(c.y,f.y));return Math.ceil(l*d)>0}function Ff(e){const t=e?.[se]?.handleBounds||null,r=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!r]}const Sx=[{level:0,isMaxLevel:!0,edges:[]}];function qx(e,t,r=!1){let n=-1;const i=e.reduce((o,s)=>{const u=Re(s.zIndex);let f=u?s.zIndex:0;if(r){const c=t.get(s.target),l=t.get(s.source),d=s.selected||c?.selected||l?.selected,h=Math.max(l?.[se]?.z||0,c?.[se]?.z||0,1e3);f=(u?s.zIndex:0)+(d?h:0)}return o[f]?o[f].push(s):o[f]=[s],n=f>n?f:n,o},{}),a=Object.entries(i).map(([o,s])=>{const u=+o;return{edges:s,level:u,isMaxLevel:u===n}});return a.length===0?Sx:a}function Rx(e,t,r){const n=ne(O.useCallback(i=>e?i.edges.filter(a=>{const o=t.get(a.source),s=t.get(a.target);return o?.width&&o?.height&&s?.width&&s?.height&&Ex({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:s.width,targetHeight:s.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return qx(n,t,r)}const Cx=({color:e="none",strokeWidth:t=1})=>L.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Nx=({color:e="none",strokeWidth:t=1})=>L.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),zf={[Mr.Arrow]:Cx,[Mr.ArrowClosed]:Nx};function Ax(e){const t=le();return O.useMemo(()=>Object.prototype.hasOwnProperty.call(zf,e)?zf[e]:(t.getState().onError?.("009",We.error009(e)),null),[e])}const Ix=({id:e,type:t,color:r,width:n=12.5,height:i=12.5,markerUnits:a="strokeWidth",strokeWidth:o,orient:s="auto-start-reverse"})=>{const u=Ax(t);return u?L.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0"},L.createElement(u,{color:r,strokeWidth:o})):null},Tx=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((i,a)=>([a.markerStart,a.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const s=rc(o,t);n.includes(s)||(i.push({id:s,color:o.color||e,...o}),n.push(s))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))},Cy=({defaultColor:e,rfId:t})=>{const r=ne(O.useCallback(Tx({defaultColor:e,rfId:t}),[e,t]),(n,i)=>!(n.length!==i.length||n.some((a,o)=>a.id!==i[o].id)));return L.createElement("defs",null,r.map(n=>L.createElement(Ix,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};Cy.displayName="MarkerDefinitions";var Mx=O.memo(Cy);const kx=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Ny=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:i,noPanClassName:a,onEdgeContextMenu:o,onEdgeMouseEnter:s,onEdgeMouseMove:u,onEdgeMouseLeave:f,onEdgeClick:c,onEdgeDoubleClick:l,onReconnect:d,onReconnectStart:h,onReconnectEnd:_,reconnectRadius:p,children:g,disableKeyboardA11y:v})=>{const{edgesFocusable:y,edgesUpdatable:b,elementsSelectable:m,width:E,height:x,connectionMode:S,nodeInternals:N,onError:q}=ne(kx,be),A=Rx(t,N,r);return E?L.createElement(L.Fragment,null,A.map(({level:I,edges:D,isMaxLevel:P})=>L.createElement("svg",{key:I,style:{zIndex:I},width:E,height:x,className:"react-flow__edges react-flow__container"},P&&L.createElement(Mx,{defaultColor:e,rfId:n}),L.createElement("g",null,D.map(w=>{const[T,C,F]=Ff(N.get(w.source)),[H,M,z]=Ff(N.get(w.target));if(!F||!z)return null;let G=w.type||"default";i[G]||(q?.("011",We.error011(G)),G="default");const V=i[G]||i.default,U=S===ht.Strict?M.target:(M.target??[]).concat(M.source??[]),R=$f(C.source,w.sourceHandle),k=$f(U,w.targetHandle),$=R?.position||X.Bottom,B=k?.position||X.Top,j=!!(w.focusable||y&&typeof w.focusable>"u"),W=w.reconnectable||w.updatable,Z=typeof d<"u"&&(W||b&&typeof W>"u");if(!R||!k)return q?.("008",We.error008(R,w)),null;const{sourceX:te,sourceY:ie,targetX:re,targetY:ee}=xx(T,R,$,H,k,B);return L.createElement(V,{key:w.id,id:w.id,className:he([w.className,a]),type:G,data:w.data,selected:!!w.selected,animated:!!w.animated,hidden:!!w.hidden,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,style:w.style,source:w.source,target:w.target,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerEnd:w.markerEnd,markerStart:w.markerStart,sourceX:te,sourceY:ie,targetX:re,targetY:ee,sourcePosition:$,targetPosition:B,elementsSelectable:m,onContextMenu:o,onMouseEnter:s,onMouseMove:u,onMouseLeave:f,onClick:c,onEdgeDoubleClick:l,onReconnect:d,onReconnectStart:h,onReconnectEnd:_,reconnectRadius:p,rfId:n,ariaLabel:w.ariaLabel,isFocusable:j,isReconnectable:Z,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth,disableKeyboardA11y:v})})))),g):null};Ny.displayName="EdgeRenderer";var Ox=O.memo(Ny);const Px=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Dx({children:e}){const t=ne(Px);return L.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Lx(e){const t=Br(),r=O.useRef(!1);O.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const $x={[X.Left]:X.Right,[X.Right]:X.Left,[X.Top]:X.Bottom,[X.Bottom]:X.Top},Ay=({nodeId:e,handleType:t,style:r,type:n=rt.Bezier,CustomComponent:i,connectionStatus:a})=>{const{fromNode:o,handleId:s,toX:u,toY:f,connectionMode:c}=ne(O.useCallback(x=>({fromNode:x.nodeInternals.get(e),handleId:x.connectionHandleId,toX:(x.connectionPosition.x-x.transform[0])/x.transform[2],toY:(x.connectionPosition.y-x.transform[1])/x.transform[2],connectionMode:x.connectionMode}),[e]),be),l=o?.[se]?.handleBounds;let d=l?.[t];if(c===ht.Loose&&(d=d||l?.[t==="source"?"target":"source"]),!o||!d)return null;const h=s?d.find(x=>x.id===s):d[0],_=h?h.x+h.width/2:(o.width??0)/2,p=h?h.y+h.height/2:o.height??0,g=(o.positionAbsolute?.x??0)+_,v=(o.positionAbsolute?.y??0)+p,y=h?.position,b=y?$x[y]:null;if(!y||!b)return null;if(i)return L.createElement(i,{connectionLineType:n,connectionLineStyle:r,fromNode:o,fromHandle:h,fromX:g,fromY:v,toX:u,toY:f,fromPosition:y,toPosition:b,connectionStatus:a});let m="";const E={sourceX:g,sourceY:v,sourcePosition:y,targetX:u,targetY:f,targetPosition:b};return n===rt.Bezier?[m]=Jv(E):n===rt.Step?[m]=tc({...E,borderRadius:0}):n===rt.SmoothStep?[m]=tc(E):n===rt.SimpleBezier?[m]=Zv(E):m=`M${g},${v} ${u},${f}`,L.createElement("path",{d:m,fill:"none",className:"react-flow__connection-path",style:r})};Ay.displayName="ConnectionLine";const Fx=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function zx({containerStyle:e,style:t,type:r,component:n}){const{nodeId:i,handleType:a,nodesConnectable:o,width:s,height:u,connectionStatus:f}=ne(Fx,be);return!(i&&a&&s&&o)?null:L.createElement("svg",{style:e,width:s,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},L.createElement("g",{className:he(["react-flow__connection",f])},L.createElement(Ay,{nodeId:i,handleType:a,style:t,type:r,CustomComponent:n,connectionStatus:f})))}function Hf(e,t){return O.useRef(null),le(),O.useMemo(()=>t(e),[e])}const Iy=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:i,onInit:a,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:u,onEdgeDoubleClick:f,onNodeMouseEnter:c,onNodeMouseMove:l,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:_,onSelectionStart:p,onSelectionEnd:g,connectionLineType:v,connectionLineStyle:y,connectionLineComponent:b,connectionLineContainerStyle:m,selectionKeyCode:E,selectionOnDrag:x,selectionMode:S,multiSelectionKeyCode:N,panActivationKeyCode:q,zoomActivationKeyCode:A,deleteKeyCode:I,onlyRenderVisibleElements:D,elementsSelectable:P,selectNodesOnDrag:w,defaultViewport:T,translateExtent:C,minZoom:F,maxZoom:H,preventScrolling:M,defaultMarkerColor:z,zoomOnScroll:G,zoomOnPinch:V,panOnScroll:U,panOnScrollSpeed:R,panOnScrollMode:k,zoomOnDoubleClick:$,panOnDrag:B,onPaneClick:j,onPaneMouseEnter:W,onPaneMouseMove:Z,onPaneMouseLeave:te,onPaneScroll:ie,onPaneContextMenu:re,onEdgeContextMenu:ee,onEdgeMouseEnter:J,onEdgeMouseMove:ue,onEdgeMouseLeave:K,onReconnect:Y,onReconnectStart:oe,onReconnectEnd:Ae,reconnectRadius:Le,noDragClassName:ge,noWheelClassName:ce,noPanClassName:ye,elevateEdgesOnSelect:Ie,disableKeyboardA11y:Ge,nodeOrigin:$e,nodeExtent:we,rfId:Ve})=>{const Je=Hf(e,px),de=Hf(t,wx);return Lx(a),L.createElement(dx,{onPaneClick:j,onPaneMouseEnter:W,onPaneMouseMove:Z,onPaneMouseLeave:te,onPaneContextMenu:re,onPaneScroll:ie,deleteKeyCode:I,selectionKeyCode:E,selectionOnDrag:x,selectionMode:S,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:N,panActivationKeyCode:q,zoomActivationKeyCode:A,elementsSelectable:P,onMove:r,onMoveStart:n,onMoveEnd:i,zoomOnScroll:G,zoomOnPinch:V,zoomOnDoubleClick:$,panOnScroll:U,panOnScrollSpeed:R,panOnScrollMode:k,panOnDrag:B,defaultViewport:T,translateExtent:C,minZoom:F,maxZoom:H,onSelectionContextMenu:_,preventScrolling:M,noDragClassName:ge,noWheelClassName:ce,noPanClassName:ye,disableKeyboardA11y:Ge},L.createElement(Dx,null,L.createElement(Ox,{edgeTypes:de,onEdgeClick:s,onEdgeDoubleClick:f,onlyRenderVisibleElements:D,onEdgeContextMenu:ee,onEdgeMouseEnter:J,onEdgeMouseMove:ue,onEdgeMouseLeave:K,onReconnect:Y,onReconnectStart:oe,onReconnectEnd:Ae,reconnectRadius:Le,defaultMarkerColor:z,noPanClassName:ye,elevateEdgesOnSelect:!!Ie,disableKeyboardA11y:Ge,rfId:Ve},L.createElement(zx,{style:y,type:v,component:b,containerStyle:m})),L.createElement("div",{className:"react-flow__edgelabel-renderer"}),L.createElement(yx,{nodeTypes:Je,onNodeClick:o,onNodeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:l,onNodeMouseLeave:d,onNodeContextMenu:h,selectNodesOnDrag:w,onlyRenderVisibleElements:D,noPanClassName:ye,noDragClassName:ge,disableKeyboardA11y:Ge,nodeOrigin:$e,nodeExtent:we,rfId:Ve})))};Iy.displayName="GraphView";var Hx=O.memo(Iy);const oc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Qe={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:oc,nodeExtent:oc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ht.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:g1,isValidConnection:void 0},Bx=()=>I0((e,t)=>({...Qe,setNodes:r=>{const{nodeInternals:n,nodeOrigin:i,elevateNodesOnSelect:a}=t();e({nodeInternals:wn(r,n,i,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(i=>({...n,...i}))})},setDefaultNodesAndEdges:(r,n)=>{const i=typeof r<"u",a=typeof n<"u",o=i?wn(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:a?n:[],hasDefaultNodes:i,hasDefaultEdges:a})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:i,fitViewOnInit:a,fitViewOnInitDone:o,fitViewOnInitOptions:s,domNode:u,nodeOrigin:f}=t(),c=u?.querySelector(".react-flow__viewport");if(!c)return;const l=window.getComputedStyle(c),{m22:d}=new window.DOMMatrixReadOnly(l.transform),h=r.reduce((p,g)=>{const v=i.get(g.id);if(v?.hidden)i.set(v.id,{...v,[se]:{...v[se],handleBounds:void 0}});else if(v){const y=pc(g.nodeElement);!!(y.width&&y.height&&(v.width!==y.width||v.height!==y.height||g.forceUpdate))&&(i.set(v.id,{...v,[se]:{...v[se],handleBounds:{source:Of(".source",g.nodeElement,d,f),target:Of(".target",g.nodeElement,d,f)}},...y}),p.push({id:v.id,type:"dimensions",dimensions:y}))}return p},[]);vy(i,f);const _=o||a&&!o&&yy(t,{initial:!0,...s});e({nodeInternals:new Map(i),fitViewOnInitDone:_}),h?.length>0&&n?.(h)},updateNodePositions:(r,n=!0,i=!1)=>{const{triggerNodeChanges:a}=t(),o=r.map(s=>{const u={id:s.id,type:"position",dragging:i};return n&&(u.positionAbsolute=s.positionAbsolute,u.position=s.position),u});a(o)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:i,hasDefaultNodes:a,nodeOrigin:o,getNodes:s,elevateNodesOnSelect:u}=t();if(r?.length){if(a){const f=_y(r,s()),c=wn(f,i,o,u);e({nodeInternals:c})}n?.(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:i,getNodes:a}=t();let o,s=null;n?o=r.map(u=>tt(u,!0)):(o=Et(a(),r),s=Et(i,[])),_r({changedNodes:o,changedEdges:s,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:i,getNodes:a}=t();let o,s=null;n?o=r.map(u=>tt(u,!0)):(o=Et(i,r),s=Et(a(),[])),_r({changedNodes:s,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:i,getNodes:a}=t(),o=r||a(),s=n||i,u=o.map(c=>(c.selected=!1,tt(c.id,!1))),f=s.map(c=>tt(c.id,!1));_r({changedNodes:u,changedEdges:f,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:i}=t();n?.scaleExtent([r,i]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:i}=t();n?.scaleExtent([i,r]),e({maxZoom:r})},setTranslateExtent:r=>{t().d3Zoom?.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),a=n().filter(s=>s.selected).map(s=>tt(s.id,!1)),o=r.filter(s=>s.selected).map(s=>tt(s.id,!1));_r({changedNodes:a,changedEdges:o,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(i=>{i.positionAbsolute=gc(i.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:i,height:a,d3Zoom:o,d3Selection:s,translateExtent:u}=t();if(!o||!s||!r.x&&!r.y)return!1;const f=Ke.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),c=[[0,0],[i,a]],l=o?.constrain()(f,c,u);return o.transform(s,l),n[0]!==l.x||n[1]!==l.y||n[2]!==l.k},cancelConnection:()=>e({connectionNodeId:Qe.connectionNodeId,connectionHandleId:Qe.connectionHandleId,connectionHandleType:Qe.connectionHandleType,connectionStatus:Qe.connectionStatus,connectionStartHandle:Qe.connectionStartHandle,connectionEndHandle:Qe.connectionEndHandle}),reset:()=>e({...Qe})}),Object.is),Ec=({children:e})=>{const t=O.useRef(null);return t.current||(t.current=Bx()),L.createElement(u1,{value:t.current},e)};Ec.displayName="ReactFlowProvider";const Ty=({children:e})=>O.useContext(Fr)?L.createElement(L.Fragment,null,e):L.createElement(Ec,null,e);Ty.displayName="ReactFlowWrapper";const Gx={input:cy,default:ic,output:ly,group:wc},Vx={default:kr,straight:mc,step:yc,smoothstep:zr,simplebezier:vc},Ux=[0,0],jx=[15,15],Kx={x:0,y:0,zoom:1},Yx={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},My=O.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:i,nodeTypes:a=Gx,edgeTypes:o=Vx,onNodeClick:s,onEdgeClick:u,onInit:f,onMove:c,onMoveStart:l,onMoveEnd:d,onConnect:h,onConnectStart:_,onConnectEnd:p,onClickConnectStart:g,onClickConnectEnd:v,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:m,onNodeContextMenu:E,onNodeDoubleClick:x,onNodeDragStart:S,onNodeDrag:N,onNodeDragStop:q,onNodesDelete:A,onEdgesDelete:I,onSelectionChange:D,onSelectionDragStart:P,onSelectionDrag:w,onSelectionDragStop:T,onSelectionContextMenu:C,onSelectionStart:F,onSelectionEnd:H,connectionMode:M=ht.Strict,connectionLineType:z=rt.Bezier,connectionLineStyle:G,connectionLineComponent:V,connectionLineContainerStyle:U,deleteKeyCode:R="Backspace",selectionKeyCode:k="Shift",selectionOnDrag:$=!1,selectionMode:B=tr.Full,panActivationKeyCode:j="Space",multiSelectionKeyCode:W=Tr()?"Meta":"Control",zoomActivationKeyCode:Z=Tr()?"Meta":"Control",snapToGrid:te=!1,snapGrid:ie=jx,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:ee=!0,nodesDraggable:J,nodesConnectable:ue,nodesFocusable:K,nodeOrigin:Y=Ux,edgesFocusable:oe,edgesUpdatable:Ae,elementsSelectable:Le,defaultViewport:ge=Kx,minZoom:ce=.5,maxZoom:ye=2,translateExtent:Ie=oc,preventScrolling:Ge=!0,nodeExtent:$e,defaultMarkerColor:we="#b1b1b7",zoomOnScroll:Ve=!0,zoomOnPinch:Je=!0,panOnScroll:de=!1,panOnScrollSpeed:xe=.5,panOnScrollMode:pe=ct.Free,zoomOnDoubleClick:ve=!0,panOnDrag:mt=!0,onPaneClick:Fe,onPaneMouseEnter:at,onPaneMouseMove:sn,onPaneMouseLeave:un,onPaneScroll:Dt,onPaneContextMenu:cn,children:Bc,onEdgeContextMenu:ot,onEdgeDoubleClick:$m,onEdgeMouseEnter:Fm,onEdgeMouseMove:zm,onEdgeMouseLeave:Hm,onEdgeUpdate:Bm,onEdgeUpdateStart:Gm,onEdgeUpdateEnd:Vm,onReconnect:Um,onReconnectStart:jm,onReconnectEnd:Km,reconnectRadius:Ym=10,edgeUpdaterRadius:Wm=10,onNodesChange:Xm,onEdgesChange:Zm,noDragClassName:Jm="nodrag",noWheelClassName:Qm="nowheel",noPanClassName:Gc="nopan",fitView:e0=!1,fitViewOptions:t0,connectOnClick:r0=!0,attributionPosition:n0,proOptions:i0,defaultEdgeOptions:a0,elevateNodesOnSelect:o0=!0,elevateEdgesOnSelect:s0=!1,disableKeyboardA11y:Vc=!1,autoPanOnConnect:u0=!0,autoPanOnNodeDrag:c0=!0,connectionRadius:f0=20,isValidConnection:l0,onError:d0,style:h0,id:Uc,nodeDragThreshold:p0,...g0},v0)=>{const fn=Uc||"1";return L.createElement("div",{...g0,style:{...h0,...Yx},ref:v0,className:he(["react-flow",i]),"data-testid":"rf__wrapper",id:Uc},L.createElement(Ty,null,L.createElement(Hx,{onInit:f,onMove:c,onMoveStart:l,onMoveEnd:d,onNodeClick:s,onEdgeClick:u,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:m,onNodeContextMenu:E,onNodeDoubleClick:x,nodeTypes:a,edgeTypes:o,connectionLineType:z,connectionLineStyle:G,connectionLineComponent:V,connectionLineContainerStyle:U,selectionKeyCode:k,selectionOnDrag:$,selectionMode:B,deleteKeyCode:R,multiSelectionKeyCode:W,panActivationKeyCode:j,zoomActivationKeyCode:Z,onlyRenderVisibleElements:re,selectNodesOnDrag:ee,defaultViewport:ge,translateExtent:Ie,minZoom:ce,maxZoom:ye,preventScrolling:Ge,zoomOnScroll:Ve,zoomOnPinch:Je,zoomOnDoubleClick:ve,panOnScroll:de,panOnScrollSpeed:xe,panOnScrollMode:pe,panOnDrag:mt,onPaneClick:Fe,onPaneMouseEnter:at,onPaneMouseMove:sn,onPaneMouseLeave:un,onPaneScroll:Dt,onPaneContextMenu:cn,onSelectionContextMenu:C,onSelectionStart:F,onSelectionEnd:H,onEdgeContextMenu:ot,onEdgeDoubleClick:$m,onEdgeMouseEnter:Fm,onEdgeMouseMove:zm,onEdgeMouseLeave:Hm,onReconnect:Um??Bm,onReconnectStart:jm??Gm,onReconnectEnd:Km??Vm,reconnectRadius:Ym??Wm,defaultMarkerColor:we,noDragClassName:Jm,noWheelClassName:Qm,noPanClassName:Gc,elevateEdgesOnSelect:s0,rfId:fn,disableKeyboardA11y:Vc,nodeOrigin:Y,nodeExtent:$e}),L.createElement($1,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:h,onConnectStart:_,onConnectEnd:p,onClickConnectStart:g,onClickConnectEnd:v,nodesDraggable:J,nodesConnectable:ue,nodesFocusable:K,edgesFocusable:oe,edgesUpdatable:Ae,elementsSelectable:Le,elevateNodesOnSelect:o0,minZoom:ce,maxZoom:ye,nodeExtent:$e,onNodesChange:Xm,onEdgesChange:Zm,snapToGrid:te,snapGrid:ie,connectionMode:M,translateExtent:Ie,connectOnClick:r0,defaultEdgeOptions:a0,fitView:e0,fitViewOptions:t0,onNodesDelete:A,onEdgesDelete:I,onNodeDragStart:S,onNodeDrag:N,onNodeDragStop:q,onSelectionDrag:w,onSelectionDragStart:P,onSelectionDragStop:T,noPanClassName:Gc,nodeOrigin:Y,rfId:fn,autoPanOnConnect:u0,autoPanOnNodeDrag:c0,onError:d0,connectionRadius:f0,isValidConnection:l0,nodeDragThreshold:p0}),L.createElement(D1,{onSelectionChange:D}),Bc,L.createElement(f1,{proOptions:i0,position:n0}),L.createElement(G1,{rfId:fn,disableKeyboardA11y:Vc})))});My.displayName="ReactFlow";function ky(e){return t=>{const[r,n]=O.useState(t),i=O.useCallback(a=>n(o=>e(a,o)),[]);return[r,n,i]}}const Wx=ky(_y),Xx=ky(nx);function Oy(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}const Py=({id:e,x:t,y:r,width:n,height:i,style:a,color:o,strokeColor:s,strokeWidth:u,className:f,borderRadius:c,shapeRendering:l,onClick:d,selected:h})=>{const{background:_,backgroundColor:p}=a||{},g=o||_||p;return L.createElement("rect",{className:he(["react-flow__minimap-node",{selected:h},f]),x:t,y:r,rx:c,ry:c,width:n,height:i,fill:g,stroke:s,strokeWidth:u,shapeRendering:l,onClick:d?v=>d(v,e):void 0})};Py.displayName="MiniMapNode";var Zx=O.memo(Py);const Jx=e=>e.nodeOrigin,Qx=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),qn=e=>e instanceof Function?e:()=>e;function eE({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:r="",nodeBorderRadius:n=5,nodeStrokeWidth:i=2,nodeComponent:a=Zx,onClick:o}){const s=ne(Qx,Oy),u=ne(Jx),f=qn(t),c=qn(e),l=qn(r),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return L.createElement(L.Fragment,null,s.map(h=>{const{x:_,y:p}=lt(h,u).positionAbsolute;return L.createElement(a,{key:h.id,x:_,y:p,width:h.width,height:h.height,style:h.style,selected:h.selected,className:l(h),color:f(h),borderRadius:n,strokeColor:c(h),strokeWidth:i,shapeRendering:d,onClick:o,id:h.id})}))}var tE=O.memo(eE);const rE=200,nE=150,iE=e=>{const t=e.getNodes(),r={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:r,boundingRect:t.length>0?h1(Hr(t,e.nodeOrigin),r):r,rfId:e.rfId}},aE="react-flow__minimap-desc";function Dy({style:e,className:t,nodeStrokeColor:r="transparent",nodeColor:n="#e2e2e2",nodeClassName:i="",nodeBorderRadius:a=5,nodeStrokeWidth:o=2,nodeComponent:s,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:f="none",maskStrokeWidth:c=1,position:l="bottom-right",onClick:d,onNodeClick:h,pannable:_=!1,zoomable:p=!1,ariaLabel:g="React Flow mini map",inversePan:v=!1,zoomStep:y=10,offsetScale:b=5}){const m=le(),E=O.useRef(null),{boundingRect:x,viewBB:S,rfId:N}=ne(iE,Oy),q=e?.width??rE,A=e?.height??nE,I=x.width/q,D=x.height/A,P=Math.max(I,D),w=P*q,T=P*A,C=b*P,F=x.x-(w-x.width)/2-C,H=x.y-(T-x.height)/2-C,M=w+C*2,z=T+C*2,G=`${aE}-${N}`,V=O.useRef(0);V.current=P,O.useEffect(()=>{if(E.current){const k=qe(E.current),$=W=>{const{transform:Z,d3Selection:te,d3Zoom:ie}=m.getState();if(W.sourceEvent.type!=="wheel"||!te||!ie)return;const re=-W.sourceEvent.deltaY*(W.sourceEvent.deltaMode===1?.05:W.sourceEvent.deltaMode?1:.002)*y,ee=Z[2]*Math.pow(2,re);ie.scaleTo(te,ee)},B=W=>{const{transform:Z,d3Selection:te,d3Zoom:ie,translateExtent:re,width:ee,height:J}=m.getState();if(W.sourceEvent.type!=="mousemove"||!te||!ie)return;const ue=V.current*Math.max(1,Z[2])*(v?-1:1),K={x:Z[0]-W.sourceEvent.movementX*ue,y:Z[1]-W.sourceEvent.movementY*ue},Y=[[0,0],[ee,J]],oe=Ke.translate(K.x,K.y).scale(Z[2]),Ae=ie.constrain()(oe,Y,re);ie.transform(te,Ae)},j=Hv().on("zoom",_?B:null).on("zoom.wheel",p?$:null);return k.call(j),()=>{k.on("zoom",null)}}},[_,p,v,y]);const U=d?k=>{const $=Te(k);d(k,{x:$[0],y:$[1]})}:void 0,R=h?(k,$)=>{const B=m.getState().nodeInternals.get($);h(k,B)}:void 0;return L.createElement(hc,{position:l,style:e,className:he(["react-flow__minimap",t]),"data-testid":"rf__minimap"},L.createElement("svg",{width:q,height:A,viewBox:`${F} ${H} ${M} ${z}`,role:"img","aria-labelledby":G,ref:E,onClick:U},g&&L.createElement("title",{id:G},g),L.createElement(tE,{onClick:R,nodeColor:n,nodeStrokeColor:r,nodeBorderRadius:a,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:s}),L.createElement("path",{className:"react-flow__minimap-mask",d:`M${F-C},${H-C}h${M+C*2}v${z+C*2}h${-M-C*2}z
        M${S.x},${S.y}h${S.width}v${S.height}h${-S.width}z`,fill:u,fillRule:"evenodd",stroke:f,strokeWidth:c,pointerEvents:"none"})))}Dy.displayName="MiniMap";var oE=O.memo(Dy);function sE(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}function uE(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},L.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function cE(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},L.createElement("path",{d:"M0 0h32v4.2H0z"}))}function fE(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},L.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function lE(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},L.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function dE(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},L.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Ut=({children:e,className:t,...r})=>L.createElement("button",{type:"button",className:he(["react-flow__controls-button",t]),...r},e);Ut.displayName="ControlButton";const hE=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Ly=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:o,onFitView:s,onInteractiveChange:u,className:f,children:c,position:l="bottom-left"})=>{const d=le(),[h,_]=O.useState(!1),{isInteractive:p,minZoomReached:g,maxZoomReached:v}=ne(hE,sE),{zoomIn:y,zoomOut:b,fitView:m}=Br();if(O.useEffect(()=>{_(!0)},[]),!h)return null;const E=()=>{y(),a?.()},x=()=>{b(),o?.()},S=()=>{m(i),s?.()},N=()=>{d.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),u?.(!p)};return L.createElement(hc,{className:he(["react-flow__controls",f]),position:l,style:e,"data-testid":"rf__controls"},t&&L.createElement(L.Fragment,null,L.createElement(Ut,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},L.createElement(uE,null)),L.createElement(Ut,{onClick:x,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:g},L.createElement(cE,null))),r&&L.createElement(Ut,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view"},L.createElement(fE,null)),n&&L.createElement(Ut,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity"},p?L.createElement(dE,null):L.createElement(lE,null)),c)};Ly.displayName="Controls";var pE=O.memo(Ly);function gE(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var ke;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ke||(ke={}));function vE({color:e,dimensions:t,lineWidth:r}){return L.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function yE({color:e,radius:t}){return L.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const mE={[ke.Dots]:"#91919a",[ke.Lines]:"#eee",[ke.Cross]:"#e2e2e2"},_E={[ke.Dots]:1,[ke.Lines]:1,[ke.Cross]:6},bE=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function $y({id:e,variant:t=ke.Dots,gap:r=20,size:n,lineWidth:i=1,offset:a=2,color:o,style:s,className:u}){const f=O.useRef(null),{transform:c,patternId:l}=ne(bE,gE),d=o||mE[t],h=n||_E[t],_=t===ke.Dots,p=t===ke.Cross,g=Array.isArray(r)?r:[r,r],v=[g[0]*c[2]||1,g[1]*c[2]||1],y=h*c[2],b=p?[y,y]:v,m=_?[y/a,y/a]:[b[0]/a,b[1]/a];return L.createElement("svg",{className:he(["react-flow__background",u]),style:{...s,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},L.createElement("pattern",{id:l+e,x:c[0]%v[0],y:c[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${m[0]},-${m[1]})`},_?L.createElement(yE,{color:d,radius:y/a}):L.createElement(vE,{dimensions:b,color:d,lineWidth:i})),L.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${l+e})`}))}$y.displayName="Background";var wE=O.memo($y);function xE({data:e}){const t=e.isContainer;return Ee.jsxs("div",{className:"p-2 rounded text-xs max-w-[240px] text-center",style:{backgroundColor:t?"#e6f2ff":"#fff",border:t?"2px dashed #66aaff":"1px solid #ccc",boxShadow:t?"0 0 10px rgba(102,170,255,0.3)":"0 1px 3px rgba(0,0,0,0.1)",padding:"0.5rem"},children:[Ee.jsx("div",{className:"font-semibold text-sm",children:e.label}),t?Ee.jsx("div",{className:"text-[10px] text-blue-600 mt-1",children:"()"}):e.hasChildren?Ee.jsx("div",{className:"text-[10px] text-blue-500 mt-1",children:"()"}):null,Ee.jsx(It,{type:"target",position:X.Left}),Ee.jsx(It,{type:"source",position:X.Right})]})}function Sc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Rn,Bf;function EE(){if(Bf)return Rn;Bf=1;function e(){this.__data__=[],this.size=0}return Rn=e,Rn}var Cn,Gf;function Tt(){if(Gf)return Cn;Gf=1;function e(t,r){return t===r||t!==t&&r!==r}return Cn=e,Cn}var Nn,Vf;function Gr(){if(Vf)return Nn;Vf=1;var e=Tt();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return Nn=t,Nn}var An,Uf;function SE(){if(Uf)return An;Uf=1;var e=Gr(),t=Array.prototype,r=t.splice;function n(i){var a=this.__data__,o=e(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():r.call(a,o,1),--this.size,!0}return An=n,An}var In,jf;function qE(){if(jf)return In;jf=1;var e=Gr();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return In=t,In}var Tn,Kf;function RE(){if(Kf)return Tn;Kf=1;var e=Gr();function t(r){return e(this.__data__,r)>-1}return Tn=t,Tn}var Mn,Yf;function CE(){if(Yf)return Mn;Yf=1;var e=Gr();function t(r,n){var i=this.__data__,a=e(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return Mn=t,Mn}var kn,Wf;function Vr(){if(Wf)return kn;Wf=1;var e=EE(),t=SE(),r=qE(),n=RE(),i=CE();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,kn=a,kn}var On,Xf;function NE(){if(Xf)return On;Xf=1;var e=Vr();function t(){this.__data__=new e,this.size=0}return On=t,On}var Pn,Zf;function AE(){if(Zf)return Pn;Zf=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Pn=e,Pn}var Dn,Jf;function IE(){if(Jf)return Dn;Jf=1;function e(t){return this.__data__.get(t)}return Dn=e,Dn}var Ln,Qf;function TE(){if(Qf)return Ln;Qf=1;function e(t){return this.__data__.has(t)}return Ln=e,Ln}var $n,el;function Fy(){if(el)return $n;el=1;var e=typeof lr=="object"&&lr&&lr.Object===Object&&lr;return $n=e,$n}var Fn,tl;function De(){if(tl)return Fn;tl=1;var e=Fy(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Fn=r,Fn}var zn,rl;function Mt(){if(rl)return zn;rl=1;var e=De(),t=e.Symbol;return zn=t,zn}var Hn,nl;function ME(){if(nl)return Hn;nl=1;var e=Mt(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function a(o){var s=r.call(o,i),u=o[i];try{o[i]=void 0;var f=!0}catch{}var c=n.call(o);return f&&(s?o[i]=u:delete o[i]),c}return Hn=a,Hn}var Bn,il;function kE(){if(il)return Bn;il=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Bn=r,Bn}var Gn,al;function pt(){if(al)return Gn;al=1;var e=Mt(),t=ME(),r=kE(),n="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function o(s){return s==null?s===void 0?i:n:a&&a in Object(s)?t(s):r(s)}return Gn=o,Gn}var Vn,ol;function Ce(){if(ol)return Vn;ol=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Vn=e,Vn}var Un,sl;function or(){if(sl)return Un;sl=1;var e=pt(),t=Ce(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!t(s))return!1;var u=e(s);return u==n||u==i||u==r||u==a}return Un=o,Un}var jn,ul;function OE(){if(ul)return jn;ul=1;var e=De(),t=e["__core-js_shared__"];return jn=t,jn}var Kn,cl;function PE(){if(cl)return Kn;cl=1;var e=OE(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return Kn=r,Kn}var Yn,fl;function zy(){if(fl)return Yn;fl=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return Yn=r,Yn}var Wn,ll;function DE(){if(ll)return Wn;ll=1;var e=or(),t=PE(),r=Ce(),n=zy(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,f=s.hasOwnProperty,c=RegExp("^"+u.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(d){if(!r(d)||t(d))return!1;var h=e(d)?c:a;return h.test(n(d))}return Wn=l,Wn}var Xn,dl;function LE(){if(dl)return Xn;dl=1;function e(t,r){return t?.[r]}return Xn=e,Xn}var Zn,hl;function gt(){if(hl)return Zn;hl=1;var e=DE(),t=LE();function r(n,i){var a=t(n,i);return e(a)?a:void 0}return Zn=r,Zn}var Jn,pl;function qc(){if(pl)return Jn;pl=1;var e=gt(),t=De(),r=e(t,"Map");return Jn=r,Jn}var Qn,gl;function Ur(){if(gl)return Qn;gl=1;var e=gt(),t=e(Object,"create");return Qn=t,Qn}var ei,vl;function $E(){if(vl)return ei;vl=1;var e=Ur();function t(){this.__data__=e?e(null):{},this.size=0}return ei=t,ei}var ti,yl;function FE(){if(yl)return ti;yl=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return ti=e,ti}var ri,ml;function zE(){if(ml)return ri;ml=1;var e=Ur(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var o=this.__data__;if(e){var s=o[a];return s===t?void 0:s}return n.call(o,a)?o[a]:void 0}return ri=i,ri}var ni,_l;function HE(){if(_l)return ni;_l=1;var e=Ur(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var a=this.__data__;return e?a[i]!==void 0:r.call(a,i)}return ni=n,ni}var ii,bl;function BE(){if(bl)return ii;bl=1;var e=Ur(),t="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=e&&i===void 0?t:i,this}return ii=r,ii}var ai,wl;function GE(){if(wl)return ai;wl=1;var e=$E(),t=FE(),r=zE(),n=HE(),i=BE();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,ai=a,ai}var oi,xl;function VE(){if(xl)return oi;xl=1;var e=GE(),t=Vr(),r=qc();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return oi=n,oi}var si,El;function UE(){if(El)return si;El=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return si=e,si}var ui,Sl;function jr(){if(Sl)return ui;Sl=1;var e=UE();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return ui=t,ui}var ci,ql;function jE(){if(ql)return ci;ql=1;var e=jr();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return ci=t,ci}var fi,Rl;function KE(){if(Rl)return fi;Rl=1;var e=jr();function t(r){return e(this,r).get(r)}return fi=t,fi}var li,Cl;function YE(){if(Cl)return li;Cl=1;var e=jr();function t(r){return e(this,r).has(r)}return li=t,li}var di,Nl;function WE(){if(Nl)return di;Nl=1;var e=jr();function t(r,n){var i=e(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return di=t,di}var hi,Al;function Rc(){if(Al)return hi;Al=1;var e=VE(),t=jE(),r=KE(),n=YE(),i=WE();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,hi=a,hi}var pi,Il;function XE(){if(Il)return pi;Il=1;var e=Vr(),t=qc(),r=Rc(),n=200;function i(a,o){var s=this.__data__;if(s instanceof e){var u=s.__data__;if(!t||u.length<n-1)return u.push([a,o]),this.size=++s.size,this;s=this.__data__=new r(u)}return s.set(a,o),this.size=s.size,this}return pi=i,pi}var gi,Tl;function Kr(){if(Tl)return gi;Tl=1;var e=Vr(),t=NE(),r=AE(),n=IE(),i=TE(),a=XE();function o(s){var u=this.__data__=new e(s);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=a,gi=o,gi}var vi,Ml;function Cc(){if(Ml)return vi;Ml=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return vi=e,vi}var yi,kl;function Hy(){if(kl)return yi;kl=1;var e=gt(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return yi=t,yi}var mi,Ol;function Yr(){if(Ol)return mi;Ol=1;var e=Hy();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return mi=t,mi}var _i,Pl;function Wr(){if(Pl)return _i;Pl=1;var e=Yr(),t=Tt(),r=Object.prototype,n=r.hasOwnProperty;function i(a,o,s){var u=a[o];(!(n.call(a,o)&&t(u,s))||s===void 0&&!(o in a))&&e(a,o,s)}return _i=i,_i}var bi,Dl;function sr(){if(Dl)return bi;Dl=1;var e=Wr(),t=Yr();function r(n,i,a,o){var s=!a;a||(a={});for(var u=-1,f=i.length;++u<f;){var c=i[u],l=o?o(a[c],n[c],c,a,n):void 0;l===void 0&&(l=n[c]),s?t(a,c,l):e(a,c,l)}return a}return bi=r,bi}var wi,Ll;function ZE(){if(Ll)return wi;Ll=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return wi=e,wi}var xi,$l;function Be(){if($l)return xi;$l=1;function e(t){return t!=null&&typeof t=="object"}return xi=e,xi}var Ei,Fl;function JE(){if(Fl)return Ei;Fl=1;var e=pt(),t=Be(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return Ei=n,Ei}var Si,zl;function ur(){if(zl)return Si;zl=1;var e=JE(),t=Be(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(o){return t(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return Si=a,Si}var qi,Hl;function fe(){if(Hl)return qi;Hl=1;var e=Array.isArray;return qi=e,qi}var jt={exports:{}},Ri,Bl;function QE(){if(Bl)return Ri;Bl=1;function e(){return!1}return Ri=e,Ri}jt.exports;var Gl;function kt(){return Gl||(Gl=1,function(e,t){var r=De(),n=QE(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,s=o?r.Buffer:void 0,u=s?s.isBuffer:void 0,f=u||n;e.exports=f}(jt,jt.exports)),jt.exports}var Ci,Vl;function Xr(){if(Vl)return Ci;Vl=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return Ci=r,Ci}var Ni,Ul;function Nc(){if(Ul)return Ni;Ul=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Ni=t,Ni}var Ai,jl;function eS(){if(jl)return Ai;jl=1;var e=pt(),t=Nc(),r=Be(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",u="[object Function]",f="[object Map]",c="[object Number]",l="[object Object]",d="[object RegExp]",h="[object Set]",_="[object String]",p="[object WeakMap]",g="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",m="[object Int8Array]",E="[object Int16Array]",x="[object Int32Array]",S="[object Uint8Array]",N="[object Uint8ClampedArray]",q="[object Uint16Array]",A="[object Uint32Array]",I={};I[y]=I[b]=I[m]=I[E]=I[x]=I[S]=I[N]=I[q]=I[A]=!0,I[n]=I[i]=I[g]=I[a]=I[v]=I[o]=I[s]=I[u]=I[f]=I[c]=I[l]=I[d]=I[h]=I[_]=I[p]=!1;function D(P){return r(P)&&t(P.length)&&!!I[e(P)]}return Ai=D,Ai}var Ii,Kl;function Zr(){if(Kl)return Ii;Kl=1;function e(t){return function(r){return t(r)}}return Ii=e,Ii}var Kt={exports:{}};Kt.exports;var Yl;function Ac(){return Yl||(Yl=1,function(e,t){var r=Fy(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s}(Kt,Kt.exports)),Kt.exports}var Ti,Wl;function cr(){if(Wl)return Ti;Wl=1;var e=eS(),t=Zr(),r=Ac(),n=r&&r.isTypedArray,i=n?t(n):e;return Ti=i,Ti}var Mi,Xl;function By(){if(Xl)return Mi;Xl=1;var e=ZE(),t=ur(),r=fe(),n=kt(),i=Xr(),a=cr(),o=Object.prototype,s=o.hasOwnProperty;function u(f,c){var l=r(f),d=!l&&t(f),h=!l&&!d&&n(f),_=!l&&!d&&!h&&a(f),p=l||d||h||_,g=p?e(f.length,String):[],v=g.length;for(var y in f)(c||s.call(f,y))&&!(p&&(y=="length"||h&&(y=="offset"||y=="parent")||_&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||i(y,v)))&&g.push(y);return g}return Mi=u,Mi}var ki,Zl;function Jr(){if(Zl)return ki;Zl=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return ki=t,ki}var Oi,Jl;function Gy(){if(Jl)return Oi;Jl=1;function e(t,r){return function(n){return t(r(n))}}return Oi=e,Oi}var Pi,Ql;function tS(){if(Ql)return Pi;Ql=1;var e=Gy(),t=e(Object.keys,Object);return Pi=t,Pi}var Di,ed;function Ic(){if(ed)return Di;ed=1;var e=Jr(),t=tS(),r=Object.prototype,n=r.hasOwnProperty;function i(a){if(!e(a))return t(a);var o=[];for(var s in Object(a))n.call(a,s)&&s!="constructor"&&o.push(s);return o}return Di=i,Di}var Li,td;function Xe(){if(td)return Li;td=1;var e=or(),t=Nc();function r(n){return n!=null&&t(n.length)&&!e(n)}return Li=r,Li}var $i,rd;function it(){if(rd)return $i;rd=1;var e=By(),t=Ic(),r=Xe();function n(i){return r(i)?e(i):t(i)}return $i=n,$i}var Fi,nd;function rS(){if(nd)return Fi;nd=1;var e=sr(),t=it();function r(n,i){return n&&e(i,t(i),n)}return Fi=r,Fi}var zi,id;function nS(){if(id)return zi;id=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return zi=e,zi}var Hi,ad;function iS(){if(ad)return Hi;ad=1;var e=Ce(),t=Jr(),r=nS(),n=Object.prototype,i=n.hasOwnProperty;function a(o){if(!e(o))return r(o);var s=t(o),u=[];for(var f in o)f=="constructor"&&(s||!i.call(o,f))||u.push(f);return u}return Hi=a,Hi}var Bi,od;function vt(){if(od)return Bi;od=1;var e=By(),t=iS(),r=Xe();function n(i){return r(i)?e(i,!0):t(i)}return Bi=n,Bi}var Gi,sd;function aS(){if(sd)return Gi;sd=1;var e=sr(),t=vt();function r(n,i){return n&&e(i,t(i),n)}return Gi=r,Gi}var Yt={exports:{}};Yt.exports;var ud;function Vy(){return ud||(ud=1,function(e,t){var r=De(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,o=a?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;function u(f,c){if(c)return f.slice();var l=f.length,d=s?s(l):new f.constructor(l);return f.copy(d),d}e.exports=u}(Yt,Yt.exports)),Yt.exports}var Vi,cd;function Uy(){if(cd)return Vi;cd=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return Vi=e,Vi}var Ui,fd;function jy(){if(fd)return Ui;fd=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=0,o=[];++n<i;){var s=t[n];r(s,n,t)&&(o[a++]=s)}return o}return Ui=e,Ui}var ji,ld;function Ky(){if(ld)return ji;ld=1;function e(){return[]}return ji=e,ji}var Ki,dd;function Tc(){if(dd)return Ki;dd=1;var e=jy(),t=Ky(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(s){return n.call(o,s)}))}:t;return Ki=a,Ki}var Yi,hd;function oS(){if(hd)return Yi;hd=1;var e=sr(),t=Tc();function r(n,i){return e(n,t(n),i)}return Yi=r,Yi}var Wi,pd;function Mc(){if(pd)return Wi;pd=1;function e(t,r){for(var n=-1,i=r.length,a=t.length;++n<i;)t[a+n]=r[n];return t}return Wi=e,Wi}var Xi,gd;function Qr(){if(gd)return Xi;gd=1;var e=Gy(),t=e(Object.getPrototypeOf,Object);return Xi=t,Xi}var Zi,vd;function Yy(){if(vd)return Zi;vd=1;var e=Mc(),t=Qr(),r=Tc(),n=Ky(),i=Object.getOwnPropertySymbols,a=i?function(o){for(var s=[];o;)e(s,r(o)),o=t(o);return s}:n;return Zi=a,Zi}var Ji,yd;function sS(){if(yd)return Ji;yd=1;var e=sr(),t=Yy();function r(n,i){return e(n,t(n),i)}return Ji=r,Ji}var Qi,md;function Wy(){if(md)return Qi;md=1;var e=Mc(),t=fe();function r(n,i,a){var o=i(n);return t(n)?o:e(o,a(n))}return Qi=r,Qi}var ea,_d;function Xy(){if(_d)return ea;_d=1;var e=Wy(),t=Tc(),r=it();function n(i){return e(i,r,t)}return ea=n,ea}var ta,bd;function uS(){if(bd)return ta;bd=1;var e=Wy(),t=Yy(),r=vt();function n(i){return e(i,r,t)}return ta=n,ta}var ra,wd;function cS(){if(wd)return ra;wd=1;var e=gt(),t=De(),r=e(t,"DataView");return ra=r,ra}var na,xd;function fS(){if(xd)return na;xd=1;var e=gt(),t=De(),r=e(t,"Promise");return na=r,na}var ia,Ed;function Zy(){if(Ed)return ia;Ed=1;var e=gt(),t=De(),r=e(t,"Set");return ia=r,ia}var aa,Sd;function lS(){if(Sd)return aa;Sd=1;var e=gt(),t=De(),r=e(t,"WeakMap");return aa=r,aa}var oa,qd;function Ot(){if(qd)return oa;qd=1;var e=cS(),t=qc(),r=fS(),n=Zy(),i=lS(),a=pt(),o=zy(),s="[object Map]",u="[object Object]",f="[object Promise]",c="[object Set]",l="[object WeakMap]",d="[object DataView]",h=o(e),_=o(t),p=o(r),g=o(n),v=o(i),y=a;return(e&&y(new e(new ArrayBuffer(1)))!=d||t&&y(new t)!=s||r&&y(r.resolve())!=f||n&&y(new n)!=c||i&&y(new i)!=l)&&(y=function(b){var m=a(b),E=m==u?b.constructor:void 0,x=E?o(E):"";if(x)switch(x){case h:return d;case _:return s;case p:return f;case g:return c;case v:return l}return m}),oa=y,oa}var sa,Rd;function dS(){if(Rd)return sa;Rd=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return sa=r,sa}var ua,Cd;function Jy(){if(Cd)return ua;Cd=1;var e=De(),t=e.Uint8Array;return ua=t,ua}var ca,Nd;function kc(){if(Nd)return ca;Nd=1;var e=Jy();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return ca=t,ca}var fa,Ad;function hS(){if(Ad)return fa;Ad=1;var e=kc();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return fa=t,fa}var la,Id;function pS(){if(Id)return la;Id=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return la=t,la}var da,Td;function gS(){if(Td)return da;Td=1;var e=Mt(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return da=n,da}var ha,Md;function Qy(){if(Md)return ha;Md=1;var e=kc();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return ha=t,ha}var pa,kd;function vS(){if(kd)return pa;kd=1;var e=kc(),t=hS(),r=pS(),n=gS(),i=Qy(),a="[object Boolean]",o="[object Date]",s="[object Map]",u="[object Number]",f="[object RegExp]",c="[object Set]",l="[object String]",d="[object Symbol]",h="[object ArrayBuffer]",_="[object DataView]",p="[object Float32Array]",g="[object Float64Array]",v="[object Int8Array]",y="[object Int16Array]",b="[object Int32Array]",m="[object Uint8Array]",E="[object Uint8ClampedArray]",x="[object Uint16Array]",S="[object Uint32Array]";function N(q,A,I){var D=q.constructor;switch(A){case h:return e(q);case a:case o:return new D(+q);case _:return t(q,I);case p:case g:case v:case y:case b:case m:case E:case x:case S:return i(q,I);case s:return new D;case u:case l:return new D(q);case f:return r(q);case c:return new D;case d:return n(q)}}return pa=N,pa}var ga,Od;function em(){if(Od)return ga;Od=1;var e=Ce(),t=Object.create,r=function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}}();return ga=r,ga}var va,Pd;function tm(){if(Pd)return va;Pd=1;var e=em(),t=Qr(),r=Jr();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return va=n,va}var ya,Dd;function yS(){if(Dd)return ya;Dd=1;var e=Ot(),t=Be(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return ya=n,ya}var ma,Ld;function mS(){if(Ld)return ma;Ld=1;var e=yS(),t=Zr(),r=Ac(),n=r&&r.isMap,i=n?t(n):e;return ma=i,ma}var _a,$d;function _S(){if($d)return _a;$d=1;var e=Ot(),t=Be(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return _a=n,_a}var ba,Fd;function bS(){if(Fd)return ba;Fd=1;var e=_S(),t=Zr(),r=Ac(),n=r&&r.isSet,i=n?t(n):e;return ba=i,ba}var wa,zd;function rm(){if(zd)return wa;zd=1;var e=Kr(),t=Cc(),r=Wr(),n=rS(),i=aS(),a=Vy(),o=Uy(),s=oS(),u=sS(),f=Xy(),c=uS(),l=Ot(),d=dS(),h=vS(),_=tm(),p=fe(),g=kt(),v=mS(),y=Ce(),b=bS(),m=it(),E=vt(),x=1,S=2,N=4,q="[object Arguments]",A="[object Array]",I="[object Boolean]",D="[object Date]",P="[object Error]",w="[object Function]",T="[object GeneratorFunction]",C="[object Map]",F="[object Number]",H="[object Object]",M="[object RegExp]",z="[object Set]",G="[object String]",V="[object Symbol]",U="[object WeakMap]",R="[object ArrayBuffer]",k="[object DataView]",$="[object Float32Array]",B="[object Float64Array]",j="[object Int8Array]",W="[object Int16Array]",Z="[object Int32Array]",te="[object Uint8Array]",ie="[object Uint8ClampedArray]",re="[object Uint16Array]",ee="[object Uint32Array]",J={};J[q]=J[A]=J[R]=J[k]=J[I]=J[D]=J[$]=J[B]=J[j]=J[W]=J[Z]=J[C]=J[F]=J[H]=J[M]=J[z]=J[G]=J[V]=J[te]=J[ie]=J[re]=J[ee]=!0,J[P]=J[w]=J[U]=!1;function ue(K,Y,oe,Ae,Le,ge){var ce,ye=Y&x,Ie=Y&S,Ge=Y&N;if(oe&&(ce=Le?oe(K,Ae,Le,ge):oe(K)),ce!==void 0)return ce;if(!y(K))return K;var $e=p(K);if($e){if(ce=d(K),!ye)return o(K,ce)}else{var we=l(K),Ve=we==w||we==T;if(g(K))return a(K,ye);if(we==H||we==q||Ve&&!Le){if(ce=Ie||Ve?{}:_(K),!ye)return Ie?u(K,i(ce,K)):s(K,n(ce,K))}else{if(!J[we])return Le?K:{};ce=h(K,we,ye)}}ge||(ge=new e);var Je=ge.get(K);if(Je)return Je;ge.set(K,ce),b(K)?K.forEach(function(pe){ce.add(ue(pe,Y,oe,pe,K,ge))}):v(K)&&K.forEach(function(pe,ve){ce.set(ve,ue(pe,Y,oe,ve,K,ge))});var de=Ge?Ie?c:f:Ie?E:m,xe=$e?void 0:de(K);return t(xe||K,function(pe,ve){xe&&(ve=pe,pe=K[ve]),r(ce,ve,ue(pe,Y,oe,ve,K,ge))}),ce}return wa=ue,wa}var xa,Hd;function wS(){if(Hd)return xa;Hd=1;var e=rm(),t=4;function r(n){return e(n,t)}return xa=r,xa}var Ea,Bd;function Oc(){if(Bd)return Ea;Bd=1;function e(t){return function(){return t}}return Ea=e,Ea}var Sa,Gd;function xS(){if(Gd)return Sa;Gd=1;function e(t){return function(r,n,i){for(var a=-1,o=Object(r),s=i(r),u=s.length;u--;){var f=s[t?u:++a];if(n(o[f],f,o)===!1)break}return r}}return Sa=e,Sa}var qa,Vd;function Pc(){if(Vd)return qa;Vd=1;var e=xS(),t=e();return qa=t,qa}var Ra,Ud;function Dc(){if(Ud)return Ra;Ud=1;var e=Pc(),t=it();function r(n,i){return n&&e(n,i,t)}return Ra=r,Ra}var Ca,jd;function ES(){if(jd)return Ca;jd=1;var e=Xe();function t(r,n){return function(i,a){if(i==null)return i;if(!e(i))return r(i,a);for(var o=i.length,s=n?o:-1,u=Object(i);(n?s--:++s<o)&&a(u[s],s,u)!==!1;);return i}}return Ca=t,Ca}var Na,Kd;function en(){if(Kd)return Na;Kd=1;var e=Dc(),t=ES(),r=t(e);return Na=r,Na}var Aa,Yd;function yt(){if(Yd)return Aa;Yd=1;function e(t){return t}return Aa=e,Aa}var Ia,Wd;function nm(){if(Wd)return Ia;Wd=1;var e=yt();function t(r){return typeof r=="function"?r:e}return Ia=t,Ia}var Ta,Xd;function im(){if(Xd)return Ta;Xd=1;var e=Cc(),t=en(),r=nm(),n=fe();function i(a,o){var s=n(a)?e:t;return s(a,r(o))}return Ta=i,Ta}var Ma,Zd;function am(){return Zd||(Zd=1,Ma=im()),Ma}var ka,Jd;function SS(){if(Jd)return ka;Jd=1;var e=en();function t(r,n){var i=[];return e(r,function(a,o,s){n(a,o,s)&&i.push(a)}),i}return ka=t,ka}var Oa,Qd;function qS(){if(Qd)return Oa;Qd=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Oa=t,Oa}var Pa,eh;function RS(){if(eh)return Pa;eh=1;function e(t){return this.__data__.has(t)}return Pa=e,Pa}var Da,th;function om(){if(th)return Da;th=1;var e=Rc(),t=qS(),r=RS();function n(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new e;++a<o;)this.add(i[a])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,Da=n,Da}var La,rh;function CS(){if(rh)return La;rh=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return La=e,La}var $a,nh;function sm(){if(nh)return $a;nh=1;function e(t,r){return t.has(r)}return $a=e,$a}var Fa,ih;function um(){if(ih)return Fa;ih=1;var e=om(),t=CS(),r=sm(),n=1,i=2;function a(o,s,u,f,c,l){var d=u&n,h=o.length,_=s.length;if(h!=_&&!(d&&_>h))return!1;var p=l.get(o),g=l.get(s);if(p&&g)return p==s&&g==o;var v=-1,y=!0,b=u&i?new e:void 0;for(l.set(o,s),l.set(s,o);++v<h;){var m=o[v],E=s[v];if(f)var x=d?f(E,m,v,s,o,l):f(m,E,v,o,s,l);if(x!==void 0){if(x)continue;y=!1;break}if(b){if(!t(s,function(S,N){if(!r(b,N)&&(m===S||c(m,S,u,f,l)))return b.push(N)})){y=!1;break}}else if(!(m===E||c(m,E,u,f,l))){y=!1;break}}return l.delete(o),l.delete(s),y}return Fa=a,Fa}var za,ah;function NS(){if(ah)return za;ah=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,a){n[++r]=[a,i]}),n}return za=e,za}var Ha,oh;function Lc(){if(oh)return Ha;oh=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return Ha=e,Ha}var Ba,sh;function AS(){if(sh)return Ba;sh=1;var e=Mt(),t=Jy(),r=Tt(),n=um(),i=NS(),a=Lc(),o=1,s=2,u="[object Boolean]",f="[object Date]",c="[object Error]",l="[object Map]",d="[object Number]",h="[object RegExp]",_="[object Set]",p="[object String]",g="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",b=e?e.prototype:void 0,m=b?b.valueOf:void 0;function E(x,S,N,q,A,I,D){switch(N){case y:if(x.byteLength!=S.byteLength||x.byteOffset!=S.byteOffset)return!1;x=x.buffer,S=S.buffer;case v:return!(x.byteLength!=S.byteLength||!I(new t(x),new t(S)));case u:case f:case d:return r(+x,+S);case c:return x.name==S.name&&x.message==S.message;case h:case p:return x==S+"";case l:var P=i;case _:var w=q&o;if(P||(P=a),x.size!=S.size&&!w)return!1;var T=D.get(x);if(T)return T==S;q|=s,D.set(x,S);var C=n(P(x),P(S),q,A,I,D);return D.delete(x),C;case g:if(m)return m.call(x)==m.call(S)}return!1}return Ba=E,Ba}var Ga,uh;function IS(){if(uh)return Ga;uh=1;var e=Xy(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(a,o,s,u,f,c){var l=s&t,d=e(a),h=d.length,_=e(o),p=_.length;if(h!=p&&!l)return!1;for(var g=h;g--;){var v=d[g];if(!(l?v in o:n.call(o,v)))return!1}var y=c.get(a),b=c.get(o);if(y&&b)return y==o&&b==a;var m=!0;c.set(a,o),c.set(o,a);for(var E=l;++g<h;){v=d[g];var x=a[v],S=o[v];if(u)var N=l?u(S,x,v,o,a,c):u(x,S,v,a,o,c);if(!(N===void 0?x===S||f(x,S,s,u,c):N)){m=!1;break}E||(E=v=="constructor")}if(m&&!E){var q=a.constructor,A=o.constructor;q!=A&&"constructor"in a&&"constructor"in o&&!(typeof q=="function"&&q instanceof q&&typeof A=="function"&&A instanceof A)&&(m=!1)}return c.delete(a),c.delete(o),m}return Ga=i,Ga}var Va,ch;function TS(){if(ch)return Va;ch=1;var e=Kr(),t=um(),r=AS(),n=IS(),i=Ot(),a=fe(),o=kt(),s=cr(),u=1,f="[object Arguments]",c="[object Array]",l="[object Object]",d=Object.prototype,h=d.hasOwnProperty;function _(p,g,v,y,b,m){var E=a(p),x=a(g),S=E?c:i(p),N=x?c:i(g);S=S==f?l:S,N=N==f?l:N;var q=S==l,A=N==l,I=S==N;if(I&&o(p)){if(!o(g))return!1;E=!0,q=!1}if(I&&!q)return m||(m=new e),E||s(p)?t(p,g,v,y,b,m):r(p,g,S,v,y,b,m);if(!(v&u)){var D=q&&h.call(p,"__wrapped__"),P=A&&h.call(g,"__wrapped__");if(D||P){var w=D?p.value():p,T=P?g.value():g;return m||(m=new e),b(w,T,v,y,m)}}return I?(m||(m=new e),n(p,g,v,y,b,m)):!1}return Va=_,Va}var Ua,fh;function cm(){if(fh)return Ua;fh=1;var e=TS(),t=Be();function r(n,i,a,o,s){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,a,o,r,s)}return Ua=r,Ua}var ja,lh;function MS(){if(lh)return ja;lh=1;var e=Kr(),t=cm(),r=1,n=2;function i(a,o,s,u){var f=s.length,c=f,l=!u;if(a==null)return!c;for(a=Object(a);f--;){var d=s[f];if(l&&d[2]?d[1]!==a[d[0]]:!(d[0]in a))return!1}for(;++f<c;){d=s[f];var h=d[0],_=a[h],p=d[1];if(l&&d[2]){if(_===void 0&&!(h in a))return!1}else{var g=new e;if(u)var v=u(_,p,h,a,o,g);if(!(v===void 0?t(p,_,r|n,u,g):v))return!1}}return!0}return ja=i,ja}var Ka,dh;function fm(){if(dh)return Ka;dh=1;var e=Ce();function t(r){return r===r&&!e(r)}return Ka=t,Ka}var Ya,hh;function kS(){if(hh)return Ya;hh=1;var e=fm(),t=it();function r(n){for(var i=t(n),a=i.length;a--;){var o=i[a],s=n[o];i[a]=[o,s,e(s)]}return i}return Ya=r,Ya}var Wa,ph;function lm(){if(ph)return Wa;ph=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return Wa=e,Wa}var Xa,gh;function OS(){if(gh)return Xa;gh=1;var e=MS(),t=kS(),r=lm();function n(i){var a=t(i);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(o){return o===i||e(o,i,a)}}return Xa=n,Xa}var Za,vh;function Pt(){if(vh)return Za;vh=1;var e=pt(),t=Be(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return Za=n,Za}var Ja,yh;function $c(){if(yh)return Ja;yh=1;var e=fe(),t=Pt(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){if(e(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||t(a)?!0:n.test(a)||!r.test(a)||o!=null&&a in Object(o)}return Ja=i,Ja}var Qa,mh;function PS(){if(mh)return Qa;mh=1;var e=Rc(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],u=a.cache;if(u.has(s))return u.get(s);var f=n.apply(this,o);return a.cache=u.set(s,f)||u,f};return a.cache=new(r.Cache||e),a}return r.Cache=e,Qa=r,Qa}var eo,_h;function DS(){if(_h)return eo;_h=1;var e=PS(),t=500;function r(n){var i=e(n,function(o){return a.size===t&&a.clear(),o}),a=i.cache;return i}return eo=r,eo}var to,bh;function LS(){if(bh)return to;bh=1;var e=DS(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(o,s,u,f){a.push(u?f.replace(r,"$1"):s||o)}),a});return to=n,to}var ro,wh;function tn(){if(wh)return ro;wh=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=Array(i);++n<i;)a[n]=r(t[n],n,t);return a}return ro=e,ro}var no,xh;function $S(){if(xh)return no;xh=1;var e=Mt(),t=tn(),r=fe(),n=Pt(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(r(s))return t(s,o)+"";if(n(s))return a?a.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return no=o,no}var io,Eh;function dm(){if(Eh)return io;Eh=1;var e=$S();function t(r){return r==null?"":e(r)}return io=t,io}var ao,Sh;function rn(){if(Sh)return ao;Sh=1;var e=fe(),t=$c(),r=LS(),n=dm();function i(a,o){return e(a)?a:t(a,o)?[a]:r(n(a))}return ao=i,ao}var oo,qh;function fr(){if(qh)return oo;qh=1;var e=Pt();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return oo=t,oo}var so,Rh;function nn(){if(Rh)return so;Rh=1;var e=rn(),t=fr();function r(n,i){i=e(i,n);for(var a=0,o=i.length;n!=null&&a<o;)n=n[t(i[a++])];return a&&a==o?n:void 0}return so=r,so}var uo,Ch;function FS(){if(Ch)return uo;Ch=1;var e=nn();function t(r,n,i){var a=r==null?void 0:e(r,n);return a===void 0?i:a}return uo=t,uo}var co,Nh;function zS(){if(Nh)return co;Nh=1;function e(t,r){return t!=null&&r in Object(t)}return co=e,co}var fo,Ah;function hm(){if(Ah)return fo;Ah=1;var e=rn(),t=ur(),r=fe(),n=Xr(),i=Nc(),a=fr();function o(s,u,f){u=e(u,s);for(var c=-1,l=u.length,d=!1;++c<l;){var h=a(u[c]);if(!(d=s!=null&&f(s,h)))break;s=s[h]}return d||++c!=l?d:(l=s==null?0:s.length,!!l&&i(l)&&n(h,l)&&(r(s)||t(s)))}return fo=o,fo}var lo,Ih;function pm(){if(Ih)return lo;Ih=1;var e=zS(),t=hm();function r(n,i){return n!=null&&t(n,i,e)}return lo=r,lo}var ho,Th;function HS(){if(Th)return ho;Th=1;var e=cm(),t=FS(),r=pm(),n=$c(),i=fm(),a=lm(),o=fr(),s=1,u=2;function f(c,l){return n(c)&&i(l)?a(o(c),l):function(d){var h=t(d,c);return h===void 0&&h===l?r(d,c):e(l,h,s|u)}}return ho=f,ho}var po,Mh;function gm(){if(Mh)return po;Mh=1;function e(t){return function(r){return r?.[t]}}return po=e,po}var go,kh;function BS(){if(kh)return go;kh=1;var e=nn();function t(r){return function(n){return e(n,r)}}return go=t,go}var vo,Oh;function GS(){if(Oh)return vo;Oh=1;var e=gm(),t=BS(),r=$c(),n=fr();function i(a){return r(a)?e(n(a)):t(a)}return vo=i,vo}var yo,Ph;function Ze(){if(Ph)return yo;Ph=1;var e=OS(),t=HS(),r=yt(),n=fe(),i=GS();function a(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):i(o)}return yo=a,yo}var mo,Dh;function vm(){if(Dh)return mo;Dh=1;var e=jy(),t=SS(),r=Ze(),n=fe();function i(a,o){var s=n(a)?e:t;return s(a,r(o,3))}return mo=i,mo}var _o,Lh;function VS(){if(Lh)return _o;Lh=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,i){return n!=null&&t.call(n,i)}return _o=r,_o}var bo,$h;function ym(){if($h)return bo;$h=1;var e=VS(),t=hm();function r(n,i){return n!=null&&t(n,i,e)}return bo=r,bo}var wo,Fh;function US(){if(Fh)return wo;Fh=1;var e=Ic(),t=Ot(),r=ur(),n=fe(),i=Xe(),a=kt(),o=Jr(),s=cr(),u="[object Map]",f="[object Set]",c=Object.prototype,l=c.hasOwnProperty;function d(h){if(h==null)return!0;if(i(h)&&(n(h)||typeof h=="string"||typeof h.splice=="function"||a(h)||s(h)||r(h)))return!h.length;var _=t(h);if(_==u||_==f)return!h.size;if(o(h))return!e(h).length;for(var p in h)if(l.call(h,p))return!1;return!0}return wo=d,wo}var xo,zh;function mm(){if(zh)return xo;zh=1;function e(t){return t===void 0}return xo=e,xo}var Eo,Hh;function _m(){if(Hh)return Eo;Hh=1;var e=en(),t=Xe();function r(n,i){var a=-1,o=t(n)?Array(n.length):[];return e(n,function(s,u,f){o[++a]=i(s,u,f)}),o}return Eo=r,Eo}var So,Bh;function bm(){if(Bh)return So;Bh=1;var e=tn(),t=Ze(),r=_m(),n=fe();function i(a,o){var s=n(a)?e:r;return s(a,t(o,3))}return So=i,So}var qo,Gh;function jS(){if(Gh)return qo;Gh=1;function e(t,r,n,i){var a=-1,o=t==null?0:t.length;for(i&&o&&(n=t[++a]);++a<o;)n=r(n,t[a],a,t);return n}return qo=e,qo}var Ro,Vh;function KS(){if(Vh)return Ro;Vh=1;function e(t,r,n,i,a){return a(t,function(o,s,u){n=i?(i=!1,o):r(n,o,s,u)}),n}return Ro=e,Ro}var Co,Uh;function wm(){if(Uh)return Co;Uh=1;var e=jS(),t=en(),r=Ze(),n=KS(),i=fe();function a(o,s,u){var f=i(o)?e:n,c=arguments.length<3;return f(o,r(s,4),u,c,t)}return Co=a,Co}var No,jh;function YS(){if(jh)return No;jh=1;var e=pt(),t=fe(),r=Be(),n="[object String]";function i(a){return typeof a=="string"||!t(a)&&r(a)&&e(a)==n}return No=i,No}var Ao,Kh;function WS(){if(Kh)return Ao;Kh=1;var e=gm(),t=e("length");return Ao=t,Ao}var Io,Yh;function XS(){if(Yh)return Io;Yh=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+e+i+a+"]");function u(f){return s.test(f)}return Io=u,Io}var To,Wh;function ZS(){if(Wh)return To;Wh=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\ufe0e\\ufe0f",o="["+e+"]",s="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",f="(?:"+s+"|"+u+")",c="[^"+e+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",_=f+"?",p="["+a+"]?",g="(?:"+h+"(?:"+[c,l,d].join("|")+")"+p+_+")*",v=p+_+g,y="(?:"+[c+s+"?",s,l,d,o].join("|")+")",b=RegExp(u+"(?="+u+")|"+y+v,"g");function m(E){for(var x=b.lastIndex=0;b.test(E);)++x;return x}return To=m,To}var Mo,Xh;function JS(){if(Xh)return Mo;Xh=1;var e=WS(),t=XS(),r=ZS();function n(i){return t(i)?r(i):e(i)}return Mo=n,Mo}var ko,Zh;function QS(){if(Zh)return ko;Zh=1;var e=Ic(),t=Ot(),r=Xe(),n=YS(),i=JS(),a="[object Map]",o="[object Set]";function s(u){if(u==null)return 0;if(r(u))return n(u)?i(u):u.length;var f=t(u);return f==a||f==o?u.size:e(u).length}return ko=s,ko}var Oo,Jh;function eq(){if(Jh)return Oo;Jh=1;var e=Cc(),t=em(),r=Dc(),n=Ze(),i=Qr(),a=fe(),o=kt(),s=or(),u=Ce(),f=cr();function c(l,d,h){var _=a(l),p=_||o(l)||f(l);if(d=n(d,4),h==null){var g=l&&l.constructor;p?h=_?new g:[]:u(l)?h=s(g)?t(i(l)):{}:h={}}return(p?e:r)(l,function(v,y,b){return d(h,v,y,b)}),h}return Oo=c,Oo}var Po,Qh;function tq(){if(Qh)return Po;Qh=1;var e=Mt(),t=ur(),r=fe(),n=e?e.isConcatSpreadable:void 0;function i(a){return r(a)||t(a)||!!(n&&a&&a[n])}return Po=i,Po}var Do,ep;function Fc(){if(ep)return Do;ep=1;var e=Mc(),t=tq();function r(n,i,a,o,s){var u=-1,f=n.length;for(a||(a=t),s||(s=[]);++u<f;){var c=n[u];i>0&&a(c)?i>1?r(c,i-1,a,o,s):e(s,c):o||(s[s.length]=c)}return s}return Do=r,Do}var Lo,tp;function rq(){if(tp)return Lo;tp=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return Lo=e,Lo}var $o,rp;function xm(){if(rp)return $o;rp=1;var e=rq(),t=Math.max;function r(n,i,a){return i=t(i===void 0?n.length-1:i,0),function(){for(var o=arguments,s=-1,u=t(o.length-i,0),f=Array(u);++s<u;)f[s]=o[i+s];s=-1;for(var c=Array(i+1);++s<i;)c[s]=o[s];return c[i]=a(f),e(n,this,c)}}return $o=r,$o}var Fo,np;function nq(){if(np)return Fo;np=1;var e=Oc(),t=Hy(),r=yt(),n=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:r;return Fo=n,Fo}var zo,ip;function iq(){if(ip)return zo;ip=1;var e=800,t=16,r=Date.now;function n(i){var a=0,o=0;return function(){var s=r(),u=t-(s-o);if(o=s,u>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return zo=n,zo}var Ho,ap;function Em(){if(ap)return Ho;ap=1;var e=nq(),t=iq(),r=t(e);return Ho=r,Ho}var Bo,op;function an(){if(op)return Bo;op=1;var e=yt(),t=xm(),r=Em();function n(i,a){return r(t(i,a,e),i+"")}return Bo=n,Bo}var Go,sp;function Sm(){if(sp)return Go;sp=1;function e(t,r,n,i){for(var a=t.length,o=n+(i?1:-1);i?o--:++o<a;)if(r(t[o],o,t))return o;return-1}return Go=e,Go}var Vo,up;function aq(){if(up)return Vo;up=1;function e(t){return t!==t}return Vo=e,Vo}var Uo,cp;function oq(){if(cp)return Uo;cp=1;function e(t,r,n){for(var i=n-1,a=t.length;++i<a;)if(t[i]===r)return i;return-1}return Uo=e,Uo}var jo,fp;function sq(){if(fp)return jo;fp=1;var e=Sm(),t=aq(),r=oq();function n(i,a,o){return a===a?r(i,a,o):e(i,t,o)}return jo=n,jo}var Ko,lp;function uq(){if(lp)return Ko;lp=1;var e=sq();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return Ko=t,Ko}var Yo,dp;function cq(){if(dp)return Yo;dp=1;function e(t,r,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(n(r,t[i]))return!0;return!1}return Yo=e,Yo}var Wo,hp;function fq(){if(hp)return Wo;hp=1;function e(){}return Wo=e,Wo}var Xo,pp;function lq(){if(pp)return Xo;pp=1;var e=Zy(),t=fq(),r=Lc(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(a){return new e(a)}:t;return Xo=i,Xo}var Zo,gp;function dq(){if(gp)return Zo;gp=1;var e=om(),t=uq(),r=cq(),n=sm(),i=lq(),a=Lc(),o=200;function s(u,f,c){var l=-1,d=t,h=u.length,_=!0,p=[],g=p;if(c)_=!1,d=r;else if(h>=o){var v=f?null:i(u);if(v)return a(v);_=!1,d=n,g=new e}else g=f?[]:p;e:for(;++l<h;){var y=u[l],b=f?f(y):y;if(y=c||y!==0?y:0,_&&b===b){for(var m=g.length;m--;)if(g[m]===b)continue e;f&&g.push(b),p.push(y)}else d(g,b,c)||(g!==p&&g.push(b),p.push(y))}return p}return Zo=s,Zo}var Jo,vp;function qm(){if(vp)return Jo;vp=1;var e=Xe(),t=Be();function r(n){return t(n)&&e(n)}return Jo=r,Jo}var Qo,yp;function hq(){if(yp)return Qo;yp=1;var e=Fc(),t=an(),r=dq(),n=qm(),i=t(function(a){return r(e(a,1,n,!0))});return Qo=i,Qo}var es,mp;function pq(){if(mp)return es;mp=1;var e=tn();function t(r,n){return e(n,function(i){return r[i]})}return es=t,es}var ts,_p;function Rm(){if(_p)return ts;_p=1;var e=pq(),t=it();function r(n){return n==null?[]:e(n,t(n))}return ts=r,ts}var rs,bp;function Ne(){if(bp)return rs;bp=1;var e;if(typeof Sc=="function")try{e={clone:wS(),constant:Oc(),each:am(),filter:vm(),has:ym(),isArray:fe(),isEmpty:US(),isFunction:or(),isUndefined:mm(),keys:it(),map:bm(),reduce:wm(),size:QS(),transform:eq(),union:hq(),values:Rm()}}catch{}return e||(e=window._),rs=e,rs}var ns,wp;function zc(){if(wp)return ns;wp=1;var e=Ne();ns=i;var t="\0",r="\0",n="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(l){return e.isEmpty(c._in[l])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(l){return e.isEmpty(c._out[l])})},i.prototype.setNodes=function(c,l){var d=arguments,h=this;return e.each(c,function(_){d.length>1?h.setNode(_,l):h.setNode(_)}),this},i.prototype.setNode=function(c,l){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=l),this):(this._nodes[c]=arguments.length>1?l:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=r,this._children[c]={},this._children[r][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var l=this;if(e.has(this._nodes,c)){var d=function(h){l.removeEdge(l._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){l.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),d),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),d),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,l){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(l))l=r;else{l+="";for(var d=l;!e.isUndefined(d);d=this.parent(d))if(d===c)throw new Error("Setting "+l+" as parent of "+c+" would create a cycle");this.setNode(l)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=l,this._children[l][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var l=this._parent[c];if(l!==r)return l}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=r),this._isCompound){var l=this._children[c];if(l)return e.keys(l)}else{if(c===r)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var l=this._preds[c];if(l)return e.keys(l)},i.prototype.successors=function(c){var l=this._sucs[c];if(l)return e.keys(l)},i.prototype.neighbors=function(c){var l=this.predecessors(c);if(l)return e.union(l,this.successors(c))},i.prototype.isLeaf=function(c){var l;return this.isDirected()?l=this.successors(c):l=this.neighbors(c),l.length===0},i.prototype.filterNodes=function(c){var l=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});l.setGraph(this.graph());var d=this;e.each(this._nodes,function(p,g){c(g)&&l.setNode(g,p)}),e.each(this._edgeObjs,function(p){l.hasNode(p.v)&&l.hasNode(p.w)&&l.setEdge(p,d.edge(p))});var h={};function _(p){var g=d.parent(p);return g===void 0||l.hasNode(g)?(h[p]=g,g):g in h?h[g]:_(g)}return this._isCompound&&e.each(l.nodes(),function(p){l.setParent(p,_(p))}),l},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,l){var d=this,h=arguments;return e.reduce(c,function(_,p){return h.length>1?d.setEdge(_,p,l):d.setEdge(_,p),p}),this},i.prototype.setEdge=function(){var c,l,d,h,_=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,l=p.w,d=p.name,arguments.length===2&&(h=arguments[1],_=!0)):(c=p,l=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],_=!0)),c=""+c,l=""+l,e.isUndefined(d)||(d=""+d);var g=s(this._isDirected,c,l,d);if(e.has(this._edgeLabels,g))return _&&(this._edgeLabels[g]=h),this;if(!e.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(l),this._edgeLabels[g]=_?h:this._defaultEdgeLabelFn(c,l,d);var v=u(this._isDirected,c,l,d);return c=v.v,l=v.w,Object.freeze(v),this._edgeObjs[g]=v,a(this._preds[l],c),a(this._sucs[c],l),this._in[l][g]=v,this._out[c][g]=v,this._edgeCount++,this},i.prototype.edge=function(c,l,d){var h=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,l,d);return this._edgeLabels[h]},i.prototype.hasEdge=function(c,l,d){var h=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,l,d);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(c,l,d){var h=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,l,d),_=this._edgeObjs[h];return _&&(c=_.v,l=_.w,delete this._edgeLabels[h],delete this._edgeObjs[h],o(this._preds[l],c),o(this._sucs[c],l),delete this._in[l][h],delete this._out[c][h],this._edgeCount--),this},i.prototype.inEdges=function(c,l){var d=this._in[c];if(d){var h=e.values(d);return l?e.filter(h,function(_){return _.v===l}):h}},i.prototype.outEdges=function(c,l){var d=this._out[c];if(d){var h=e.values(d);return l?e.filter(h,function(_){return _.w===l}):h}},i.prototype.nodeEdges=function(c,l){var d=this.inEdges(c,l);if(d)return d.concat(this.outEdges(c,l))};function a(c,l){c[l]?c[l]++:c[l]=1}function o(c,l){--c[l]||delete c[l]}function s(c,l,d,h){var _=""+l,p=""+d;if(!c&&_>p){var g=_;_=p,p=g}return _+n+p+n+(e.isUndefined(h)?t:h)}function u(c,l,d,h){var _=""+l,p=""+d;if(!c&&_>p){var g=_;_=p,p=g}var v={v:_,w:p};return h&&(v.name=h),v}function f(c,l){return s(c,l.v,l.w,l.name)}return ns}var is,xp;function gq(){return xp||(xp=1,is="2.1.8"),is}var as,Ep;function vq(){return Ep||(Ep=1,as={Graph:zc(),version:gq()}),as}var os,Sp;function yq(){if(Sp)return os;Sp=1;var e=Ne(),t=zc();os={write:r,read:a};function r(o){var s={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:i(o)};return e.isUndefined(o.graph())||(s.value=e.clone(o.graph())),s}function n(o){return e.map(o.nodes(),function(s){var u=o.node(s),f=o.parent(s),c={v:s};return e.isUndefined(u)||(c.value=u),e.isUndefined(f)||(c.parent=f),c})}function i(o){return e.map(o.edges(),function(s){var u=o.edge(s),f={v:s.v,w:s.w};return e.isUndefined(s.name)||(f.name=s.name),e.isUndefined(u)||(f.value=u),f})}function a(o){var s=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),e.each(o.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return os}var ss,qp;function mq(){if(qp)return ss;qp=1;var e=Ne();ss=t;function t(r){var n={},i=[],a;function o(s){e.has(n,s)||(n[s]=!0,a.push(s),e.each(r.successors(s),o),e.each(r.predecessors(s),o))}return e.each(r.nodes(),function(s){a=[],o(s),a.length&&i.push(a)}),i}return ss}var us,Rp;function Cm(){if(Rp)return us;Rp=1;var e=Ne();us=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!e.has(i,r)){var a=this._arr,o=a.length;return i[r]=o,a.push({key:r,priority:n}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},t.prototype._heapify=function(r){var n=this._arr,i=2*r,a=i+1,o=r;i<n.length&&(o=n[i].priority<n[o].priority?i:o,a<n.length&&(o=n[a].priority<n[o].priority?a:o),o!==r&&(this._swap(r,o),this._heapify(o)))},t.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,a;r!==0&&(a=r>>1,!(n[a].priority<i));)this._swap(r,a),r=a},t.prototype._swap=function(r,n){var i=this._arr,a=this._keyIndices,o=i[r],s=i[n];i[r]=s,i[n]=o,a[s.key]=r,a[o.key]=n},us}var cs,Cp;function Nm(){if(Cp)return cs;Cp=1;var e=Ne(),t=Cm();cs=n;var r=e.constant(1);function n(a,o,s,u){return i(a,String(o),s||r,u||function(f){return a.outEdges(f)})}function i(a,o,s,u){var f={},c=new t,l,d,h=function(_){var p=_.v!==l?_.v:_.w,g=f[p],v=s(_),y=d.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+_+" Weight: "+v);y<g.distance&&(g.distance=y,g.predecessor=l,c.decrease(p,y))};for(a.nodes().forEach(function(_){var p=_===o?0:Number.POSITIVE_INFINITY;f[_]={distance:p},c.add(_,p)});c.size()>0&&(l=c.removeMin(),d=f[l],d.distance!==Number.POSITIVE_INFINITY);)u(l).forEach(h);return f}return cs}var fs,Np;function _q(){if(Np)return fs;Np=1;var e=Nm(),t=Ne();fs=r;function r(n,i,a){return t.transform(n.nodes(),function(o,s){o[s]=e(n,s,i,a)},{})}return fs}var ls,Ap;function Am(){if(Ap)return ls;Ap=1;var e=Ne();ls=t;function t(r){var n=0,i=[],a={},o=[];function s(u){var f=a[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),r.successors(u).forEach(function(d){e.has(a,d)?a[d].onStack&&(f.lowlink=Math.min(f.lowlink,a[d].index)):(s(d),f.lowlink=Math.min(f.lowlink,a[d].lowlink))}),f.lowlink===f.index){var c=[],l;do l=i.pop(),a[l].onStack=!1,c.push(l);while(u!==l);o.push(c)}}return r.nodes().forEach(function(u){e.has(a,u)||s(u)}),o}return ls}var ds,Ip;function bq(){if(Ip)return ds;Ip=1;var e=Ne(),t=Am();ds=r;function r(n){return e.filter(t(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return ds}var hs,Tp;function wq(){if(Tp)return hs;Tp=1;var e=Ne();hs=r;var t=e.constant(1);function r(i,a,o){return n(i,a||t,o||function(s){return i.outEdges(s)})}function n(i,a,o){var s={},u=i.nodes();return u.forEach(function(f){s[f]={},s[f][f]={distance:0},u.forEach(function(c){f!==c&&(s[f][c]={distance:Number.POSITIVE_INFINITY})}),o(f).forEach(function(c){var l=c.v===f?c.w:c.v,d=a(c);s[f][l]={distance:d,predecessor:f}})}),u.forEach(function(f){var c=s[f];u.forEach(function(l){var d=s[l];u.forEach(function(h){var _=d[f],p=c[h],g=d[h],v=_.distance+p.distance;v<g.distance&&(g.distance=v,g.predecessor=p.predecessor)})})}),s}return hs}var ps,Mp;function Im(){if(Mp)return ps;Mp=1;var e=Ne();ps=t,t.CycleException=r;function t(n){var i={},a={},o=[];function s(u){if(e.has(a,u))throw new r;e.has(i,u)||(a[u]=!0,i[u]=!0,e.each(n.predecessors(u),s),delete a[u],o.push(u))}if(e.each(n.sinks(),s),e.size(i)!==n.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,ps}var gs,kp;function xq(){if(kp)return gs;kp=1;var e=Im();gs=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return gs}var vs,Op;function Tm(){if(Op)return vs;Op=1;var e=Ne();vs=t;function t(n,i,a){e.isArray(i)||(i=[i]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),s=[],u={};return e.each(i,function(f){if(!n.hasNode(f))throw new Error("Graph does not have node: "+f);r(n,f,a==="post",u,o,s)}),s}function r(n,i,a,o,s,u){e.has(o,i)||(o[i]=!0,a||u.push(i),e.each(s(i),function(f){r(n,f,a,o,s,u)}),a&&u.push(i))}return vs}var ys,Pp;function Eq(){if(Pp)return ys;Pp=1;var e=Tm();ys=t;function t(r,n){return e(r,n,"post")}return ys}var ms,Dp;function Sq(){if(Dp)return ms;Dp=1;var e=Tm();ms=t;function t(r,n){return e(r,n,"pre")}return ms}var _s,Lp;function qq(){if(Lp)return _s;Lp=1;var e=Ne(),t=zc(),r=Cm();_s=n;function n(i,a){var o=new t,s={},u=new r,f;function c(d){var h=d.v===f?d.w:d.v,_=u.priority(h);if(_!==void 0){var p=a(d);p<_&&(s[h]=f,u.decrease(h,p))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(d){u.add(d,Number.POSITIVE_INFINITY),o.setNode(d)}),u.decrease(i.nodes()[0],0);for(var l=!1;u.size()>0;){if(f=u.removeMin(),e.has(s,f))o.setEdge(f,s[f]);else{if(l)throw new Error("Input graph is not connected: "+i);l=!0}i.nodeEdges(f).forEach(c)}return o}return _s}var bs,$p;function Rq(){return $p||($p=1,bs={components:mq(),dijkstra:Nm(),dijkstraAll:_q(),findCycles:bq(),floydWarshall:wq(),isAcyclic:xq(),postorder:Eq(),preorder:Sq(),prim:qq(),tarjan:Am(),topsort:Im()}),bs}var ws,Fp;function Cq(){if(Fp)return ws;Fp=1;var e=vq();return ws={Graph:e.Graph,json:yq(),alg:Rq(),version:e.version},ws}var xs,zp;function Oe(){if(zp)return xs;zp=1;var e;if(typeof Sc=="function")try{e=Cq()}catch{}return e||(e=window.graphlib),xs=e,xs}var Es,Hp;function Nq(){if(Hp)return Es;Hp=1;var e=rm(),t=1,r=4;function n(i){return e(i,t|r)}return Es=n,Es}var Ss,Bp;function on(){if(Bp)return Ss;Bp=1;var e=Tt(),t=Xe(),r=Xr(),n=Ce();function i(a,o,s){if(!n(s))return!1;var u=typeof o;return(u=="number"?t(s)&&r(o,s.length):u=="string"&&o in s)?e(s[o],a):!1}return Ss=i,Ss}var qs,Gp;function Aq(){if(Gp)return qs;Gp=1;var e=an(),t=Tt(),r=on(),n=vt(),i=Object.prototype,a=i.hasOwnProperty,o=e(function(s,u){s=Object(s);var f=-1,c=u.length,l=c>2?u[2]:void 0;for(l&&r(u[0],u[1],l)&&(c=1);++f<c;)for(var d=u[f],h=n(d),_=-1,p=h.length;++_<p;){var g=h[_],v=s[g];(v===void 0||t(v,i[g])&&!a.call(s,g))&&(s[g]=d[g])}return s});return qs=o,qs}var Rs,Vp;function Iq(){if(Vp)return Rs;Vp=1;var e=Ze(),t=Xe(),r=it();function n(i){return function(a,o,s){var u=Object(a);if(!t(a)){var f=e(o,3);a=r(a),o=function(l){return f(u[l],l,u)}}var c=i(a,o,s);return c>-1?u[f?a[c]:c]:void 0}}return Rs=n,Rs}var Cs,Up;function Tq(){if(Up)return Cs;Up=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Cs=t,Cs}var Ns,jp;function Mq(){if(jp)return Ns;jp=1;var e=Tq(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Ns=r,Ns}var As,Kp;function kq(){if(Kp)return As;Kp=1;var e=Mq(),t=Ce(),r=Pt(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(f){if(typeof f=="number")return f;if(r(f))return n;if(t(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=t(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=e(f);var l=a.test(f);return l||o.test(f)?s(f.slice(2),l?2:8):i.test(f)?n:+f}return As=u,As}var Is,Yp;function Mm(){if(Yp)return Is;Yp=1;var e=kq(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-1/0){var a=i<0?-1:1;return a*r}return i===i?i:0}return Is=n,Is}var Ts,Wp;function Oq(){if(Wp)return Ts;Wp=1;var e=Mm();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return Ts=t,Ts}var Ms,Xp;function Pq(){if(Xp)return Ms;Xp=1;var e=Sm(),t=Ze(),r=Oq(),n=Math.max;function i(a,o,s){var u=a==null?0:a.length;if(!u)return-1;var f=s==null?0:r(s);return f<0&&(f=n(u+f,0)),e(a,t(o,3),f)}return Ms=i,Ms}var ks,Zp;function Dq(){if(Zp)return ks;Zp=1;var e=Iq(),t=Pq(),r=e(t);return ks=r,ks}var Os,Jp;function km(){if(Jp)return Os;Jp=1;var e=Fc();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return Os=t,Os}var Ps,Qp;function Lq(){if(Qp)return Ps;Qp=1;var e=Pc(),t=nm(),r=vt();function n(i,a){return i==null?i:e(i,t(a),r)}return Ps=n,Ps}var Ds,eg;function $q(){if(eg)return Ds;eg=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Ds=e,Ds}var Ls,tg;function Fq(){if(tg)return Ls;tg=1;var e=Yr(),t=Dc(),r=Ze();function n(i,a){var o={};return a=r(a,3),t(i,function(s,u,f){e(o,u,a(s,u,f))}),o}return Ls=n,Ls}var $s,rg;function Hc(){if(rg)return $s;rg=1;var e=Pt();function t(r,n,i){for(var a=-1,o=r.length;++a<o;){var s=r[a],u=n(s);if(u!=null&&(f===void 0?u===u&&!e(u):i(u,f)))var f=u,c=s}return c}return $s=t,$s}var Fs,ng;function zq(){if(ng)return Fs;ng=1;function e(t,r){return t>r}return Fs=e,Fs}var zs,ig;function Hq(){if(ig)return zs;ig=1;var e=Hc(),t=zq(),r=yt();function n(i){return i&&i.length?e(i,r,t):void 0}return zs=n,zs}var Hs,ag;function Om(){if(ag)return Hs;ag=1;var e=Yr(),t=Tt();function r(n,i,a){(a!==void 0&&!t(n[i],a)||a===void 0&&!(i in n))&&e(n,i,a)}return Hs=r,Hs}var Bs,og;function Bq(){if(og)return Bs;og=1;var e=pt(),t=Qr(),r=Be(),n="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,u=o.call(Object);function f(c){if(!r(c)||e(c)!=n)return!1;var l=t(c);if(l===null)return!0;var d=s.call(l,"constructor")&&l.constructor;return typeof d=="function"&&d instanceof d&&o.call(d)==u}return Bs=f,Bs}var Gs,sg;function Pm(){if(sg)return Gs;sg=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return Gs=e,Gs}var Vs,ug;function Gq(){if(ug)return Vs;ug=1;var e=sr(),t=vt();function r(n){return e(n,t(n))}return Vs=r,Vs}var Us,cg;function Vq(){if(cg)return Us;cg=1;var e=Om(),t=Vy(),r=Qy(),n=Uy(),i=tm(),a=ur(),o=fe(),s=qm(),u=kt(),f=or(),c=Ce(),l=Bq(),d=cr(),h=Pm(),_=Gq();function p(g,v,y,b,m,E,x){var S=h(g,y),N=h(v,y),q=x.get(N);if(q){e(g,y,q);return}var A=E?E(S,N,y+"",g,v,x):void 0,I=A===void 0;if(I){var D=o(N),P=!D&&u(N),w=!D&&!P&&d(N);A=N,D||P||w?o(S)?A=S:s(S)?A=n(S):P?(I=!1,A=t(N,!0)):w?(I=!1,A=r(N,!0)):A=[]:l(N)||a(N)?(A=S,a(S)?A=_(S):(!c(S)||f(S))&&(A=i(N))):I=!1}I&&(x.set(N,A),m(A,N,b,E,x),x.delete(N)),e(g,y,A)}return Us=p,Us}var js,fg;function Uq(){if(fg)return js;fg=1;var e=Kr(),t=Om(),r=Pc(),n=Vq(),i=Ce(),a=vt(),o=Pm();function s(u,f,c,l,d){u!==f&&r(f,function(h,_){if(d||(d=new e),i(h))n(u,f,_,c,s,l,d);else{var p=l?l(o(u,_),h,_+"",u,f,d):void 0;p===void 0&&(p=h),t(u,_,p)}},a)}return js=s,js}var Ks,lg;function jq(){if(lg)return Ks;lg=1;var e=an(),t=on();function r(n){return e(function(i,a){var o=-1,s=a.length,u=s>1?a[s-1]:void 0,f=s>2?a[2]:void 0;for(u=n.length>3&&typeof u=="function"?(s--,u):void 0,f&&t(a[0],a[1],f)&&(u=s<3?void 0:u,s=1),i=Object(i);++o<s;){var c=a[o];c&&n(i,c,o,u)}return i})}return Ks=r,Ks}var Ys,dg;function Kq(){if(dg)return Ys;dg=1;var e=Uq(),t=jq(),r=t(function(n,i,a){e(n,i,a)});return Ys=r,Ys}var Ws,hg;function Dm(){if(hg)return Ws;hg=1;function e(t,r){return t<r}return Ws=e,Ws}var Xs,pg;function Yq(){if(pg)return Xs;pg=1;var e=Hc(),t=Dm(),r=yt();function n(i){return i&&i.length?e(i,r,t):void 0}return Xs=n,Xs}var Zs,gg;function Wq(){if(gg)return Zs;gg=1;var e=Hc(),t=Ze(),r=Dm();function n(i,a){return i&&i.length?e(i,t(a,2),r):void 0}return Zs=n,Zs}var Js,vg;function Xq(){if(vg)return Js;vg=1;var e=De(),t=function(){return e.Date.now()};return Js=t,Js}var Qs,yg;function Zq(){if(yg)return Qs;yg=1;var e=Wr(),t=rn(),r=Xr(),n=Ce(),i=fr();function a(o,s,u,f){if(!n(o))return o;s=t(s,o);for(var c=-1,l=s.length,d=l-1,h=o;h!=null&&++c<l;){var _=i(s[c]),p=u;if(_==="__proto__"||_==="constructor"||_==="prototype")return o;if(c!=d){var g=h[_];p=f?f(g,_,h):void 0,p===void 0&&(p=n(g)?g:r(s[c+1])?[]:{})}e(h,_,p),h=h[_]}return o}return Qs=a,Qs}var eu,mg;function Jq(){if(mg)return eu;mg=1;var e=nn(),t=Zq(),r=rn();function n(i,a,o){for(var s=-1,u=a.length,f={};++s<u;){var c=a[s],l=e(i,c);o(l,c)&&t(f,r(c,i),l)}return f}return eu=n,eu}var tu,_g;function Qq(){if(_g)return tu;_g=1;var e=Jq(),t=pm();function r(n,i){return e(n,i,function(a,o){return t(n,o)})}return tu=r,tu}var ru,bg;function eR(){if(bg)return ru;bg=1;var e=km(),t=xm(),r=Em();function n(i){return r(t(i,void 0,e),i+"")}return ru=n,ru}var nu,wg;function tR(){if(wg)return nu;wg=1;var e=Qq(),t=eR(),r=t(function(n,i){return n==null?{}:e(n,i)});return nu=r,nu}var iu,xg;function rR(){if(xg)return iu;xg=1;var e=Math.ceil,t=Math.max;function r(n,i,a,o){for(var s=-1,u=t(e((i-n)/(a||1)),0),f=Array(u);u--;)f[o?u:++s]=n,n+=a;return f}return iu=r,iu}var au,Eg;function nR(){if(Eg)return au;Eg=1;var e=rR(),t=on(),r=Mm();function n(i){return function(a,o,s){return s&&typeof s!="number"&&t(a,o,s)&&(o=s=void 0),a=r(a),o===void 0?(o=a,a=0):o=r(o),s=s===void 0?a<o?1:-1:r(s),e(a,o,s,i)}}return au=n,au}var ou,Sg;function iR(){if(Sg)return ou;Sg=1;var e=nR(),t=e();return ou=t,ou}var su,qg;function aR(){if(qg)return su;qg=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return su=e,su}var uu,Rg;function oR(){if(Rg)return uu;Rg=1;var e=Pt();function t(r,n){if(r!==n){var i=r!==void 0,a=r===null,o=r===r,s=e(r),u=n!==void 0,f=n===null,c=n===n,l=e(n);if(!f&&!l&&!s&&r>n||s&&u&&c&&!f&&!l||a&&u&&c||!i&&c||!o)return 1;if(!a&&!s&&!l&&r<n||l&&i&&o&&!a&&!s||f&&i&&o||!u&&o||!c)return-1}return 0}return uu=t,uu}var cu,Cg;function sR(){if(Cg)return cu;Cg=1;var e=oR();function t(r,n,i){for(var a=-1,o=r.criteria,s=n.criteria,u=o.length,f=i.length;++a<u;){var c=e(o[a],s[a]);if(c){if(a>=f)return c;var l=i[a];return c*(l=="desc"?-1:1)}}return r.index-n.index}return cu=t,cu}var fu,Ng;function uR(){if(Ng)return fu;Ng=1;var e=tn(),t=nn(),r=Ze(),n=_m(),i=aR(),a=Zr(),o=sR(),s=yt(),u=fe();function f(c,l,d){l.length?l=e(l,function(p){return u(p)?function(g){return t(g,p.length===1?p[0]:p)}:p}):l=[s];var h=-1;l=e(l,a(r));var _=n(c,function(p,g,v){var y=e(l,function(b){return b(p)});return{criteria:y,index:++h,value:p}});return i(_,function(p,g){return o(p,g,d)})}return fu=f,fu}var lu,Ag;function cR(){if(Ag)return lu;Ag=1;var e=Fc(),t=uR(),r=an(),n=on(),i=r(function(a,o){if(a==null)return[];var s=o.length;return s>1&&n(a,o[0],o[1])?o=[]:s>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(a,e(o,1),[])});return lu=i,lu}var du,Ig;function fR(){if(Ig)return du;Ig=1;var e=dm(),t=0;function r(n){var i=++t;return e(n)+i}return du=r,du}var hu,Tg;function lR(){if(Tg)return hu;Tg=1;function e(t,r,n){for(var i=-1,a=t.length,o=r.length,s={};++i<a;){var u=i<o?r[i]:void 0;n(s,t[i],u)}return s}return hu=e,hu}var pu,Mg;function dR(){if(Mg)return pu;Mg=1;var e=Wr(),t=lR();function r(n,i){return t(n||[],i||[],e)}return pu=r,pu}var gu,kg;function ae(){if(kg)return gu;kg=1;var e;if(typeof Sc=="function")try{e={cloneDeep:Nq(),constant:Oc(),defaults:Aq(),each:am(),filter:vm(),find:Dq(),flatten:km(),forEach:im(),forIn:Lq(),has:ym(),isUndefined:mm(),last:$q(),map:bm(),mapValues:Fq(),max:Hq(),merge:Kq(),min:Yq(),minBy:Wq(),now:Xq(),pick:tR(),range:iR(),reduce:wm(),sortBy:cR(),uniqueId:fR(),values:Rm(),zipObject:dR()}}catch{}return e||(e=window._),gu=e,gu}var vu,Og;function hR(){if(Og)return vu;Og=1,vu=e;function e(){var n={};n._next=n._prev=n,this._sentinel=n}e.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return t(i),i},e.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&t(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},e.prototype.toString=function(){for(var n=[],i=this._sentinel,a=i._prev;a!==i;)n.push(JSON.stringify(a,r)),a=a._prev;return"["+n.join(", ")+"]"};function t(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,i){if(n!=="_next"&&n!=="_prev")return i}return vu}var yu,Pg;function pR(){if(Pg)return yu;Pg=1;var e=ae(),t=Oe().Graph,r=hR();yu=i;var n=e.constant(1);function i(f,c){if(f.nodeCount()<=1)return[];var l=s(f,c||n),d=a(l.graph,l.buckets,l.zeroIdx);return e.flatten(e.map(d,function(h){return f.outEdges(h.v,h.w)}),!0)}function a(f,c,l){for(var d=[],h=c[c.length-1],_=c[0],p;f.nodeCount();){for(;p=_.dequeue();)o(f,c,l,p);for(;p=h.dequeue();)o(f,c,l,p);if(f.nodeCount()){for(var g=c.length-2;g>0;--g)if(p=c[g].dequeue(),p){d=d.concat(o(f,c,l,p,!0));break}}}return d}function o(f,c,l,d,h){var _=h?[]:void 0;return e.forEach(f.inEdges(d.v),function(p){var g=f.edge(p),v=f.node(p.v);h&&_.push({v:p.v,w:p.w}),v.out-=g,u(c,l,v)}),e.forEach(f.outEdges(d.v),function(p){var g=f.edge(p),v=p.w,y=f.node(v);y.in-=g,u(c,l,y)}),f.removeNode(d.v),_}function s(f,c){var l=new t,d=0,h=0;e.forEach(f.nodes(),function(g){l.setNode(g,{v:g,in:0,out:0})}),e.forEach(f.edges(),function(g){var v=l.edge(g.v,g.w)||0,y=c(g),b=v+y;l.setEdge(g.v,g.w,b),h=Math.max(h,l.node(g.v).out+=y),d=Math.max(d,l.node(g.w).in+=y)});var _=e.range(h+d+3).map(function(){return new r}),p=d+1;return e.forEach(l.nodes(),function(g){u(_,p,l.node(g))}),{graph:l,buckets:_,zeroIdx:p}}function u(f,c,l){l.out?l.in?f[l.out-l.in+c].enqueue(l):f[f.length-1].enqueue(l):f[0].enqueue(l)}return yu}var mu,Dg;function gR(){if(Dg)return mu;Dg=1;var e=ae(),t=pR();mu={run:r,undo:i};function r(a){var o=a.graph().acyclicer==="greedy"?t(a,s(a)):n(a);e.forEach(o,function(u){var f=a.edge(u);a.removeEdge(u),f.forwardName=u.name,f.reversed=!0,a.setEdge(u.w,u.v,f,e.uniqueId("rev"))});function s(u){return function(f){return u.edge(f).weight}}}function n(a){var o=[],s={},u={};function f(c){e.has(u,c)||(u[c]=!0,s[c]=!0,e.forEach(a.outEdges(c),function(l){e.has(s,l.w)?o.push(l):f(l.w)}),delete s[c])}return e.forEach(a.nodes(),f),o}function i(a){e.forEach(a.edges(),function(o){var s=a.edge(o);if(s.reversed){a.removeEdge(o);var u=s.forwardName;delete s.reversed,delete s.forwardName,a.setEdge(o.w,o.v,s,u)}})}return mu}var _u,Lg;function _e(){if(Lg)return _u;Lg=1;var e=ae(),t=Oe().Graph;_u={addDummyNode:r,simplify:n,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:o,intersectRect:s,buildLayerMatrix:u,normalizeRanks:f,removeEmptyRanks:c,addBorderNode:l,maxRank:d,partition:h,time:_,notime:p};function r(g,v,y,b){var m;do m=e.uniqueId(b);while(g.hasNode(m));return y.dummy=v,g.setNode(m,y),m}function n(g){var v=new t().setGraph(g.graph());return e.forEach(g.nodes(),function(y){v.setNode(y,g.node(y))}),e.forEach(g.edges(),function(y){var b=v.edge(y.v,y.w)||{weight:0,minlen:1},m=g.edge(y);v.setEdge(y.v,y.w,{weight:b.weight+m.weight,minlen:Math.max(b.minlen,m.minlen)})}),v}function i(g){var v=new t({multigraph:g.isMultigraph()}).setGraph(g.graph());return e.forEach(g.nodes(),function(y){g.children(y).length||v.setNode(y,g.node(y))}),e.forEach(g.edges(),function(y){v.setEdge(y,g.edge(y))}),v}function a(g){var v=e.map(g.nodes(),function(y){var b={};return e.forEach(g.outEdges(y),function(m){b[m.w]=(b[m.w]||0)+g.edge(m).weight}),b});return e.zipObject(g.nodes(),v)}function o(g){var v=e.map(g.nodes(),function(y){var b={};return e.forEach(g.inEdges(y),function(m){b[m.v]=(b[m.v]||0)+g.edge(m).weight}),b});return e.zipObject(g.nodes(),v)}function s(g,v){var y=g.x,b=g.y,m=v.x-y,E=v.y-b,x=g.width/2,S=g.height/2;if(!m&&!E)throw new Error("Not possible to find intersection inside of the rectangle");var N,q;return Math.abs(E)*x>Math.abs(m)*S?(E<0&&(S=-S),N=S*m/E,q=S):(m<0&&(x=-x),N=x,q=x*E/m),{x:y+N,y:b+q}}function u(g){var v=e.map(e.range(d(g)+1),function(){return[]});return e.forEach(g.nodes(),function(y){var b=g.node(y),m=b.rank;e.isUndefined(m)||(v[m][b.order]=y)}),v}function f(g){var v=e.min(e.map(g.nodes(),function(y){return g.node(y).rank}));e.forEach(g.nodes(),function(y){var b=g.node(y);e.has(b,"rank")&&(b.rank-=v)})}function c(g){var v=e.min(e.map(g.nodes(),function(E){return g.node(E).rank})),y=[];e.forEach(g.nodes(),function(E){var x=g.node(E).rank-v;y[x]||(y[x]=[]),y[x].push(E)});var b=0,m=g.graph().nodeRankFactor;e.forEach(y,function(E,x){e.isUndefined(E)&&x%m!==0?--b:b&&e.forEach(E,function(S){g.node(S).rank+=b})})}function l(g,v,y,b){var m={width:0,height:0};return arguments.length>=4&&(m.rank=y,m.order=b),r(g,"border",m,v)}function d(g){return e.max(e.map(g.nodes(),function(v){var y=g.node(v).rank;if(!e.isUndefined(y))return y}))}function h(g,v){var y={lhs:[],rhs:[]};return e.forEach(g,function(b){v(b)?y.lhs.push(b):y.rhs.push(b)}),y}function _(g,v){var y=e.now();try{return v()}finally{console.log(g+" time: "+(e.now()-y)+"ms")}}function p(g,v){return v()}return _u}var bu,$g;function vR(){if($g)return bu;$g=1;var e=ae(),t=_e();bu={run:r,undo:i};function r(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(o){n(a,o)})}function n(a,o){var s=o.v,u=a.node(s).rank,f=o.w,c=a.node(f).rank,l=o.name,d=a.edge(o),h=d.labelRank;if(c!==u+1){a.removeEdge(o);var _,p,g;for(g=0,++u;u<c;++g,++u)d.points=[],p={width:0,height:0,edgeLabel:d,edgeObj:o,rank:u},_=t.addDummyNode(a,"edge",p,"_d"),u===h&&(p.width=d.width,p.height=d.height,p.dummy="edge-label",p.labelpos=d.labelpos),a.setEdge(s,_,{weight:d.weight},l),g===0&&a.graph().dummyChains.push(_),s=_;a.setEdge(s,f,{weight:d.weight},l)}}function i(a){e.forEach(a.graph().dummyChains,function(o){var s=a.node(o),u=s.edgeLabel,f;for(a.setEdge(s.edgeObj,u);s.dummy;)f=a.successors(o)[0],a.removeNode(o),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),o=f,s=a.node(o)})}return bu}var wu,Fg;function Or(){if(Fg)return wu;Fg=1;var e=ae();wu={longestPath:t,slack:r};function t(n){var i={};function a(o){var s=n.node(o);if(e.has(i,o))return s.rank;i[o]=!0;var u=e.min(e.map(n.outEdges(o),function(f){return a(f.w)-n.edge(f).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}e.forEach(n.sources(),a)}function r(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return wu}var xu,zg;function Lm(){if(zg)return xu;zg=1;var e=ae(),t=Oe().Graph,r=Or().slack;xu=n;function n(s){var u=new t({directed:!1}),f=s.nodes()[0],c=s.nodeCount();u.setNode(f,{});for(var l,d;i(u,s)<c;)l=a(u,s),d=u.hasNode(l.v)?r(s,l):-r(s,l),o(u,s,d);return u}function i(s,u){function f(c){e.forEach(u.nodeEdges(c),function(l){var d=l.v,h=c===d?l.w:d;!s.hasNode(h)&&!r(u,l)&&(s.setNode(h,{}),s.setEdge(c,h,{}),f(h))})}return e.forEach(s.nodes(),f),s.nodeCount()}function a(s,u){return e.minBy(u.edges(),function(f){if(s.hasNode(f.v)!==s.hasNode(f.w))return r(u,f)})}function o(s,u,f){e.forEach(s.nodes(),function(c){u.node(c).rank+=f})}return xu}var Eu,Hg;function yR(){if(Hg)return Eu;Hg=1;var e=ae(),t=Lm(),r=Or().slack,n=Or().longestPath,i=Oe().alg.preorder,a=Oe().alg.postorder,o=_e().simplify;Eu=s,s.initLowLimValues=l,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=h,s.enterEdge=_,s.exchangeEdges=p;function s(b){b=o(b),n(b);var m=t(b);l(m),u(m,b);for(var E,x;E=h(m);)x=_(m,b,E),p(m,b,E,x)}function u(b,m){var E=a(b,b.nodes());E=E.slice(0,E.length-1),e.forEach(E,function(x){f(b,m,x)})}function f(b,m,E){var x=b.node(E),S=x.parent;b.edge(E,S).cutvalue=c(b,m,E)}function c(b,m,E){var x=b.node(E),S=x.parent,N=!0,q=m.edge(E,S),A=0;return q||(N=!1,q=m.edge(S,E)),A=q.weight,e.forEach(m.nodeEdges(E),function(I){var D=I.v===E,P=D?I.w:I.v;if(P!==S){var w=D===N,T=m.edge(I).weight;if(A+=w?T:-T,v(b,E,P)){var C=b.edge(E,P).cutvalue;A+=w?-C:C}}}),A}function l(b,m){arguments.length<2&&(m=b.nodes()[0]),d(b,{},1,m)}function d(b,m,E,x,S){var N=E,q=b.node(x);return m[x]=!0,e.forEach(b.neighbors(x),function(A){e.has(m,A)||(E=d(b,m,E,A,x))}),q.low=N,q.lim=E++,S?q.parent=S:delete q.parent,E}function h(b){return e.find(b.edges(),function(m){return b.edge(m).cutvalue<0})}function _(b,m,E){var x=E.v,S=E.w;m.hasEdge(x,S)||(x=E.w,S=E.v);var N=b.node(x),q=b.node(S),A=N,I=!1;N.lim>q.lim&&(A=q,I=!0);var D=e.filter(m.edges(),function(P){return I===y(b,b.node(P.v),A)&&I!==y(b,b.node(P.w),A)});return e.minBy(D,function(P){return r(m,P)})}function p(b,m,E,x){var S=E.v,N=E.w;b.removeEdge(S,N),b.setEdge(x.v,x.w,{}),l(b),u(b,m),g(b,m)}function g(b,m){var E=e.find(b.nodes(),function(S){return!m.node(S).parent}),x=i(b,E);x=x.slice(1),e.forEach(x,function(S){var N=b.node(S).parent,q=m.edge(S,N),A=!1;q||(q=m.edge(N,S),A=!0),m.node(S).rank=m.node(N).rank+(A?q.minlen:-q.minlen)})}function v(b,m,E){return b.hasEdge(m,E)}function y(b,m,E){return E.low<=m.lim&&m.lim<=E.lim}return Eu}var Su,Bg;function mR(){if(Bg)return Su;Bg=1;var e=Or(),t=e.longestPath,r=Lm(),n=yR();Su=i;function i(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":o(u);break;case"longest-path":a(u);break;default:s(u)}}var a=t;function o(u){t(u),r(u)}function s(u){n(u)}return Su}var qu,Gg;function _R(){if(Gg)return qu;Gg=1;var e=ae();qu=t;function t(i){var a=n(i);e.forEach(i.graph().dummyChains,function(o){for(var s=i.node(o),u=s.edgeObj,f=r(i,a,u.v,u.w),c=f.path,l=f.lca,d=0,h=c[d],_=!0;o!==u.w;){if(s=i.node(o),_){for(;(h=c[d])!==l&&i.node(h).maxRank<s.rank;)d++;h===l&&(_=!1)}if(!_){for(;d<c.length-1&&i.node(h=c[d+1]).minRank<=s.rank;)d++;h=c[d]}i.setParent(o,h),o=i.successors(o)[0]}})}function r(i,a,o,s){var u=[],f=[],c=Math.min(a[o].low,a[s].low),l=Math.max(a[o].lim,a[s].lim),d,h;d=o;do d=i.parent(d),u.push(d);while(d&&(a[d].low>c||l>a[d].lim));for(h=d,d=s;(d=i.parent(d))!==h;)f.push(d);return{path:u.concat(f.reverse()),lca:h}}function n(i){var a={},o=0;function s(u){var f=o;e.forEach(i.children(u),s),a[u]={low:f,lim:o++}}return e.forEach(i.children(),s),a}return qu}var Ru,Vg;function bR(){if(Vg)return Ru;Vg=1;var e=ae(),t=_e();Ru={run:r,cleanup:o};function r(s){var u=t.addDummyNode(s,"root",{},"_root"),f=i(s),c=e.max(e.values(f))-1,l=2*c+1;s.graph().nestingRoot=u,e.forEach(s.edges(),function(h){s.edge(h).minlen*=l});var d=a(s)+1;e.forEach(s.children(),function(h){n(s,u,l,d,c,f,h)}),s.graph().nodeRankFactor=l}function n(s,u,f,c,l,d,h){var _=s.children(h);if(!_.length){h!==u&&s.setEdge(u,h,{weight:0,minlen:f});return}var p=t.addBorderNode(s,"_bt"),g=t.addBorderNode(s,"_bb"),v=s.node(h);s.setParent(p,h),v.borderTop=p,s.setParent(g,h),v.borderBottom=g,e.forEach(_,function(y){n(s,u,f,c,l,d,y);var b=s.node(y),m=b.borderTop?b.borderTop:y,E=b.borderBottom?b.borderBottom:y,x=b.borderTop?c:2*c,S=m!==E?1:l-d[h]+1;s.setEdge(p,m,{weight:x,minlen:S,nestingEdge:!0}),s.setEdge(E,g,{weight:x,minlen:S,nestingEdge:!0})}),s.parent(h)||s.setEdge(u,p,{weight:0,minlen:l+d[h]})}function i(s){var u={};function f(c,l){var d=s.children(c);d&&d.length&&e.forEach(d,function(h){f(h,l+1)}),u[c]=l}return e.forEach(s.children(),function(c){f(c,1)}),u}function a(s){return e.reduce(s.edges(),function(u,f){return u+s.edge(f).weight},0)}function o(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(s.edges(),function(f){var c=s.edge(f);c.nestingEdge&&s.removeEdge(f)})}return Ru}var Cu,Ug;function wR(){if(Ug)return Cu;Ug=1;var e=ae(),t=_e();Cu=r;function r(i){function a(o){var s=i.children(o),u=i.node(o);if(s.length&&e.forEach(s,a),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var f=u.minRank,c=u.maxRank+1;f<c;++f)n(i,"borderLeft","_bl",o,u,f),n(i,"borderRight","_br",o,u,f)}}e.forEach(i.children(),a)}function n(i,a,o,s,u,f){var c={width:0,height:0,rank:f,borderType:a},l=u[a][f-1],d=t.addDummyNode(i,"border",c,o);u[a][f]=d,i.setParent(d,s),l&&i.setEdge(l,d,{weight:1})}return Cu}var Nu,jg;function xR(){if(jg)return Nu;jg=1;var e=ae();Nu={adjust:t,undo:r};function t(f){var c=f.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(f)}function r(f){var c=f.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&a(f),(c==="lr"||c==="rl")&&(s(f),n(f))}function n(f){e.forEach(f.nodes(),function(c){i(f.node(c))}),e.forEach(f.edges(),function(c){i(f.edge(c))})}function i(f){var c=f.width;f.width=f.height,f.height=c}function a(f){e.forEach(f.nodes(),function(c){o(f.node(c))}),e.forEach(f.edges(),function(c){var l=f.edge(c);e.forEach(l.points,o),e.has(l,"y")&&o(l)})}function o(f){f.y=-f.y}function s(f){e.forEach(f.nodes(),function(c){u(f.node(c))}),e.forEach(f.edges(),function(c){var l=f.edge(c);e.forEach(l.points,u),e.has(l,"x")&&u(l)})}function u(f){var c=f.x;f.x=f.y,f.y=c}return Nu}var Au,Kg;function ER(){if(Kg)return Au;Kg=1;var e=ae();Au=t;function t(r){var n={},i=e.filter(r.nodes(),function(f){return!r.children(f).length}),a=e.max(e.map(i,function(f){return r.node(f).rank})),o=e.map(e.range(a+1),function(){return[]});function s(f){if(!e.has(n,f)){n[f]=!0;var c=r.node(f);o[c.rank].push(f),e.forEach(r.successors(f),s)}}var u=e.sortBy(i,function(f){return r.node(f).rank});return e.forEach(u,s),o}return Au}var Iu,Yg;function SR(){if(Yg)return Iu;Yg=1;var e=ae();Iu=t;function t(n,i){for(var a=0,o=1;o<i.length;++o)a+=r(n,i[o-1],i[o]);return a}function r(n,i,a){for(var o=e.zipObject(a,e.map(a,function(d,h){return h})),s=e.flatten(e.map(i,function(d){return e.sortBy(e.map(n.outEdges(d),function(h){return{pos:o[h.w],weight:n.edge(h).weight}}),"pos")}),!0),u=1;u<a.length;)u<<=1;var f=2*u-1;u-=1;var c=e.map(new Array(f),function(){return 0}),l=0;return e.forEach(s.forEach(function(d){var h=d.pos+u;c[h]+=d.weight;for(var _=0;h>0;)h%2&&(_+=c[h+1]),h=h-1>>1,c[h]+=d.weight;l+=d.weight*_})),l}return Iu}var Tu,Wg;function qR(){if(Wg)return Tu;Wg=1;var e=ae();Tu=t;function t(r,n){return e.map(n,function(i){var a=r.inEdges(i);if(a.length){var o=e.reduce(a,function(s,u){var f=r.edge(u),c=r.node(u.v);return{sum:s.sum+f.weight*c.order,weight:s.weight+f.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return Tu}var Mu,Xg;function RR(){if(Xg)return Mu;Xg=1;var e=ae();Mu=t;function t(i,a){var o={};e.forEach(i,function(u,f){var c=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:f};e.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),e.forEach(a.edges(),function(u){var f=o[u.v],c=o[u.w];!e.isUndefined(f)&&!e.isUndefined(c)&&(c.indegree++,f.out.push(o[u.w]))});var s=e.filter(o,function(u){return!u.indegree});return r(s)}function r(i){var a=[];function o(f){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(f.barycenter)||c.barycenter>=f.barycenter)&&n(f,c)}}function s(f){return function(c){c.in.push(f),--c.indegree===0&&i.push(c)}}for(;i.length;){var u=i.pop();a.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,s(u))}return e.map(e.filter(a,function(f){return!f.merged}),function(f){return e.pick(f,["vs","i","barycenter","weight"])})}function n(i,a){var o=0,s=0;i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),a.weight&&(o+=a.barycenter*a.weight,s+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=o/s,i.weight=s,i.i=Math.min(a.i,i.i),a.merged=!0}return Mu}var ku,Zg;function CR(){if(Zg)return ku;Zg=1;var e=ae(),t=_e();ku=r;function r(a,o){var s=t.partition(a,function(p){return e.has(p,"barycenter")}),u=s.lhs,f=e.sortBy(s.rhs,function(p){return-p.i}),c=[],l=0,d=0,h=0;u.sort(i(!!o)),h=n(c,f,h),e.forEach(u,function(p){h+=p.vs.length,c.push(p.vs),l+=p.barycenter*p.weight,d+=p.weight,h=n(c,f,h)});var _={vs:e.flatten(c,!0)};return d&&(_.barycenter=l/d,_.weight=d),_}function n(a,o,s){for(var u;o.length&&(u=e.last(o)).i<=s;)o.pop(),a.push(u.vs),s++;return s}function i(a){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:a?s.i-o.i:o.i-s.i}}return ku}var Ou,Jg;function NR(){if(Jg)return Ou;Jg=1;var e=ae(),t=qR(),r=RR(),n=CR();Ou=i;function i(s,u,f,c){var l=s.children(u),d=s.node(u),h=d?d.borderLeft:void 0,_=d?d.borderRight:void 0,p={};h&&(l=e.filter(l,function(E){return E!==h&&E!==_}));var g=t(s,l);e.forEach(g,function(E){if(s.children(E.v).length){var x=i(s,E.v,f,c);p[E.v]=x,e.has(x,"barycenter")&&o(E,x)}});var v=r(g,f);a(v,p);var y=n(v,c);if(h&&(y.vs=e.flatten([h,y.vs,_],!0),s.predecessors(h).length)){var b=s.node(s.predecessors(h)[0]),m=s.node(s.predecessors(_)[0]);e.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+b.order+m.order)/(y.weight+2),y.weight+=2}return y}function a(s,u){e.forEach(s,function(f){f.vs=e.flatten(f.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function o(s,u){e.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return Ou}var Pu,Qg;function AR(){if(Qg)return Pu;Qg=1;var e=ae(),t=Oe().Graph;Pu=r;function r(i,a,o){var s=n(i),u=new t({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(f){return i.node(f)});return e.forEach(i.nodes(),function(f){var c=i.node(f),l=i.parent(f);(c.rank===a||c.minRank<=a&&a<=c.maxRank)&&(u.setNode(f),u.setParent(f,l||s),e.forEach(i[o](f),function(d){var h=d.v===f?d.w:d.v,_=u.edge(h,f),p=e.isUndefined(_)?0:_.weight;u.setEdge(h,f,{weight:i.edge(d).weight+p})}),e.has(c,"minRank")&&u.setNode(f,{borderLeft:c.borderLeft[a],borderRight:c.borderRight[a]}))}),u}function n(i){for(var a;i.hasNode(a=e.uniqueId("_root")););return a}return Pu}var Du,ev;function IR(){if(ev)return Du;ev=1;var e=ae();Du=t;function t(r,n,i){var a={},o;e.forEach(i,function(s){for(var u=r.parent(s),f,c;u;){if(f=r.parent(u),f?(c=a[f],a[f]=u):(c=o,o=u),c&&c!==u){n.setEdge(c,u);return}u=f}})}return Du}var Lu,tv;function TR(){if(tv)return Lu;tv=1;var e=ae(),t=ER(),r=SR(),n=NR(),i=AR(),a=IR(),o=Oe().Graph,s=_e();Lu=u;function u(d){var h=s.maxRank(d),_=f(d,e.range(1,h+1),"inEdges"),p=f(d,e.range(h-1,-1,-1),"outEdges"),g=t(d);l(d,g);for(var v=Number.POSITIVE_INFINITY,y,b=0,m=0;m<4;++b,++m){c(b%2?_:p,b%4>=2),g=s.buildLayerMatrix(d);var E=r(d,g);E<v&&(m=0,y=e.cloneDeep(g),v=E)}l(d,y)}function f(d,h,_){return e.map(h,function(p){return i(d,p,_)})}function c(d,h){var _=new o;e.forEach(d,function(p){var g=p.graph().root,v=n(p,g,_,h);e.forEach(v.vs,function(y,b){p.node(y).order=b}),a(p,_,v.vs)})}function l(d,h){e.forEach(h,function(_){e.forEach(_,function(p,g){d.node(p).order=g})})}return Lu}var $u,rv;function MR(){if(rv)return $u;rv=1;var e=ae(),t=Oe().Graph,r=_e();$u={positionX:_,findType1Conflicts:n,findType2Conflicts:i,addConflict:o,hasConflict:s,verticalAlignment:u,horizontalCompaction:f,alignCoordinates:d,findSmallestWidthAlignment:l,balance:h};function n(v,y){var b={};function m(E,x){var S=0,N=0,q=E.length,A=e.last(x);return e.forEach(x,function(I,D){var P=a(v,I),w=P?v.node(P).order:q;(P||I===A)&&(e.forEach(x.slice(N,D+1),function(T){e.forEach(v.predecessors(T),function(C){var F=v.node(C),H=F.order;(H<S||w<H)&&!(F.dummy&&v.node(T).dummy)&&o(b,C,T)})}),N=D+1,S=w)}),x}return e.reduce(y,m),b}function i(v,y){var b={};function m(x,S,N,q,A){var I;e.forEach(e.range(S,N),function(D){I=x[D],v.node(I).dummy&&e.forEach(v.predecessors(I),function(P){var w=v.node(P);w.dummy&&(w.order<q||w.order>A)&&o(b,P,I)})})}function E(x,S){var N=-1,q,A=0;return e.forEach(S,function(I,D){if(v.node(I).dummy==="border"){var P=v.predecessors(I);P.length&&(q=v.node(P[0]).order,m(S,A,D,N,q),A=D,N=q)}m(S,A,S.length,q,x.length)}),S}return e.reduce(y,E),b}function a(v,y){if(v.node(y).dummy)return e.find(v.predecessors(y),function(b){return v.node(b).dummy})}function o(v,y,b){if(y>b){var m=y;y=b,b=m}var E=v[y];E||(v[y]=E={}),E[b]=!0}function s(v,y,b){if(y>b){var m=y;y=b,b=m}return e.has(v[y],b)}function u(v,y,b,m){var E={},x={},S={};return e.forEach(y,function(N){e.forEach(N,function(q,A){E[q]=q,x[q]=q,S[q]=A})}),e.forEach(y,function(N){var q=-1;e.forEach(N,function(A){var I=m(A);if(I.length){I=e.sortBy(I,function(C){return S[C]});for(var D=(I.length-1)/2,P=Math.floor(D),w=Math.ceil(D);P<=w;++P){var T=I[P];x[A]===A&&q<S[T]&&!s(b,A,T)&&(x[T]=A,x[A]=E[A]=E[T],q=S[T])}}})}),{root:E,align:x}}function f(v,y,b,m,E){var x={},S=c(v,y,b,E),N=E?"borderLeft":"borderRight";function q(D,P){for(var w=S.nodes(),T=w.pop(),C={};T;)C[T]?D(T):(C[T]=!0,w.push(T),w=w.concat(P(T))),T=w.pop()}function A(D){x[D]=S.inEdges(D).reduce(function(P,w){return Math.max(P,x[w.v]+S.edge(w))},0)}function I(D){var P=S.outEdges(D).reduce(function(T,C){return Math.min(T,x[C.w]-S.edge(C))},Number.POSITIVE_INFINITY),w=v.node(D);P!==Number.POSITIVE_INFINITY&&w.borderType!==N&&(x[D]=Math.max(x[D],P))}return q(A,S.predecessors.bind(S)),q(I,S.successors.bind(S)),e.forEach(m,function(D){x[D]=x[b[D]]}),x}function c(v,y,b,m){var E=new t,x=v.graph(),S=p(x.nodesep,x.edgesep,m);return e.forEach(y,function(N){var q;e.forEach(N,function(A){var I=b[A];if(E.setNode(I),q){var D=b[q],P=E.edge(D,I);E.setEdge(D,I,Math.max(S(v,A,q),P||0))}q=A})}),E}function l(v,y){return e.minBy(e.values(y),function(b){var m=Number.NEGATIVE_INFINITY,E=Number.POSITIVE_INFINITY;return e.forIn(b,function(x,S){var N=g(v,S)/2;m=Math.max(x+N,m),E=Math.min(x-N,E)}),m-E})}function d(v,y){var b=e.values(y),m=e.min(b),E=e.max(b);e.forEach(["u","d"],function(x){e.forEach(["l","r"],function(S){var N=x+S,q=v[N],A;if(q!==y){var I=e.values(q);A=S==="l"?m-e.min(I):E-e.max(I),A&&(v[N]=e.mapValues(q,function(D){return D+A}))}})})}function h(v,y){return e.mapValues(v.ul,function(b,m){if(y)return v[y.toLowerCase()][m];var E=e.sortBy(e.map(v,m));return(E[1]+E[2])/2})}function _(v){var y=r.buildLayerMatrix(v),b=e.merge(n(v,y),i(v,y)),m={},E;e.forEach(["u","d"],function(S){E=S==="u"?y:e.values(y).reverse(),e.forEach(["l","r"],function(N){N==="r"&&(E=e.map(E,function(D){return e.values(D).reverse()}));var q=(S==="u"?v.predecessors:v.successors).bind(v),A=u(v,E,b,q),I=f(v,E,A.root,A.align,N==="r");N==="r"&&(I=e.mapValues(I,function(D){return-D})),m[S+N]=I})});var x=l(v,m);return d(m,x),h(m,v.graph().align)}function p(v,y,b){return function(m,E,x){var S=m.node(E),N=m.node(x),q=0,A;if(q+=S.width/2,e.has(S,"labelpos"))switch(S.labelpos.toLowerCase()){case"l":A=-S.width/2;break;case"r":A=S.width/2;break}if(A&&(q+=b?A:-A),A=0,q+=(S.dummy?y:v)/2,q+=(N.dummy?y:v)/2,q+=N.width/2,e.has(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":A=N.width/2;break;case"r":A=-N.width/2;break}return A&&(q+=b?A:-A),A=0,q}}function g(v,y){return v.node(y).width}return $u}var Fu,nv;function kR(){if(nv)return Fu;nv=1;var e=ae(),t=_e(),r=MR().positionX;Fu=n;function n(a){a=t.asNonCompoundGraph(a),i(a),e.forEach(r(a),function(o,s){a.node(s).x=o})}function i(a){var o=t.buildLayerMatrix(a),s=a.graph().ranksep,u=0;e.forEach(o,function(f){var c=e.max(e.map(f,function(l){return a.node(l).height}));e.forEach(f,function(l){a.node(l).y=u+c/2}),u+=c+s})}return Fu}var zu,iv;function OR(){if(iv)return zu;iv=1;var e=ae(),t=gR(),r=vR(),n=mR(),i=_e().normalizeRanks,a=_R(),o=_e().removeEmptyRanks,s=bR(),u=wR(),f=xR(),c=TR(),l=kR(),d=_e(),h=Oe().Graph;zu=_;function _(R,k){var $=k&&k.debugTiming?d.time:d.notime;$("layout",function(){var B=$("  buildLayoutGraph",function(){return q(R)});$("  runLayout",function(){p(B,$)}),$("  updateInputGraph",function(){g(R,B)})})}function p(R,k){k("    makeSpaceForEdgeLabels",function(){A(R)}),k("    removeSelfEdges",function(){M(R)}),k("    acyclic",function(){t.run(R)}),k("    nestingGraph.run",function(){s.run(R)}),k("    rank",function(){n(d.asNonCompoundGraph(R))}),k("    injectEdgeLabelProxies",function(){I(R)}),k("    removeEmptyRanks",function(){o(R)}),k("    nestingGraph.cleanup",function(){s.cleanup(R)}),k("    normalizeRanks",function(){i(R)}),k("    assignRankMinMax",function(){D(R)}),k("    removeEdgeLabelProxies",function(){P(R)}),k("    normalize.run",function(){r.run(R)}),k("    parentDummyChains",function(){a(R)}),k("    addBorderSegments",function(){u(R)}),k("    order",function(){c(R)}),k("    insertSelfEdges",function(){z(R)}),k("    adjustCoordinateSystem",function(){f.adjust(R)}),k("    position",function(){l(R)}),k("    positionSelfEdges",function(){G(R)}),k("    removeBorderNodes",function(){H(R)}),k("    normalize.undo",function(){r.undo(R)}),k("    fixupEdgeLabelCoords",function(){C(R)}),k("    undoCoordinateSystem",function(){f.undo(R)}),k("    translateGraph",function(){w(R)}),k("    assignNodeIntersects",function(){T(R)}),k("    reversePoints",function(){F(R)}),k("    acyclic.undo",function(){t.undo(R)})}function g(R,k){e.forEach(R.nodes(),function($){var B=R.node($),j=k.node($);B&&(B.x=j.x,B.y=j.y,k.children($).length&&(B.width=j.width,B.height=j.height))}),e.forEach(R.edges(),function($){var B=R.edge($),j=k.edge($);B.points=j.points,e.has(j,"x")&&(B.x=j.x,B.y=j.y)}),R.graph().width=k.graph().width,R.graph().height=k.graph().height}var v=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],m=["width","height"],E={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],S={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},N=["labelpos"];function q(R){var k=new h({multigraph:!0,compound:!0}),$=U(R.graph());return k.setGraph(e.merge({},y,V($,v),e.pick($,b))),e.forEach(R.nodes(),function(B){var j=U(R.node(B));k.setNode(B,e.defaults(V(j,m),E)),k.setParent(B,R.parent(B))}),e.forEach(R.edges(),function(B){var j=U(R.edge(B));k.setEdge(B,e.merge({},S,V(j,x),e.pick(j,N)))}),k}function A(R){var k=R.graph();k.ranksep/=2,e.forEach(R.edges(),function($){var B=R.edge($);B.minlen*=2,B.labelpos.toLowerCase()!=="c"&&(k.rankdir==="TB"||k.rankdir==="BT"?B.width+=B.labeloffset:B.height+=B.labeloffset)})}function I(R){e.forEach(R.edges(),function(k){var $=R.edge(k);if($.width&&$.height){var B=R.node(k.v),j=R.node(k.w),W={rank:(j.rank-B.rank)/2+B.rank,e:k};d.addDummyNode(R,"edge-proxy",W,"_ep")}})}function D(R){var k=0;e.forEach(R.nodes(),function($){var B=R.node($);B.borderTop&&(B.minRank=R.node(B.borderTop).rank,B.maxRank=R.node(B.borderBottom).rank,k=e.max(k,B.maxRank))}),R.graph().maxRank=k}function P(R){e.forEach(R.nodes(),function(k){var $=R.node(k);$.dummy==="edge-proxy"&&(R.edge($.e).labelRank=$.rank,R.removeNode(k))})}function w(R){var k=Number.POSITIVE_INFINITY,$=0,B=Number.POSITIVE_INFINITY,j=0,W=R.graph(),Z=W.marginx||0,te=W.marginy||0;function ie(re){var ee=re.x,J=re.y,ue=re.width,K=re.height;k=Math.min(k,ee-ue/2),$=Math.max($,ee+ue/2),B=Math.min(B,J-K/2),j=Math.max(j,J+K/2)}e.forEach(R.nodes(),function(re){ie(R.node(re))}),e.forEach(R.edges(),function(re){var ee=R.edge(re);e.has(ee,"x")&&ie(ee)}),k-=Z,B-=te,e.forEach(R.nodes(),function(re){var ee=R.node(re);ee.x-=k,ee.y-=B}),e.forEach(R.edges(),function(re){var ee=R.edge(re);e.forEach(ee.points,function(J){J.x-=k,J.y-=B}),e.has(ee,"x")&&(ee.x-=k),e.has(ee,"y")&&(ee.y-=B)}),W.width=$-k+Z,W.height=j-B+te}function T(R){e.forEach(R.edges(),function(k){var $=R.edge(k),B=R.node(k.v),j=R.node(k.w),W,Z;$.points?(W=$.points[0],Z=$.points[$.points.length-1]):($.points=[],W=j,Z=B),$.points.unshift(d.intersectRect(B,W)),$.points.push(d.intersectRect(j,Z))})}function C(R){e.forEach(R.edges(),function(k){var $=R.edge(k);if(e.has($,"x"))switch(($.labelpos==="l"||$.labelpos==="r")&&($.width-=$.labeloffset),$.labelpos){case"l":$.x-=$.width/2+$.labeloffset;break;case"r":$.x+=$.width/2+$.labeloffset;break}})}function F(R){e.forEach(R.edges(),function(k){var $=R.edge(k);$.reversed&&$.points.reverse()})}function H(R){e.forEach(R.nodes(),function(k){if(R.children(k).length){var $=R.node(k),B=R.node($.borderTop),j=R.node($.borderBottom),W=R.node(e.last($.borderLeft)),Z=R.node(e.last($.borderRight));$.width=Math.abs(Z.x-W.x),$.height=Math.abs(j.y-B.y),$.x=W.x+$.width/2,$.y=B.y+$.height/2}}),e.forEach(R.nodes(),function(k){R.node(k).dummy==="border"&&R.removeNode(k)})}function M(R){e.forEach(R.edges(),function(k){if(k.v===k.w){var $=R.node(k.v);$.selfEdges||($.selfEdges=[]),$.selfEdges.push({e:k,label:R.edge(k)}),R.removeEdge(k)}})}function z(R){var k=d.buildLayerMatrix(R);e.forEach(k,function($){var B=0;e.forEach($,function(j,W){var Z=R.node(j);Z.order=W+B,e.forEach(Z.selfEdges,function(te){d.addDummyNode(R,"selfedge",{width:te.label.width,height:te.label.height,rank:Z.rank,order:W+ ++B,e:te.e,label:te.label},"_se")}),delete Z.selfEdges})})}function G(R){e.forEach(R.nodes(),function(k){var $=R.node(k);if($.dummy==="selfedge"){var B=R.node($.e.v),j=B.x+B.width/2,W=B.y,Z=$.x-j,te=B.height/2;R.setEdge($.e,$.label),R.removeNode(k),$.label.points=[{x:j+2*Z/3,y:W-te},{x:j+5*Z/6,y:W-te},{x:j+Z,y:W},{x:j+5*Z/6,y:W+te},{x:j+2*Z/3,y:W+te}],$.label.x=$.x,$.label.y=$.y}})}function V(R,k){return e.mapValues(e.pick(R,k),Number)}function U(R){var k={};return e.forEach(R,function($,B){k[B.toLowerCase()]=$}),k}return zu}var Hu,av;function PR(){if(av)return Hu;av=1;var e=ae(),t=_e(),r=Oe().Graph;Hu={debugOrdering:n};function n(i){var a=t.buildLayerMatrix(i),o=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+i.node(s).rank)}),e.forEach(i.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),e.forEach(a,function(s,u){var f="layer"+u;o.setNode(f,{rank:"same"}),e.reduce(s,function(c,l){return o.setEdge(c,l,{style:"invis"}),l})}),o}return Hu}var Bu,ov;function DR(){return ov||(ov=1,Bu="0.8.5"),Bu}var Gu,sv;function LR(){return sv||(sv=1,Gu={graphlib:Oe(),layout:OR(),debug:PR(),util:{time:_e().time,notime:_e().notime},version:DR()}),Gu}var $R=LR();const uv=dv($R),cv=180,fv=80;function Vu(e,t,r="LR"){const n=new uv.graphlib.Graph;return n.setDefaultEdgeLabel(()=>({})),n.setGraph({rankdir:r}),e.forEach(i=>{n.setNode(i.id,{width:cv,height:fv})}),t.forEach(i=>{n.setEdge(i.source,i.target)}),uv.layout(n),{nodes:e.map(i=>{const a=n.node(i.id);return{...i,position:{x:a.x-cv/2,y:a.y-fv/2}}}),edges:t}}const FR={custom:xE};function zR({architecture:e}){const[t,r,n]=Wx([]),[i,a,o]=Xx([]);Br();const s=(d,h,_)=>{const p=`container-${d}`,g=h.children||[],v=[],y=[];v.push({id:p,type:"custom",data:{label:`${h.name||h.type} ()`,isContainer:!0,parentId:d,fullData:h,hasChildren:!1},position:{x:0,y:0},style:{backgroundColor:"#e6f2ff",border:"2px dashed #66aaff",padding:10}});let b=null;return g.forEach((m,E)=>{const x=`${p}/${m.name||m.type||`child${E}`}`;v.push({id:x,type:"custom",data:{label:m.name||m.type,hasChildren:m.children?.length>0,fullData:m},position:{x:0,y:0}}),b?y.push({id:`${b}-${x}`,source:b,target:x}):y.push({id:`${p}-${x}`,source:p,target:x}),b=x}),{containerNodeId:p,newNodes:v,newEdges:y}},u=O.useCallback(d=>{const h=d.id,_=d.data.fullData;h.split("/");const{containerNodeId:p,newNodes:g,newEdges:v}=s(h,_),y=t.filter(E=>E.id!==h).concat(g),b=i.filter(E=>E.source!==h&&E.target!==h).concat(v),m=Vu(y,b,"LR");r(m.nodes),a(m.edges)},[t,i]),f=O.useCallback(d=>{const h=d.id,_=d.data.parentId,p=d.data.fullData,g=t.filter(x=>x.id.startsWith(`${h}/`)||x.id===h).map(x=>x.id),v=t.filter(x=>!g.includes(x.id)),y=i.filter(x=>!g.includes(x.id)&&!g.includes(x.source)&&!g.includes(x.target)),b={id:_,type:"custom",data:{label:p.name||p.type,hasChildren:p.children?.length>0,fullData:p},position:d.position},m=[...v,b],E=Vu(m,y,"LR");r(E.nodes),a(E.edges)},[t,i]),c=O.useCallback((d,h)=>{h.data.hasChildren&&!h.data.isContainer&&u(h)},[u]),l=O.useCallback((d,h)=>{h.data.isContainer&&f(h)},[f]);return O.useEffect(()=>{const h={id:e.name||e.type,type:"custom",data:{label:e.name||e.type,hasChildren:e.children?.length>0,fullData:e},position:{x:0,y:0}},{nodes:_}=Vu([h],[],"LR");r(_),a([])},[e]),Ee.jsx("div",{style:{width:"100%",height:"80vh"},children:Ee.jsxs(My,{nodes:t,edges:i,onNodeClick:c,onNodeDoubleClick:l,onNodesChange:n,onEdgesChange:o,fitView:!0,nodeTypes:FR,fitViewOptions:{padding:.2},panOnDrag:!0,zoomOnScroll:!0,zoomOnPinch:!0,children:[Ee.jsx(pE,{}),Ee.jsx(oE,{}),Ee.jsx(wE,{})]})})}function GR({architecture:e}){return Ee.jsx(Ec,{children:Ee.jsx(zR,{architecture:e})})}export{GR as default};
